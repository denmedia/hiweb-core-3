jQuery(document).ready(function(b){var a={icons:[],timeout:null,ajax_request:null,init:function(){b(".hiweb-field-fontawesome").each(a.make)},make:function(){var c=b(this);c.on("click",'[data-click="icons"]',function(d){d.preventDefault();a.do_query_icons(c,"")}).on("change keyup","input[name]",function(){var d=b(this);c.find(".input-group-addon").html('<i class="'+d.val()+'"></i>');c.find('.ui.icon.button[data-click="icons"]').removeClass("loading");clearTimeout(a.timeout);a.timeout=setTimeout(function(){c.find('.ui.icon.button[data-click="icons"]').addClass("loading");a.do_query_icons(c,d.val())},1000)}).on("blur","input[name]",function(){setTimeout(function(){c.find('.ui.icon.button[data-click="icons"]').removeClass("loading");clearTimeout(a.timeout);c.find(".ui.dropdown").dropdown("hide")},500)}).on("click",'[data-click="styles"]',function(d){d.preventDefault();c.find('[data-click="styles"]').popup("show")});c.find(".ui.dropdown").dropdown({on:"manual",allowAdditions:true,hideAdditions:false,selectOnKeydown:false,forceSelection:false});c.find('[data-click="styles"]').popup({inline:true,content:"TEST",hoverable:true,exclusive:true,position:"top center",on:"click"});b("body").on("click",function(d){if(!c.is(d.target)&&c.has(d.target).length===0&&c.is('.ui.popup[data-field-rand-id="'+c.data("rand-id")+'"]')){c.find(".ui.dropdown").dropdown("hide")}});b("body").on("click",".hiweb-field-fontawesome .dropdown .menu .item",function(){var e=b(this).closest(".hiweb-field-fontawesome");a.set_value(e,b(this).data("value"));var d=a.icons.styles[b(this).data("text")];if(d.length>1){e.find('.ui.icon.button[data-click="styles"]').removeClass("disabled");e.find('.ui.icon.button[data-click="styles"]').popup("create");e.find('.ui.icon.button[data-click="styles"]').popup("get popup").find(".content").html("");for(var f in d){e.find('.ui.icon.button[data-click="styles"]').popup("get popup").find(".content").append('<div class="item" data-value="'+d[f]+'"><i class="'+d[f]+'"></i></div>')}}else{e.find('.ui.icon.button[data-click="styles"]').addClass("disabled");e.find('.ui.icon.button[data-click="styles"]').popup("create");e.find('.ui.icon.button[data-click="styles"]').popup("hide");e.find('.ui.icon.button[data-click="styles"]').popup("get popup").find(".content").html("")}});b("body").on("click",".hiweb-field-fontawesome .ui.popup .content .item",function(){var d=b(this).closest(".hiweb-field-fontawesome");a.set_value(d,b(this).data("value"))})},set_value:function(d,c){d.find("input[name]").val(c);d.find(".input-group-addon").html('<i class="'+c+'"></i>')},do_query_icons:function(d,c){if(a.ajax_request!==null){a.ajax_request.abort()}d.find('.ui.icon.button[data-click="icons"]').addClass("loading");a.ajax_request=b.ajax({url:ajaxurl+"?action=hiweb-type-fontawesome",type:"post",data:{query:c},dataType:"json",success:function(e){a.icons=e;d.find('.ui.icon.button[data-click="icons"]').removeClass("loading");d.find(".ui.dropdown").dropdown("setup").menu({values:e.values});d.find(".ui.dropdown").dropdown("refresh");d.find(".ui.dropdown").dropdown("show")},error:function(e){console.info(e);d.find('.ui.icon.button[data-click="icons"]').removeClass("loading")}})}};a.init();jQuery(document).on("hiweb-field-repeat-added-new-row","[data-col]",function(f,d,g,c){d.find(".hiweb-field-fontawesome").each(a.init)})});