/*!
 * froala_editor v2.8.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
;!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(c,b){return b===undefined&&(b="undefined"!=typeof window?require("jquery"):require("jquery")(c)),a(b)}:a(window.jQuery)}(function(b){var a=function(f,c){this.id=++b.FE.ID,this.opts=b.extend(!0,{},b.extend({},a.DEFAULTS,"object"==typeof c&&c));var g=JSON.stringify(this.opts);b.FE.OPTS_MAPPING[g]=b.FE.OPTS_MAPPING[g]||this.id,this.sid=b.FE.OPTS_MAPPING[g],b.FE.SHARED[this.sid]=b.FE.SHARED[this.sid]||{},this.shared=b.FE.SHARED[this.sid],this.shared.count=(this.shared.count||0)+1,this.$oel=b(f),this.$oel.data("froala.editor",this),this.o_doc=f.ownerDocument,this.o_win="defaultView" in this.o_doc?this.o_doc.defaultView:this.o_doc.parentWindow;var d=b(this.o_win).scrollTop();this.$oel.on("froala.doInit",b.proxy(function(){this.$oel.off("froala.doInit"),this.doc=this.$el.get(0).ownerDocument,this.win="defaultView" in this.doc?this.doc.defaultView:this.doc.parentWindow,this.$doc=b(this.doc),this.$win=b(this.win),this.opts.pluginsEnabled||(this.opts.pluginsEnabled=Object.keys(b.FE.PLUGINS)),this.opts.initOnClick?(this.load(b.FE.MODULES),this.$el.on("touchstart.init",function(){b(this).data("touched",!0)}),this.$el.on("touchmove.init",function(){b(this).removeData("touched")}),this.$el.on("mousedown.init touchend.init dragenter.init focus.init",b.proxy(function(i){if("touchend"==i.type&&!this.$el.data("touched")){return !0}if(1===i.which||!i.which){this.$el.off("mousedown.init touchstart.init touchmove.init touchend.init dragenter.init focus.init"),this.load(b.FE.MODULES),this.load(b.FE.PLUGINS);var h=i.originalEvent&&i.originalEvent.originalTarget;h&&"IMG"==h.tagName&&b(h).trigger("mousedown"),"undefined"==typeof this.ul&&this.destroy(),"touchend"==i.type&&this.image&&i.originalEvent&&i.originalEvent.target&&b(i.originalEvent.target).is("img")&&setTimeout(b.proxy(function(){this.image.edit(b(i.originalEvent.target))},this),100),this.ready=!0,this.events.trigger("initialized")}},this)),this.events.trigger("initializationDelayed")):(this.load(b.FE.MODULES),this.load(b.FE.PLUGINS),b(this.o_win).scrollTop(d),"undefined"==typeof this.ul&&this.destroy(),this.ready=!0,this.events.trigger("initialized"))},this)),this._init()};a.DEFAULTS={initOnClick:!1,pluginsEnabled:null},a.MODULES={},a.PLUGINS={},a.VERSION="2.8.4",a.INSTANCES=[],a.OPTS_MAPPING={},a.SHARED={},a.ID=0,a.prototype._init=function(){var g=this.$oel.prop("tagName");1<=this.$oel.closest("label").length&&console.warn("Note! It is not recommended to initialize the Froala Editor within a label tag.");var d=b.proxy(function(){"TEXTAREA"!=g&&(this._original_html=this._original_html||this.$oel.html()),this.$box=this.$box||this.$oel,this.opts.fullPage&&(this.opts.iframe=!0),this.opts.iframe?(this.$iframe=b('<iframe src="about:blank" frameBorder="0">'),this.$wp=b("<div></div>"),this.$box.html(this.$wp),this.$wp.append(this.$iframe),this.$iframe.get(0).contentWindow.document.open(),this.$iframe.get(0).contentWindow.document.write("<!DOCTYPE html>"),this.$iframe.get(0).contentWindow.document.write("<html><head></head><body></body></html>"),this.$iframe.get(0).contentWindow.document.close(),this.$el=this.$iframe.contents().find("body"),this.el=this.$el.get(0),this.$head=this.$iframe.contents().find("head"),this.$html=this.$iframe.contents().find("html"),this.iframe_document=this.$iframe.get(0).contentWindow.document):(this.$el=b("<div></div>"),this.el=this.$el.get(0),this.$wp=b("<div></div>").append(this.$el),this.$box.html(this.$wp)),this.$oel.trigger("froala.doInit")},this),j=b.proxy(function(){this.$box=b("<div>"),this.$oel.before(this.$box).hide(),this._original_html=this.$oel.val(),this.$oel.parents("form").on("submit."+this.id,b.proxy(function(){this.events.trigger("form.submit")},this)),this.$oel.parents("form").on("reset."+this.id,b.proxy(function(){this.events.trigger("form.reset")},this)),d()},this),f=b.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.$el.attr("contenteditable",!0).css("outline","none").css("display","inline-block"),this.opts.multiLine=!1,this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),h=b.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.trigger("froala.doInit")},this),c=b.proxy(function(){this.$el=this.$oel,this.el=this.$el.get(0),this.opts.toolbarInline=!1,this.$oel.on("click.popup",function(i){i.preventDefault()}),this.$oel.trigger("froala.doInit")},this);this.opts.editInPopup?c():"TEXTAREA"==g?j():"A"==g?f():"IMG"==g?h():"BUTTON"==g||"INPUT"==g?(this.opts.editInPopup=!0,this.opts.toolbarInline=!1,c()):d()},a.prototype.load=function(d){for(var c in d){if(d.hasOwnProperty(c)){if(this[c]){continue}if(b.FE.PLUGINS[c]&&this.opts.pluginsEnabled.indexOf(c)<0){continue}if(this[c]=new d[c](this),this[c]._init&&(this[c]._init(),this.opts.initOnClick&&"core"==c)){return !1}}}},a.prototype.destroy=function(){this.shared.count--,this.events.$off();var d=this.html.get();if(this.opts.iframe&&(this.events.disableBlur(),this.win.focus(),this.events.enableBlur()),this.events.trigger("destroy",[],!0),this.events.trigger("shared.destroy",undefined,!0),0===this.shared.count){for(var c in this.shared){this.shared.hasOwnProperty(c)&&(this.shared[c],b.FE.SHARED[this.sid][c]=null)}delete b.FE.SHARED[this.sid]}this.$oel.parents("form").off("."+this.id),this.$oel.off("click.popup"),this.$oel.removeData("froala.editor"),this.$oel.off("froalaEditor"),this.core.destroy(d),b.FE.INSTANCES.splice(b.FE.INSTANCES.indexOf(this),1)},b.fn.froalaEditor=function(g){for(var d=[],f=0;f<arguments.length;f++){d.push(arguments[f])}if("string"==typeof g){var c=[];return this.each(function(){var j,h,k=b(this).data("froala.editor");if(!k){return console.warn("Editor should be initialized before calling the "+g+" method.")}if(0<g.indexOf(".")&&k[g.split(".")[0]]?(k[g.split(".")[0]]&&(j=k[g.split(".")[0]]),h=g.split(".")[1]):(j=k,h=g.split(".")[0]),!j[h]){return b.error("Method "+g+" does not exist in Froala Editor.")}var i=j[h].apply(k,d.slice(1));i===undefined?c.push(this):0===c.length&&c.push(i)}),1==c.length?c[0]:c}if("object"==typeof g||!g){return this.each(function(){if(!b(this).data("froala.editor")){new a(this,g)}})}},b.fn.froalaEditor.Constructor=a,b.FroalaEditor=a,b.FE=a,b.FE.XS=0,b.FE.SM=1,b.FE.MD=2,b.FE.LG=3;b.FE.LinkRegExCommon="[a-z\\u0080-\\u009f\\u00a1-\\uffff0-9-_.]{1,}",b.FE.LinkRegExEnd="((:[0-9]{1,5})|)(((\\/|\\?|#)[a-z\\u00a1-\\uffff0-9@?\\|!^=%&amp;/~+#-\\'*-_{}]*)|())",b.FE.LinkRegExTLD="(("+b.FE.LinkRegExCommon+")(\\.(com|net|org|edu|mil|gov|co|biz|info|me|dev)))",b.FE.LinkRegExHTTP="((ftp|http|https):\\/\\/"+b.FE.LinkRegExCommon+")",b.FE.LinkRegExAuth="((ftp|http|https):\\/\\/[\\u0021-\\uffff]{1,}@"+b.FE.LinkRegExCommon+")",b.FE.LinkRegExWWW="(www\\."+b.FE.LinkRegExCommon+"\\.[a-z0-9-]{2,24})",b.FE.LinkRegEx="("+b.FE.LinkRegExTLD+"|"+b.FE.LinkRegExHTTP+"|"+b.FE.LinkRegExWWW+"|"+b.FE.LinkRegExAuth+")"+b.FE.LinkRegExEnd,b.FE.LinkProtocols=["mailto","tel","sms","notes","data"],b.FE.MAIL_REGEX=/.+@.+\..+/i,b.FE.MODULES.helpers=function(h){function j(){var v,s,x={},u=(s=-1,"Microsoft Internet Explorer"==navigator.appName?(v=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(v)&&(s=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(v=navigator.userAgent,null!==new RegExp("Trident/.*rv:([0-9]{1,}[\\.0-9]{0,})").exec(v)&&(s=parseFloat(RegExp.$1))),s);if(0<u){x.msie=!0}else{var w=navigator.userAgent.toLowerCase(),q=/(edge)[ \/]([\w.]+)/.exec(w)||/(chrome)[ \/]([\w.]+)/.exec(w)||/(webkit)[ \/]([\w.]+)/.exec(w)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(w)||/(msie) ([\w.]+)/.exec(w)||w.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(w)||[],l=q[1]||"";q[2];q[1]&&(x[l]=!0),x.chrome?x.webkit=!0:x.webkit&&(x.safari=!0)}return x.msie&&(x.version=u),x}function m(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&!d()}function f(){return/(Android)/g.test(navigator.userAgent)&&!d()}function c(){return/(Blackberry)/g.test(navigator.userAgent)}function d(){return/(Windows Phone)/gi.test(navigator.userAgent)}function k(i){return parseInt(i,10)||0}var p;var g=null;return{_init:function(){h.browser=j(),function(){function o(s,r){var q=s[r];s[r]=function(w){var u,y=!1,v=!1;if(w&&w.match(n)){w=w.replace(n,""),this.parentNode||(i.appendChild(this),v=!0);var x=this.parentNode;return this.id||(this.id="rootedQuerySelector_id_"+(new Date).getTime(),y=!0),u=q.call(x,"#"+this.id+" "+w),y&&(this.id=""),v&&i.removeChild(this),u}return q.call(this,w)}}var i=h.o_doc.createElement("div");try{i.querySelectorAll(":scope *")}catch(l){var n=/^\s*:scope/gi;o(Element.prototype,"querySelector"),o(Element.prototype,"querySelectorAll"),o(HTMLElement.prototype,"querySelector"),o(HTMLElement.prototype,"querySelectorAll")}}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(l){var i=this;if(!i){return null}if(!document.documentElement.contains(this)){return null}do{if(i.matches(l)){return i}i=i.parentElement}while(null!==i);return null})},isIOS:m,isMac:function(){return null==g&&(g=0<=navigator.platform.toUpperCase().indexOf("MAC")),g},isAndroid:f,isBlackberry:c,isWindowsPhone:d,isMobile:function(){return f()||m()||c()},isEmail:function(i){return !/^(https?:|ftps?:|)\/\//i.test(i)&&b.FE.MAIL_REGEX.test(i)},requestAnimationFrame:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(i){window.setTimeout(i,1000/60)}},getPX:k,screenSize:function(){var l=b('<div class="fr-visibility-helper"></div>').appendTo("body:first");try{var i=k(l.css("margin-left"));return l.remove(),i}catch(o){return b.FE.LG}},isTouch:function(){return"ontouchstart" in window||window.DocumentTouch&&document instanceof DocumentTouch},sanitizeURL:function(i){return/^(https?:|ftps?:|)\/\//i.test(i)?i:/^([A-Za-z]:(\\){1,2}|[A-Za-z]:((\\){1,2}[^\\]+)+)(\\)?$/i.test(i)?i:new RegExp("^("+b.FE.LinkProtocols.join("|")+"):\\/\\/","i").test(i)?i:i=encodeURIComponent(i).replace(/%23/g,"#").replace(/%2F/g,"/").replace(/%25/g,"%").replace(/mailto%3A/gi,"mailto:").replace(/file%3A/gi,"file:").replace(/sms%3A/gi,"sms:").replace(/tel%3A/gi,"tel:").replace(/notes%3A/gi,"notes:").replace(/data%3Aimage/gi,"data:image").replace(/blob%3A/gi,"blob:").replace(/%3A(\d)/gi,":$1").replace(/webkit-fake-url%3A/gi,"webkit-fake-url:").replace(/%3F/g,"?").replace(/%3D/g,"=").replace(/%26/g,"&").replace(/&amp;/g,"&").replace(/%2C/g,",").replace(/%3B/g,";").replace(/%2B/g,"+").replace(/%40/g,"@").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7B/g,"{").replace(/%7D/g,"}")},isArray:function(i){return i&&!i.propertyIsEnumerable("length")&&"object"==typeof i&&"number"==typeof i.length},RGBToHex:function(l){function i(n){return("0"+parseInt(n,10).toString(16)).slice(-2)}try{return l&&"transparent"!==l?/^#[0-9A-F]{6}$/i.test(l)?l:("#"+i((l=l.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))[1])+i(l[2])+i(l[3])).toUpperCase():""}catch(o){return null}},HEXtoRGB:function(l){l=l.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(s,o,u,q){return o+o+u+u+q+q});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l);return i?"rgb("+parseInt(i[1],16)+", "+parseInt(i[2],16)+", "+parseInt(i[3],16)+")":""},isURL:function(i){return !!/^(https?:|ftps?:|)\/\//i.test(i)&&(i=String(i).replace(/</g,"%3C").replace(/>/g,"%3E").replace(/"/g,"%22").replace(/ /g,"%20"),new RegExp("^"+b.FE.LinkRegExHTTP+b.FE.LinkRegExEnd+"$","gi").test(i))},getAlignment:function(q){var i=(q.css("text-align")||"").replace(/-(.*)-/g,"");if(["left","right","justify","center"].indexOf(i)<0){if(!p){var u=b('<div dir="'+("rtl"==h.opts.direction?"rtl":"auto")+'" style="text-align: '+h.$el.css("text-align")+'; position: fixed; left: -3000px;"><span id="s1">.</span><span id="s2">.</span></div>');b("body:first").append(u);var l=u.find("#s1").get(0).getBoundingClientRect().left,s=u.find("#s2").get(0).getBoundingClientRect().left;u.remove(),p=l<s?"left":"right"}i=p}return i},scrollTop:function(){return h.o_win.pageYOffset?h.o_win.pageYOffset:h.o_doc.documentElement&&h.o_doc.documentElement.scrollTop?h.o_doc.documentElement.scrollTop:h.o_doc.body.scrollTop?h.o_doc.body.scrollTop:0},scrollLeft:function(){return h.o_win.pageXOffset?h.o_win.pageXOffset:h.o_doc.documentElement&&h.o_doc.documentElement.scrollLeft?h.o_doc.documentElement.scrollLeft:h.o_doc.body.scrollLeft?h.o_doc.body.scrollLeft:0},isInViewPort:function(l){var i=l.getBoundingClientRect();return 0<=i.top&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)||i.top<=0&&i.bottom>=(window.innerHeight||document.documentElement.clientHeight)}}},b.FE.MODULES.events=function(G){var A,D={};function F(d,c,f){z(d,c,f)}function q(f){if(void 0===f&&(f=!0),!G.$wp){return !1}if(G.helpers.isIOS()&&G.$win.get(0).focus(),G.core.hasFocus()){return !1}if(!G.core.hasFocus()&&f){var c=G.$win.scrollTop();if(G.browser.msie&&G.$box&&G.$box.css("position","fixed"),G.browser.msie&&G.$wp&&G.$wp.css("overflow","visible"),w(),G.$el.focus(),G.events.trigger("focus"),m(),G.browser.msie&&G.$box&&G.$box.css("position",""),G.browser.msie&&G.$wp&&G.$wp.css("overflow","auto"),c!=G.$win.scrollTop()&&G.$win.scrollTop(c),!G.selection.info(G.el).atStart){return !1}}if(!G.core.hasFocus()||0<G.$el.find(".fr-marker").length){return !1}if(G.selection.info(G.el).atStart&&G.selection.isCollapsed()&&null!=G.html.defaultTag()){var g=G.markers.insert();if(g&&!G.node.blockParent(g)){b(g).remove();var d=G.$el.find(G.html.blockTagsQuery()).get(0);d&&(b(d).prepend(b.FE.MARKERS),G.selection.restore())}else{g&&b(g).remove()}}}var j=!1;function m(){A=!0}function w(){A=!1}function v(){return A}function B(g,d,l){var f,h=g.split(" ");if(1<h.length){for(var c=0;c<h.length;c++){B(h[c],d,l)}return !0}void 0===l&&(l=!1),f=0!==g.indexOf("shared.")?D[g]=D[g]||[]:G.shared._events[g]=G.shared._events[g]||[],l?f.unshift(d):f.push(d)}var C=[];function z(h,f,p,g,l){"function"==typeof p&&(l=g,g=p,p=!1);var d=l?G.shared.$_events:C,c=l?G.sid:G.id;p?h.on(f.split(" ").join(".ed"+c+" ")+".ed"+c,p,g):h.on(f.split(" ").join(".ed"+c+" ")+".ed"+c,g),d.push([h,f.split(" ").join(".ed"+c+" ")+".ed"+c])}function k(d){for(var c=0;c<d.length;c++){d[c][0].off(d[c][1])}}function E(g,d,l){if(!G.edit.isDisabled()||l){var f,h;if(0!==g.indexOf("shared.")){f=D[g]}else{if(0<G.shared.count){return !1}f=G.shared._events[g]}if(f){for(var c=0;c<f.length;c++){if(!1===(h=f[c].apply(G,d))){return !1}}}return !1!==(h=G.$oel.triggerHandler("froalaEditor."+g,b.merge([G],d||[])))&&h}}function y(){for(var c in D){D.hasOwnProperty(c)&&delete D[c]}}function x(){for(var c in G.shared._events){G.shared._events.hasOwnProperty(c)&&delete G.shared._events[c]}}return{_init:function(){G.shared.$_events=G.shared.$_events||[],G.shared._events={},G.helpers.isMobile()?(G._mousedown="touchstart",G._mouseup="touchend",G._move="touchmove",G._mousemove="touchmove"):(G._mousedown="mousedown",G._mouseup="mouseup",G._move="",G._mousemove="mousemove"),F(G.$el,"click mouseup mousedown touchstart touchend dragenter dragover dragleave dragend drop dragstart",function(c){E(c.type,[c])}),B("mousedown",function(){for(var c=0;c<b.FE.INSTANCES.length;c++){b.FE.INSTANCES[c]!=G&&b.FE.INSTANCES[c].popups&&b.FE.INSTANCES[c].popups.areVisible()&&b.FE.INSTANCES[c].$el.find(".fr-marker").remove()}}),F(G.$win,G._mousedown,function(c){E("window.mousedown",[c]),m()}),F(G.$win,G._mouseup,function(c){E("window.mouseup",[c])}),F(G.$win,"cut copy keydown keyup touchmove touchend",function(c){E("window."+c.type,[c])}),F(G.$doc,"dragend drop",function(c){E("document."+c.type,[c])}),F(G.$el,"keydown keypress keyup input",function(c){E(c.type,[c])}),F(G.$el,"focus",function(c){v()&&(q(!1),!1===j&&E(c.type,[c]))}),F(G.$el,"blur",function(c){v()&&!0===j&&(E(c.type,[c]),m())}),B("focus",function(){j=!0}),B("blur",function(){j=!1}),m(),F(G.$el,"cut copy paste beforepaste",function(c){E(c.type,[c])}),B("destroy",y),B("shared.destroy",x)},on:B,trigger:E,bindClick:function(d,c,f){z(d,G._mousedown,c,function(h){var g,i;G.edit.isDisabled()||(i=b((g=h).currentTarget),G.edit.isDisabled()||G.node.hasClass(i.get(0),"fr-disabled")?g.preventDefault():"mousedown"===g.type&&1!==g.which||(G.helpers.isMobile()||g.preventDefault(),(G.helpers.isAndroid()||G.helpers.isWindowsPhone())&&0===i.parents(".fr-dropdown-menu").length&&(g.preventDefault(),g.stopPropagation()),i.addClass("fr-selected"),G.events.trigger("commands.mousedown",[i])))},!0),z(d,G._mouseup+" "+G._move,c,function(g){G.edit.isDisabled()||function(l,h){var o=b(l.currentTarget);if(G.edit.isDisabled()||G.node.hasClass(o.get(0),"fr-disabled")){return l.preventDefault()}if(("mouseup"!==l.type||1===l.which)&&G.node.hasClass(o.get(0),"fr-selected")){if("touchmove"!=l.type){if(l.stopPropagation(),l.stopImmediatePropagation(),l.preventDefault(),!G.node.hasClass(o.get(0),"fr-selected")){return G.button.getButtons(".fr-selected",!0).removeClass("fr-selected")}if(G.button.getButtons(".fr-selected",!0).removeClass("fr-selected"),o.data("dragging")||o.attr("disabled")){return o.removeData("dragging")}var i=o.data("timeout");i&&(clearTimeout(i),o.removeData("timeout")),h.apply(G,[l])}else{o.data("timeout")||o.data("timeout",setTimeout(function(){o.data("dragging",!0)},100))}}}(g,f)},!0),z(d,"mousedown click mouseup",c,function(g){G.edit.isDisabled()||g.stopPropagation()},!0),B("window.mouseup",function(){G.edit.isDisabled()||(d.find(c).removeClass("fr-selected"),m())})},disableBlur:w,enableBlur:m,blurActive:v,focus:q,chainTrigger:function(g,d,l){if(!G.edit.isDisabled()||l){var f,h;if(0!==g.indexOf("shared.")){f=D[g]}else{if(0<G.shared.count){return !1}f=G.shared._events[g]}if(f){for(var c=0;c<f.length;c++){void 0!==(h=f[c].apply(G,[d]))&&(d=h)}}return void 0!==(h=G.$oel.triggerHandler("froalaEditor."+g,b.merge([G],[d])))&&(d=h),d}},$on:z,$off:function(){k(C),C=[],0===G.shared.count&&(k(G.shared.$_events),G.shared.$_events=[])}}},b.FE.MODULES.node=function(f){function h(d){return d&&"IFRAME"!=d.tagName?Array.prototype.slice.call(d.childNodes||[]):[]}function c(d){return !!d&&(d.nodeType==Node.ELEMENT_NODE&&0<=b.FE.BLOCK_TAGS.indexOf(d.tagName.toLowerCase()))}function j(m){var d={},q=m.attributes;if(q){for(var l=0;l<q.length;l++){var p=q[l];d[p.nodeName]=p.value}}return d}function g(q){for(var m="",u=j(q),p=Object.keys(u).sort(),s=0;s<p.length;s++){var l=p[s],d=u[l];d.indexOf("'")<0&&0<=d.indexOf('"')?m+=" "+l+"='"+d+"'":0<=d.indexOf('"')&&0<=d.indexOf("'")?m+=" "+l+'="'+(d=d.replace(/"/g,"&quot;"))+'"':m+=" "+l+'="'+d+'"'}return m}function k(d){return d===f.el}return{isBlock:c,isEmpty:function(p,l){if(!p){return !0}if(p.querySelector("table")){return !1}var s=h(p);1==s.length&&c(s[0])&&(s=h(s[0]));for(var m=!1,q=0;q<s.length;q++){var d=s[q];if(!(l&&f.node.hasClass(d,"fr-marker")||d.nodeType==Node.TEXT_NODE&&0===d.textContent.length)){if("BR"!=d.tagName&&0<(d.textContent||"").replace(/\u200B/gi,"").replace(/\n/g,"").length){return !1}if(m){return !1}"BR"==d.tagName&&(m=!0)}}return !(p.querySelectorAll(b.FE.VOID_ELEMENTS.join(",")).length-p.querySelectorAll("br").length||p.querySelector(f.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||1<p.querySelectorAll(b.FE.BLOCK_TAGS.join(",")).length||p.querySelector(f.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)"))},blockParent:function(d){for(;d&&d.parentNode!==f.el&&(!d.parentNode||!f.node.hasClass(d.parentNode,"fr-inner"));){if(c(d=d.parentNode)){return d}}return null},deepestParent:function(l,d,m){if(void 0===d&&(d=[]),void 0===m&&(m=!0),d.push(f.el),0<=d.indexOf(l.parentNode)||l.parentNode&&f.node.hasClass(l.parentNode,"fr-inner")||l.parentNode&&0<=b.FE.SIMPLE_ENTER_TAGS.indexOf(l.parentNode.tagName)&&m){return null}for(;d.indexOf(l.parentNode)<0&&l.parentNode&&!f.node.hasClass(l.parentNode,"fr-inner")&&(b.FE.SIMPLE_ENTER_TAGS.indexOf(l.parentNode.tagName)<0||!m)&&(!c(l)||!c(l.parentNode)||!m);){l=l.parentNode}return l},rawAttributes:j,attributes:g,clearAttributes:function(m){for(var d=m.attributes,o=d.length-1;0<=o;o--){var l=d[o];m.removeAttribute(l.nodeName)}},openTagString:function(d){return"<"+d.tagName.toLowerCase()+g(d)+">"},closeTagString:function(d){return"</"+d.tagName.toLowerCase()+">"},isFirstSibling:function i(d,l){void 0===l&&(l=!0);for(var e=d.previousSibling;e&&l&&f.node.hasClass(e,"fr-marker");){e=e.previousSibling}return !e||e.nodeType==Node.TEXT_NODE&&""===e.textContent&&i(e)},isLastSibling:function i(d,l){void 0===l&&(l=!0);for(var e=d.nextSibling;e&&l&&f.node.hasClass(e,"fr-marker");){e=e.nextSibling}return !e||e.nodeType==Node.TEXT_NODE&&""===e.textContent&&i(e)},isList:function(d){return !!d&&0<=["UL","OL"].indexOf(d.tagName)},isLink:function(d){return !!d&&d.nodeType==Node.ELEMENT_NODE&&"a"==d.tagName.toLowerCase()},isElement:k,contents:h,isVoid:function(d){return d&&d.nodeType==Node.ELEMENT_NODE&&0<=b.FE.VOID_ELEMENTS.indexOf((d.tagName||"").toLowerCase())},hasFocus:function(d){return d===f.doc.activeElement&&(!f.doc.hasFocus||f.doc.hasFocus())&&!!(k(d)||d.type||d.href||~d.tabIndex)},isEditable:function(d){return(!d.getAttribute||"false"!=d.getAttribute("contenteditable"))&&["STYLE","SCRIPT"].indexOf(d.tagName)<0},isDeletable:function(d){return d&&d.nodeType==Node.ELEMENT_NODE&&d.getAttribute("class")&&0<=(d.getAttribute("class")||"").indexOf("fr-deletable")},hasClass:function(l,d){return l instanceof b&&(l=l.get(0)),l&&l.classList&&l.classList.contains(d)},filter:function(d){return f.browser.msie?d:{acceptNode:d}}}},b.FE.INVISIBLE_SPACE="&#8203;",b.FE.START_MARKER='<span class="fr-marker" data-id="0" data-type="true" style="display: none; line-height: 0;">'+b.FE.INVISIBLE_SPACE+"</span>",b.FE.END_MARKER='<span class="fr-marker" data-id="0" data-type="false" style="display: none; line-height: 0;">'+b.FE.INVISIBLE_SPACE+"</span>",b.FE.MARKERS=b.FE.START_MARKER+b.FE.END_MARKER,b.FE.MODULES.markers=function(f){function e(){if(!f.$wp){return null}try{var k=f.selection.ranges(0),h=k.commonAncestorContainer;if(h!=f.el&&0===f.$el.find(h).length){return null}var m=k.cloneRange(),j=k.cloneRange();m.collapse(!0);var l=b('<span class="fr-marker" style="display: none; line-height: 0;">'+b.FE.INVISIBLE_SPACE+"</span>",f.doc)[0];if(m.insertNode(l),l=f.$el.find("span.fr-marker").get(0)){for(var d=l.nextSibling;d&&d.nodeType===Node.TEXT_NODE&&0===d.textContent.length;){b(d).remove(),d=f.$el.find("span.fr-marker").get(0).nextSibling}return f.selection.clear(),f.selection.get().addRange(j),l}return null}catch(c){console.warn("MARKER",c)}}function g(){f.$el.find(".fr-marker").remove()}return{place:function(m,q,h){var c,d,k;try{var p=m.cloneRange();if(p.collapse(q),p.insertNode(b('<span class="fr-marker" data-id="'+h+'" data-type="'+q+'" style="display: '+(f.browser.safari?"none":"inline-block")+'; line-height: 0;">'+b.FE.INVISIBLE_SPACE+"</span>",f.doc)[0]),!0===q){for(k=(c=f.$el.find('span.fr-marker[data-type="true"][data-id="'+h+'"]').get(0)).nextSibling;k&&k.nodeType===Node.TEXT_NODE&&0===k.textContent.length;){b(k).remove(),k=c.nextSibling}}if(!0===q&&!m.collapsed){for(;!f.node.isElement(c.parentNode)&&!k;){b(c.parentNode).after(c),k=c.nextSibling}if(k&&k.nodeType===Node.ELEMENT_NODE&&f.node.isBlock(k)&&"HR"!==k.tagName){for(d=[k];k=d[0],(d=f.node.contents(k))[0]&&f.node.isBlock(d[0]);){}b(k).prepend(b(c))}}if(!1===q&&!m.collapsed){if((k=(c=f.$el.find('span.fr-marker[data-type="false"][data-id="'+h+'"]').get(0)).previousSibling)&&k.nodeType===Node.ELEMENT_NODE&&f.node.isBlock(k)&&"HR"!==k.tagName){for(d=[k];k=d[d.length-1],(d=f.node.contents(k))[d.length-1]&&f.node.isBlock(d[d.length-1]);){}b(k).append(b(c))}c.parentNode&&0<=["TD","TH"].indexOf(c.parentNode.tagName)&&c.parentNode.previousSibling&&!c.previousSibling&&b(c.parentNode.previousSibling).append(c)}var u=f.$el.find('span.fr-marker[data-type="'+q+'"][data-id="'+h+'"]').get(0);return u&&(u.style.display="none"),u}catch(j){return null}},insert:e,split:function(){f.selection.isCollapsed()||f.selection.remove();var j=f.$el.find(".fr-marker").get(0);if(null==j&&(j=e()),null==j){return null}var d=f.node.deepestParent(j);if(d||(d=f.node.blockParent(j))&&"LI"!=d.tagName&&(d=null),d){if(f.node.isBlock(d)&&f.node.isEmpty(d)){"LI"!=d.tagName||d.parentNode.firstElementChild!=d||f.node.isEmpty(d.parentNode)?b(d).replaceWith('<span class="fr-marker"></span>'):b(d).append('<span class="fr-marker"></span>')}else{if(f.cursor.isAtStart(j,d)){b(d).before('<span class="fr-marker"></span>'),b(j).remove()}else{if(f.cursor.isAtEnd(j,d)){b(d).after('<span class="fr-marker"></span>'),b(j).remove()}else{for(var l=j,h="",k="";l=l.parentNode,h+=f.node.closeTagString(l),k=f.node.openTagString(l)+k,l!=d;){}b(j).replaceWith('<span id="fr-break"></span>');var c=f.node.openTagString(d)+b(d).html()+f.node.closeTagString(d);c=c.replace(/<span id="fr-break"><\/span>/g,h+'<span class="fr-marker"></span>'+k),b(d).replaceWith(c)}}}}return f.$el.find(".fr-marker").get(0)},insertAtPoint:function(l){var h,p=l.clientX,k=l.clientY;g();var m=null;if("undefined"!=typeof f.doc.caretPositionFromPoint?(h=f.doc.caretPositionFromPoint(p,k),(m=f.doc.createRange()).setStart(h.offsetNode,h.offset),m.setEnd(h.offsetNode,h.offset)):"undefined"!=typeof f.doc.caretRangeFromPoint&&(h=f.doc.caretRangeFromPoint(p,k),(m=f.doc.createRange()).setStart(h.startContainer,h.startOffset),m.setEnd(h.startContainer,h.startOffset)),null!==m&&"undefined"!=typeof f.win.getSelection){var d=f.win.getSelection();d.removeAllRanges(),d.addRange(m)}else{if("undefined"!=typeof f.doc.body.createTextRange){try{(m=f.doc.body.createTextRange()).moveToPoint(p,k);var c=m.duplicate();c.moveToPoint(p,k),m.setEndPoint("EndToEnd",c),m.select()}catch(j){return !1}}}e()},remove:g}},b.FE.MODULES.selection=function(l){function B(){var c="";return l.win.getSelection?c=l.win.getSelection():l.doc.getSelection?c=l.doc.getSelection():l.doc.selection&&(c=l.doc.selection.createRange().text),c.toString()}function k(){return l.win.getSelection?l.win.getSelection():l.doc.getSelection?l.doc.getSelection():l.doc.selection.createRange()}function v(i){var c=k(),o=[];if(c&&c.getRangeAt&&c.rangeCount){o=[];for(var f=0;f<c.rangeCount;f++){o.push(c.getRangeAt(f))}}else{o=l.doc.createRange?[l.doc.createRange()]:[]}return void 0!==i?o[i]:o}function w(){var f=k();try{f.removeAllRanges?f.removeAllRanges():f.empty?f.empty():f.clear&&f.clear()}catch(c){}}function t(f,c){var i=f;return i.nodeType==Node.ELEMENT_NODE&&0<i.childNodes.length&&i.childNodes[c]&&(i=i.childNodes[c]),i.nodeType==Node.TEXT_NODE&&(i=i.parentNode),i}function u(){if(l.$wp){l.markers.remove();var A,p,D=v(),y=[];for(p=0;p<D.length;p++){if(D[p].startContainer!==l.doc||l.browser.msie){var C=(A=D[p]).collapsed,f=l.markers.place(A,!0,p),c=l.markers.place(A,!1,p);if(void 0!==f&&f||!C||(b(".fr-marker").remove(),l.selection.setAtEnd(l.el)),l.el.normalize(),l.browser.safari&&!C){try{(A=l.doc.createRange()).setStartAfter(f),A.setEndBefore(c),y.push(A)}catch(x){}}}}if(l.browser.safari&&y.length){for(l.selection.clear(),p=0;p<y.length;p++){l.selection.get().addRange(y[p])}}}}function e(){var P,C=l.el.querySelectorAll('.fr-marker[data-type="true"]');if(!l.$wp){return l.markers.remove(),!1}if(0===C.length){return !1}if(l.browser.msie||l.browser.edge){for(P=0;P<C.length;P++){C[P].style.display="inline-block"}}l.core.hasFocus()||l.browser.msie||l.browser.webkit||l.$el.focus(),w();var I=k();for(P=0;P<C.length;P++){var F=b(C[P]).data("id"),H=C[P],L=l.doc.createRange(),T=l.$el.find('.fr-marker[data-type="false"][data-id="'+F+'"]');(l.browser.msie||l.browser.edge)&&T.css("display","inline-block");var D=null;if(0<T.length){T=T[0];try{for(var K,Q=!1,R=H.nextSibling;R&&R.nodeType==Node.TEXT_NODE&&0===R.textContent.length;){R=(K=R).nextSibling,b(K).remove()}for(var O,G,y=T.nextSibling;y&&y.nodeType==Node.TEXT_NODE&&0===y.textContent.length;){y=(K=y).nextSibling,b(K).remove()}if(H.nextSibling==T||T.nextSibling==H){for(var N=H.nextSibling==T?H:T,M=N==H?T:H,J=N.previousSibling;J&&J.nodeType==Node.TEXT_NODE&&0===J.length;){J=(K=J).previousSibling,b(K).remove()}if(J&&J.nodeType==Node.TEXT_NODE){for(;J&&J.previousSibling&&J.previousSibling.nodeType==Node.TEXT_NODE;){J.previousSibling.textContent=J.previousSibling.textContent+J.textContent,J=J.previousSibling,b(J.nextSibling).remove()}}for(var A=M.nextSibling;A&&A.nodeType==Node.TEXT_NODE&&0===A.length;){A=(K=A).nextSibling,b(K).remove()}if(A&&A.nodeType==Node.TEXT_NODE){for(;A&&A.nextSibling&&A.nextSibling.nodeType==Node.TEXT_NODE;){A.nextSibling.textContent=A.textContent+A.nextSibling.textContent,A=A.nextSibling,b(A.previousSibling).remove()}}if(J&&(l.node.isVoid(J)||l.node.isBlock(J))&&(J=null),A&&(l.node.isVoid(A)||l.node.isBlock(A))&&(A=null),J&&A&&J.nodeType==Node.TEXT_NODE&&A.nodeType==Node.TEXT_NODE){b(H).remove(),b(T).remove();var x=J.textContent.length;J.textContent=J.textContent+A.textContent,b(A).remove(),l.opts.htmlUntouched||l.spaces.normalize(J),L.setStart(J,x),L.setEnd(J,x),Q=!0}else{!J&&A&&A.nodeType==Node.TEXT_NODE?(b(H).remove(),b(T).remove(),l.opts.htmlUntouched||l.spaces.normalize(A),D=b(l.doc.createTextNode("\u200b")),b(A).before(D),L.setStart(A,0),L.setEnd(A,0),Q=!0):!A&&J&&J.nodeType==Node.TEXT_NODE&&(b(H).remove(),b(T).remove(),l.opts.htmlUntouched||l.spaces.normalize(J),D=b(l.doc.createTextNode("\u200b")),b(J).after(D),L.setStart(J,J.textContent.length),L.setEnd(J,J.textContent.length),Q=!0)}}if(!Q){(l.browser.chrome||l.browser.edge)&&H.nextSibling==T?(O=j(T,L,!0)||L.setStartAfter(T),G=j(H,L,!1)||L.setEndBefore(H)):(H.previousSibling==T&&(T=(H=T).nextSibling),T.nextSibling&&"BR"===T.nextSibling.tagName||!T.nextSibling&&l.node.isBlock(H.previousSibling)||H.previousSibling&&"BR"==H.previousSibling.tagName||(H.style.display="inline",T.style.display="inline",D=b(l.doc.createTextNode("\u200b"))),O=j(H,L,!0)||b(H).before(D)&&L.setStartBefore(H),G=j(T,L,!1)||b(T).after(D)&&L.setEndAfter(T)),"function"==typeof O&&O(),"function"==typeof G&&G()}}catch(S){console.warn("RESTORE RANGE",S)}}D&&D.remove();try{I.addRange(L)}catch(S){console.warn("ADD RANGE",S)}}l.markers.remove()}function j(s,f,y){var p,x=s.previousSibling,c=s.nextSibling;return x&&c&&x.nodeType==Node.TEXT_NODE&&c.nodeType==Node.TEXT_NODE?(p=x.textContent.length,y?(c.textContent=x.textContent+c.textContent,b(x).remove(),b(s).remove(),l.opts.htmlUntouched||l.spaces.normalize(c),function(){f.setStart(c,p)}):(x.textContent=x.textContent+c.textContent,b(c).remove(),b(s).remove(),l.opts.htmlUntouched||l.spaces.normalize(x),function(){f.setEnd(x,p)})):x&&!c&&x.nodeType==Node.TEXT_NODE?(p=x.textContent.length,y?(l.opts.htmlUntouched||l.spaces.normalize(x),function(){f.setStart(x,p)}):(l.opts.htmlUntouched||l.spaces.normalize(x),function(){f.setEnd(x,p)})):!(!c||x||c.nodeType!=Node.TEXT_NODE)&&(y?(l.opts.htmlUntouched||l.spaces.normalize(c),function(){f.setStart(c,0)}):(l.opts.htmlUntouched||l.spaces.normalize(c),function(){f.setEnd(c,0)}))}function z(){for(var f=v(),c=0;c<f.length;c++){if(!f[c].collapsed){return !1}}return !0}function h(s){var f,y,p=!1,x=!1;if(l.win.getSelection){var c=l.win.getSelection();c.rangeCount&&((y=(f=c.getRangeAt(0)).cloneRange()).selectNodeContents(s),y.setEnd(f.startContainer,f.startOffset),p=""===y.toString(),y.selectNodeContents(s),y.setStart(f.endContainer,f.endOffset),x=""===y.toString())}else{l.doc.selection&&"Control"!=l.doc.selection.type&&((y=(f=l.doc.selection.createRange()).duplicate()).moveToElementText(s),y.setEndPoint("EndToStart",f),p=""===y.text,y.moveToElementText(s),y.setEndPoint("StartToEnd",f),x=""===y.text)}return{atStart:p,atEnd:x}}function n(i,c){void 0===c&&(c=!0);var s=b(i).html();s&&s.replace(/\u200b/g,"").length!=s.length&&b(i).html(s.replace(/\u200b/g,""));for(var f=l.node.contents(i),p=0;p<f.length;p++){f[p].nodeType!=Node.ELEMENT_NODE?b(f[p]).remove():(n(f[p],0===p),0===p&&(c=!1))}i.nodeType==Node.TEXT_NODE?b(i).replaceWith('<span data-first="true" data-text="true"></span>'):c&&b(i).attr("data-first",!0)}function q(){return 0===b(this).find("fr-inner").length}function g(){try{if(!l.$wp){return !1}for(var f=v(0).commonAncestorContainer;f&&!l.node.isElement(f);){f=f.parentNode}return !!l.node.isElement(f)}catch(c){return !1}}function d(f,c){if(!f||0<f.getElementsByClassName("fr-marker").length){return !1}for(var i=f.firstChild;i&&(l.node.isBlock(i)||c&&!l.node.isVoid(i)&&i.nodeType==Node.ELEMENT_NODE);){i=(f=i).firstChild}f.innerHTML=b.FE.MARKERS+f.innerHTML}function m(i,c){if(!i||0<i.getElementsByClassName("fr-marker").length){return !1}for(var s=i.lastChild;s&&(l.node.isBlock(s)||c&&!l.node.isVoid(s)&&s.nodeType==Node.ELEMENT_NODE);){s=(i=s).lastChild}var f=l.doc.createElement("SPAN");f.setAttribute("id","fr-sel-markers"),f.innerHTML=b.FE.MARKERS,i.appendChild(f);var p=i.querySelector("#fr-sel-markers");p.outerHTML=p.innerHTML}return{text:B,get:k,ranges:v,clear:w,element:function(){var x=k();try{if(x.rangeCount){var p,A=v(0),s=A.startContainer;if(s.nodeType==Node.TEXT_NODE&&A.startOffset==(s.textContent||"").length&&s.nextSibling&&(s=s.nextSibling),s.nodeType==Node.ELEMENT_NODE){var y=!1;if(0<s.childNodes.length&&s.childNodes[A.startOffset]){for(p=s.childNodes[A.startOffset];p&&p.nodeType==Node.TEXT_NODE&&0===p.textContent.length;){p=p.nextSibling}if(p&&p.textContent.replace(/\u200B/g,"")===B().replace(/\u200B/g,"")&&(s=p,y=!0),!y&&1<s.childNodes.length&&0<A.startOffset&&s.childNodes[A.startOffset-1]){for(p=s.childNodes[A.startOffset-1];p&&p.nodeType==Node.TEXT_NODE&&0===p.textContent.length;){p=p.nextSibling}p&&p.textContent.replace(/\u200B/g,"")===B().replace(/\u200B/g,"")&&(s=p,y=!0)}}else{!A.collapsed&&s.nextSibling&&s.nextSibling.nodeType==Node.ELEMENT_NODE&&(p=s.nextSibling)&&p.textContent.replace(/\u200B/g,"")===B().replace(/\u200B/g,"")&&(s=p,y=!0)}!y&&0<s.childNodes.length&&b(s.childNodes[0]).text().replace(/\u200B/g,"")===B().replace(/\u200B/g,"")&&["BR","IMG","HR"].indexOf(s.childNodes[0].tagName)<0&&(s=s.childNodes[0])}for(;s.nodeType!=Node.ELEMENT_NODE&&s.parentNode;){s=s.parentNode}for(var f=s;f&&"HTML"!=f.tagName;){if(f==l.el){return s}f=b(f).parent()[0]}}}catch(c){}return l.el},endElement:function(){var x=k();try{if(x.rangeCount){var p,A=v(0),s=A.endContainer;if(s.nodeType==Node.ELEMENT_NODE){var y=!1;0<s.childNodes.length&&s.childNodes[A.endOffset]&&b(s.childNodes[A.endOffset]).text()===B()?(s=s.childNodes[A.endOffset],y=!0):!A.collapsed&&s.previousSibling&&s.previousSibling.nodeType==Node.ELEMENT_NODE?(p=s.previousSibling)&&p.textContent.replace(/\u200B/g,"")===B().replace(/\u200B/g,"")&&(s=p,y=!0):!A.collapsed&&0<s.childNodes.length&&s.childNodes[A.endOffset]&&(p=s.childNodes[A.endOffset].previousSibling).nodeType==Node.ELEMENT_NODE&&p&&p.textContent.replace(/\u200B/g,"")===B().replace(/\u200B/g,"")&&(s=p,y=!0),!y&&0<s.childNodes.length&&b(s.childNodes[s.childNodes.length-1]).text()===B()&&["BR","IMG","HR"].indexOf(s.childNodes[s.childNodes.length-1].tagName)<0&&(s=s.childNodes[s.childNodes.length-1])}for(s.nodeType==Node.TEXT_NODE&&0===A.endOffset&&s.previousSibling&&s.previousSibling.nodeType==Node.ELEMENT_NODE&&(s=s.previousSibling);s.nodeType!=Node.ELEMENT_NODE&&s.parentNode;){s=s.parentNode}for(var f=s;f&&"HTML"!=f.tagName;){if(f==l.el){return s}f=b(f).parent()[0]}}}catch(c){}return l.el},save:u,restore:e,isCollapsed:z,isFull:function(){if(z()){return !1}l.selection.save();var i,c=l.el.querySelectorAll("td, th, img, br");for(i=0;i<c.length;i++){c[i].nextSibling&&(c[i].innerHTML='<span class="fr-mk">'+b.FE.INVISIBLE_SPACE+"</span>"+c[i].innerHTML)}var o=!1,f=h(l.el);for(f.atStart&&f.atEnd&&(o=!0),c=l.el.querySelectorAll(".fr-mk"),i=0;i<c.length;i++){c[i].parentNode.removeChild(c[i])}return l.selection.restore(),o},inEditor:g,remove:function(){if(z()){return !0}var C;u();var I=function(f){for(var c=f.previousSibling;c&&c.nodeType==Node.TEXT_NODE&&0===c.textContent.length;){var i=c;c=c.previousSibling,b(i).remove()}return c},F=function(f){for(var c=f.nextSibling;c&&c.nodeType==Node.TEXT_NODE&&0===c.textContent.length;){var i=c;c=c.nextSibling,b(i).remove()}return c},H=l.$el.find('.fr-marker[data-type="true"]');for(C=0;C<H.length;C++){for(var L=H[C];!(I(L)||l.node.isBlock(L.parentNode)||l.$el.is(L.parentNode)||l.node.hasClass(L.parentNode,"fr-inner"));){b(L.parentNode).before(L)}}var T=l.$el.find('.fr-marker[data-type="false"]');for(C=0;C<T.length;C++){for(var D=T[C];!(F(D)||l.node.isBlock(D.parentNode)||l.$el.is(D.parentNode)||l.node.hasClass(D.parentNode,"fr-inner"));){b(D.parentNode).after(D)}D.parentNode&&l.node.isBlock(D.parentNode)&&l.node.isEmpty(D.parentNode)&&!l.$el.is(D.parentNode)&&!l.node.hasClass(D.parentNode,"fr-inner")&&l.opts.keepFormatOnDelete&&b(D.parentNode).after(D)}if(function(){for(var f=l.$el.find(".fr-marker"),c=0;c<f.length;c++){if(b(f[c]).parentsUntil('.fr-element, [contenteditable="true"]','[contenteditable="false"]').length){return !1}}return !0}()){!function P(f,E){var p=l.node.contents(f.get(0));0<=["TD","TH"].indexOf(f.get(0).tagName)&&1==f.find(".fr-marker").length&&l.node.hasClass(p[0],"fr-marker")&&f.attr("data-del-cell",!0);for(var s=0;s<p.length;s++){var c=p[s];l.node.hasClass(c,"fr-marker")?E=(E+1)%2:E?0<b(c).find(".fr-marker").length?E=P(b(c),E):["TD","TH"].indexOf(c.tagName)<0&&!l.node.hasClass(c,"fr-inner")?!l.opts.keepFormatOnDelete||0<l.$el.find("[data-first]").length||l.node.isVoid(c)?b(c).remove():n(c):l.node.hasClass(c,"fr-inner")?0===b(c).find(".fr-inner").length?b(c).html("<br>"):b(c).find(".fr-inner").filter(q).html("<br>"):(b(c).empty(),b(c).attr("data-del-cell",!0)):0<b(c).find(".fr-marker").length&&(E=P(b(c),E))}return E}(l.$el,0);var K=l.$el.find('[data-first="true"]');if(K.length){l.$el.find(".fr-marker").remove(),K.append(b.FE.INVISIBLE_SPACE+b.FE.MARKERS).removeAttr("data-first"),K.attr("data-text")&&K.replaceWith(K.html())}else{for(l.$el.find("table").filter(function(){return 0<b(this).find("[data-del-cell]").length&&b(this).find("[data-del-cell]").length==b(this).find("td, th").length}).remove(),l.$el.find("[data-del-cell]").removeAttr("data-del-cell"),H=l.$el.find('.fr-marker[data-type="true"]'),C=0;C<H.length;C++){var Q=H[C],R=Q.nextSibling,O=l.$el.find('.fr-marker[data-type="false"][data-id="'+b(Q).data("id")+'"]').get(0);if(O){if(Q&&(!R||R!=O)){var G=l.node.blockParent(Q),y=l.node.blockParent(O),N=!1,M=!1;if(G&&0<=["UL","OL"].indexOf(G.tagName)&&(N=!(G=null)),y&&0<=["UL","OL"].indexOf(y.tagName)&&(M=!(y=null)),b(Q).after(O),G!=y){if(null!=G||N){if(null!=y||M||0!==b(G).parentsUntil(l.$el,"table").length){G&&y&&0===b(G).parentsUntil(l.$el,"table").length&&0===b(y).parentsUntil(l.$el,"table").length&&0===b(G).find(y).length&&0===b(y).find(G).length&&(b(G).append(b(y).html()),b(y).remove())}else{for(R=G;!R.nextSibling&&R.parentNode!=l.el;){R=R.parentNode}for(R=R.nextSibling;R&&"BR"!=R.tagName;){var J=R.nextSibling;b(G).append(R),R=J}R&&"BR"==R.tagName&&b(R).remove()}}else{var A=l.node.deepestParent(Q);A?(b(A).after(b(y).html()),b(y).remove()):0===b(y).parentsUntil(l.$el,"table").length&&(b(Q).next().after(b(y).html()),b(y).remove())}}}}else{O=b(Q).clone().attr("data-type",!1),b(Q).after(O)}}}}l.$el.find("li:empty").remove(),l.opts.keepFormatOnDelete||l.html.fillEmptyBlocks(),l.html.cleanEmptyTags(!0),l.opts.htmlUntouched||(l.clean.lists(),l.$el.find("li:empty").append("<br>"),l.spaces.normalize());var x=l.$el.find(".fr-marker:last").get(0),S=l.$el.find(".fr-marker:first").get(0);void 0!==x&&void 0!==S&&!x.nextSibling&&S.previousSibling&&"BR"==S.previousSibling.tagName&&l.node.isElement(x.parentNode)&&l.node.isElement(S.parentNode)&&l.$el.append("<br>"),e()},blocks:function(){var A,E=[],p=k();if(g()&&p.rangeCount){var c=v();for(A=0;A<c.length;A++){var f,y=c[A],D=t(y.startContainer,y.startOffset),F=t(y.endContainer,y.endOffset);(l.node.isBlock(D)||l.node.hasClass(D,"fr-inner"))&&E.indexOf(D)<0&&E.push(D),(f=l.node.blockParent(D))&&E.indexOf(f)<0&&E.push(f);for(var x=[],C=D;C!==F&&C!==l.el;){x.indexOf(C)<0&&C.children&&C.children.length?(x.push(C),C=C.children[0]):C.nextSibling?C=C.nextSibling:C.parentNode&&(C=C.parentNode,x.push(C)),l.node.isBlock(C)&&x.indexOf(C)<0&&E.indexOf(C)<0&&(C!==F||0<y.endOffset)&&E.push(C)}l.node.isBlock(F)&&E.indexOf(F)<0&&0<y.endOffset&&E.push(F),(f=l.node.blockParent(F))&&E.indexOf(f)<0&&E.push(f)}}for(A=E.length-1;0<A;A--){b(E[A]).find(E).length&&E.splice(A,1)}return E},info:h,setAtEnd:m,setAtStart:d,setBefore:function(f,c){void 0===c&&(c=!0);for(var i=f.previousSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.length;){i=i.previousSibling}return i?(l.node.isBlock(i)?m(i):"BR"==i.tagName?b(i).before(b.FE.MARKERS):b(i).after(b.FE.MARKERS),!0):!!c&&(l.node.isBlock(f)?d(f):b(f).before(b.FE.MARKERS),!0)},setAfter:function(f,c){void 0===c&&(c=!0);for(var i=f.nextSibling;i&&i.nodeType==Node.TEXT_NODE&&0===i.textContent.length;){i=i.nextSibling}return i?(l.node.isBlock(i)?d(i):b(i).before(b.FE.MARKERS),!0):!!c&&(l.node.isBlock(f)?m(f):b(f).after(b.FE.MARKERS),!0)},rangeElement:t}},b.extend(b.FE.DEFAULTS,{htmlAllowedTags:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","queue","rp","rt","ruby","s","samp","script","style","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"],htmlRemoveTags:["script","style"],htmlAllowedAttrs:["accept","accept-charset","accesskey","action","align","allowfullscreen","allowtransparency","alt","async","autocomplete","autofocus","autoplay","autosave","background","bgcolor","border","charset","cellpadding","cellspacing","checked","cite","class","color","cols","colspan","content","contenteditable","contextmenu","controls","coords","data","data-.*","datetime","default","defer","dir","dirname","disabled","download","draggable","dropzone","enctype","for","form","formaction","frameborder","headers","height","hidden","high","href","hreflang","http-equiv","icon","id","ismap","itemprop","keytype","kind","label","lang","language","list","loop","low","max","maxlength","media","method","min","mozallowfullscreen","multiple","muted","name","novalidate","open","optimum","pattern","ping","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","reversed","rows","rowspan","sandbox","scope","scoped","scrolling","seamless","selected","shape","size","sizes","span","src","srcdoc","srclang","srcset","start","step","summary","spellcheck","style","tabindex","target","title","type","translate","usemap","value","valign","webkitallowfullscreen","width","wrap"],htmlAllowedStyleProps:[".*"],htmlAllowComments:!0,htmlUntouched:!1,fullPage:!1}),b.FE.HTML5Map={B:"STRONG",I:"EM",STRIKE:"S"},b.FE.MODULES.clean=function(w){var r,e,z,q;function i(f){if(f.nodeType==Node.ELEMENT_NODE&&f.getAttribute("class")&&0<=f.getAttribute("class").indexOf("fr-marker")){return !1}var c,g=w.node.contents(f),d=[];for(c=0;c<g.length;c++){g[c].nodeType!=Node.ELEMENT_NODE||w.node.isVoid(g[c])?g[c].nodeType==Node.TEXT_NODE&&(g[c].textContent=g[c].textContent.replace(/\u200b/g,"")):g[c].textContent.replace(/\u200b/g,"").length!=g[c].textContent.length&&i(g[c])}if(f.nodeType==Node.ELEMENT_NODE&&!w.node.isVoid(f)&&(f.normalize(),g=w.node.contents(f),d=f.querySelectorAll(".fr-marker"),g.length-d.length==0)){for(c=0;c<g.length;c++){if(g[c].nodeType==Node.ELEMENT_NODE&&(g[c].getAttribute("class")||"").indexOf("fr-marker")<0){return !1}}for(c=0;c<d.length;c++){f.parentNode.insertBefore(d[c].cloneNode(!0),f)}return f.parentNode.removeChild(f),!1}}function B(h,f){if(h.nodeType==Node.COMMENT_NODE){return"\x3c!--"+h.nodeValue+"--\x3e"}if(h.nodeType==Node.TEXT_NODE){return f?h.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):h.textContent.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00A0/g,"&nbsp;").replace(/\u0009/g,"")}if(h.nodeType!=Node.ELEMENT_NODE){return h.outerHTML}if(h.nodeType==Node.ELEMENT_NODE&&0<=["STYLE","SCRIPT","NOSCRIPT"].indexOf(h.tagName)){return h.outerHTML}if(h.nodeType==Node.ELEMENT_NODE&&"svg"==h.tagName){var m=document.createElement("div"),g=h.cloneNode(!0);return m.appendChild(g),m.innerHTML}if("IFRAME"==h.tagName){return h.outerHTML.replace(/\&lt;/g,"<").replace(/\&gt;/g,">")}var l=h.childNodes;if(0===l.length){return h.outerHTML}for(var d="",c=0;c<l.length;c++){"PRE"==h.tagName&&(f=!0),d+=B(l[c],f)}return w.node.openTagString(h)+d+w.node.closeTagString(h)}var x=[];function n(d){var c=d.replace(/;;/gi,";");return";"!=(c=c.replace(/^;/gi,"")).charAt(c.length)&&(c+=";"),c}function k(h){var f;for(f in h){if(h.hasOwnProperty(f)){var m=f.match(z),g=null;"style"==f&&w.opts.htmlAllowedStyleProps.length&&(g=h[f].match(q)),m&&g?h[f]=n(g.join(";")):m&&("style"!=f||g)||delete h[f]}}for(var l="",d=Object.keys(h).sort(),c=0;c<d.length;c++){h[f=d[c]].indexOf('"')<0?l+=" "+f+'="'+h[f]+'"':l+=" "+f+"='"+h[f]+"'"}return l}function t(g,d){var l,f=document.implementation.createHTMLDocument("Froala DOC").createElement("DIV");b(f).append(g);var h="";if(f){var c=w.node.contents(f);for(l=0;l<c.length;l++){d(c[l])}for(c=w.node.contents(f),l=0;l<c.length;l++){h+=B(c[l])}}return h}function j(g,d,l){x=[];var f=g=g.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,function(m){return x.push(m),"[FROALA.EDITOR.SCRIPT "+(x.length-1)+"]"}).replace(/<noscript\b[^<]*(?:(?!<\/noscript>)<[^<]*)*<\/noscript>/gi,function(m){return x.push(m),"[FROALA.EDITOR.NOSCRIPT "+(x.length-1)+"]"}).replace(/<meta((?:[\w\W]*?)) http-equiv="/g,'<meta$1 data-fr-http-equiv="').replace(/<img((?:[\w\W]*?)) src="/g,'<img$1 data-fr-src="'),h=null;w.opts.fullPage&&(f=w.html.extractNode(g,"body")||(0<=g.indexOf("<body")?"":g),l&&(h=w.html.extractNode(g,"head")||"")),f=t(f,d),h&&(h=t(h,d));var c=function(s,m,v){if(w.opts.fullPage){var p=w.html.extractDoctype(v),u=k(w.html.extractNodeAttrs(v,"html"));return m=null==m?w.html.extractNode(v,"head")||"<title></title>":m,p+"<html"+u+"><head"+k(w.html.extractNodeAttrs(v,"head"))+">"+m+"</head><body"+k(w.html.extractNodeAttrs(v,"body"))+">"+s+"</body></html>"}return s}(f,h,g);return c.replace(/\[FROALA\.EDITOR\.SCRIPT ([\d]*)\]/gi,function(o,m){return 0<=w.opts.htmlRemoveTags.indexOf("script")?"":x[parseInt(m,10)]}).replace(/\[FROALA\.EDITOR\.NOSCRIPT ([\d]*)\]/gi,function(o,m){return 0<=w.opts.htmlRemoveTags.indexOf("noscript")?"":x[parseInt(m,10)].replace(/\&lt;/g,"<").replace(/\&gt;/g,">")}).replace(/<img((?:[\w\W]*?)) data-fr-src="/g,'<img$1 src="')}function A(d){var c=w.doc.createElement("DIV");return c.innerText=d,c.textContent}function y(d){for(var c=w.node.contents(d),f=0;f<c.length;f++){c[f].nodeType!=Node.TEXT_NODE&&y(c[f])}!function(v){if("SPAN"==v.tagName&&0<=(v.getAttribute("class")||"").indexOf("fr-marker")){return}var E,m;if("PRE"==v.tagName&&0<=(m=(E=v).innerHTML).indexOf("\n")&&(E.innerHTML=m.replace(/\n/g,"<br>")),v.nodeType==Node.ELEMENT_NODE&&(v.getAttribute("data-fr-src")&&0!==v.getAttribute("data-fr-src").indexOf("blob:")&&v.setAttribute("data-fr-src",w.helpers.sanitizeURL(A(v.getAttribute("data-fr-src")))),v.getAttribute("href")&&v.setAttribute("href",w.helpers.sanitizeURL(A(v.getAttribute("href")))),v.getAttribute("src")&&v.setAttribute("src",w.helpers.sanitizeURL(A(v.getAttribute("src")))),0<=["TABLE","TBODY","TFOOT","TR"].indexOf(v.tagName)&&(v.innerHTML=v.innerHTML.trim())),!w.opts.pasteAllowLocalImages&&v.nodeType==Node.ELEMENT_NODE&&"IMG"==v.tagName&&v.getAttribute("data-fr-src")&&0===v.getAttribute("data-fr-src").indexOf("file://")){return v.parentNode.removeChild(v)}if(v.nodeType==Node.ELEMENT_NODE&&b.FE.HTML5Map[v.tagName]&&""===w.node.attributes(v)){var g=b.FE.HTML5Map[v.tagName],h="<"+g+">"+v.innerHTML+"</"+g+">";v.insertAdjacentHTML("beforebegin",h),(v=v.previousSibling).parentNode.removeChild(v.nextSibling)}if(w.opts.htmlAllowComments||v.nodeType!=Node.COMMENT_NODE){if(v.tagName&&v.tagName.match(e)){v.parentNode.removeChild(v)}else{if(v.tagName&&!v.tagName.match(r)){"svg"===v.tagName?v.parentNode.removeChild(v):w.browser.safari&&"path"==v.tagName&&v.parentNode&&"svg"==v.parentNode.tagName||(v.outerHTML=v.innerHTML)}else{var u=v.attributes;if(u){for(var D=u.length-1;0<=D;D--){var F=u[D],p=F.nodeName.match(z),C=null;"style"==F.nodeName&&w.opts.htmlAllowedStyleProps.length&&(C=F.value.match(q)),p&&C?F.value=n(C.join(";")):p&&("style"!=F.nodeName||C)||v.removeAttribute(F.nodeName)}}}}}else{0!==v.data.indexOf("[FROALA.EDITOR")&&v.parentNode.removeChild(v)}}(d)}return{_init:function(){w.opts.fullPage&&b.merge(w.opts.htmlAllowedTags,["head","title","style","link","base","body","html","meta"])},html:function(h,f,m,g){void 0===f&&(f=[]),void 0===m&&(m=[]),void 0===g&&(g=!1);var l,d=b.merge([],w.opts.htmlAllowedTags);for(l=0;l<f.length;l++){0<=d.indexOf(f[l])&&d.splice(d.indexOf(f[l]),1)}var c=b.merge([],w.opts.htmlAllowedAttrs);for(l=0;l<m.length;l++){0<=c.indexOf(m[l])&&c.splice(c.indexOf(m[l]),1)}return c.push("data-fr-.*"),c.push("fr-.*"),r=new RegExp("^"+d.join("$|^")+"$","gi"),z=new RegExp("^"+c.join("$|^")+"$","gi"),e=new RegExp("^"+w.opts.htmlRemoveTags.join("$|^")+"$","gi"),q=w.opts.htmlAllowedStyleProps.length?new RegExp("((^|;|\\s)"+w.opts.htmlAllowedStyleProps.join(":.+?(?=;|$))|((^|;|\\s)")+":.+?(?=(;)|$))","gi"):null,h=j(h,y,!0)},toHTML5:function(){var d=w.el.querySelectorAll(Object.keys(b.FE.HTML5Map).join(","));if(d.length){var c=!1;w.el.querySelector(".fr-marker")||(w.selection.save(),c=!0);for(var f=0;f<d.length;f++){""===w.node.attributes(d[f])&&b(d[f]).replaceWith("<"+b.FE.HTML5Map[d[f].tagName]+">"+d[f].innerHTML+"</"+b.FE.HTML5Map[d[f].tagName]+">")}c&&w.selection.restore()}},tables:function(){!function(){for(var h=w.el.querySelectorAll("tr"),f=0;f<h.length;f++){for(var m=h[f].children,g=!0,l=0;l<m.length;l++){if("TH"!=m[l].tagName){g=!1;break}}if(!1!==g&&0!==m.length){for(var d=h[f];d&&"TABLE"!=d.tagName&&"THEAD"!=d.tagName;){d=d.parentNode}var c=d;"THEAD"!=c.tagName&&(c=w.doc.createElement("THEAD"),d.insertBefore(c,d.firstChild)),c.appendChild(h[f])}}}()},lists:function(){!function(){var h,f=[];do{if(f.length){var m=f[0],g=w.doc.createElement("ul");m.parentNode.insertBefore(g,m);do{var l=m;m=m.nextSibling,g.appendChild(l)}while(m&&"LI"==m.tagName)}f=[];for(var d=w.el.querySelectorAll("li"),c=0;c<d.length;c++){h=d[c],w.node.isList(h.parentNode)||f.push(d[c])}}while(0<f.length)}(),function(){for(var f=w.el.querySelectorAll("ol + ol, ul + ul"),c=0;c<f.length;c++){var h=f[c];if(w.node.isList(h.previousSibling)&&w.node.openTagString(h)==w.node.openTagString(h.previousSibling)){for(var d=w.node.contents(h),g=0;g<d.length;g++){h.previousSibling.appendChild(d[g])}h.parentNode.removeChild(h)}}}(),function(){for(var f=w.el.querySelectorAll("ul, ol"),c=0;c<f.length;c++){for(var h=w.node.contents(f[c]),d=null,g=h.length-1;0<=g;g--){"LI"!=h[g].tagName?(d||(d=b("<li>")).insertBefore(h[g]),d.prepend(h[g])):d=null}}}(),function(){var f,c,h;do{c=!1;var d=w.el.querySelectorAll("li:empty");for(f=0;f<d.length;f++){d[f].parentNode.removeChild(d[f])}var g=w.el.querySelectorAll("ul, ol");for(f=0;f<g.length;f++){(h=g[f]).querySelector("LI")||(c=!0,h.parentNode.removeChild(h))}}while(!0===c)}(),function(){for(var f=w.el.querySelectorAll("ul > ul, ol > ol, ul > ol, ol > ul"),c=0;c<f.length;c++){var g=f[c],d=g.previousSibling;d&&("LI"==d.tagName?d.appendChild(g):b(g).wrap("<li></li>"))}}(),function(){for(var g=w.el.querySelectorAll("li > ul, li > ol"),d=0;d<g.length;d++){var l=g[d];if(l.nextSibling){var f=l.nextSibling,h=b("<li>");b(l.parentNode).after(h);do{var c=f;f=f.nextSibling,h.append(c)}while(f)}}}(),function(){for(var f=w.el.querySelectorAll("li > ul, li > ol"),c=0;c<f.length;c++){var g=f[c];if(w.node.isFirstSibling(g)){b(g).before("<br/>")}else{if(g.previousSibling&&"BR"==g.previousSibling.tagName){for(var d=g.previousSibling.previousSibling;d&&w.node.hasClass(d,"fr-marker");){d=d.previousSibling}d&&"BR"!=d.tagName&&b(g.previousSibling).remove()}}}}(),function(){for(var d=w.el.querySelectorAll("li:empty"),c=0;c<d.length;c++){b(d[c]).remove()}}()},invisibleSpaces:function(c){return c.replace(/\u200b/g,"").length==c.length?c:w.clean.exec(c,i)},exec:j}},b.FE.MODULES.spaces=function(c){function e(l,h){var p=l.previousSibling,k=l.nextSibling,m=l.textContent,g=l.parentNode;if(!c.html.isPreformatted(g)){h&&(m=m.replace(/[\f\n\r\t\v ]{2,}/g," "),k&&"BR"!==k.tagName&&!c.node.isBlock(k)||!(c.node.isBlock(g)||c.node.isLink(g)&&!g.nextSibling||c.node.isElement(g))||(m=m.replace(/[\f\n\r\t\v ]{1,}$/g,"")),p&&"BR"!==p.tagName&&!c.node.isBlock(p)||!(c.node.isBlock(g)||c.node.isLink(g)&&!g.previousSibling||c.node.isElement(g))||(m=m.replace(/^[\f\n\r\t\v ]{1,}/g,""))," "===m&&(p&&c.node.isVoid(p)||k&&c.node.isVoid(k))&&(m="")),(!p&&c.node.isBlock(k)||!k&&c.node.isBlock(p))&&c.node.isBlock(g)&&(m=m.replace(/^[\f\n\r\t\v ]{1,}/g,"")),h||(m=m.replace(new RegExp(b.FE.UNICODE_NBSP,"g")," "));for(var d="",j=0;j<m.length;j++){32!=m.charCodeAt(j)||0!==j&&32!=d.charCodeAt(j-1)?d+=m[j]:d+=b.FE.UNICODE_NBSP}(!k||k&&c.node.isBlock(k)||k&&k.nodeType==Node.ELEMENT_NODE&&c.win.getComputedStyle(k)&&"block"==c.win.getComputedStyle(k).display)&&(d=d.replace(/ $/,b.FE.UNICODE_NBSP)),!p||c.node.isVoid(p)||c.node.isBlock(p)||1!==(d=d.replace(/^\u00A0([^ $])/," $1")).length||160!==d.charCodeAt(0)||!k||c.node.isVoid(k)||c.node.isBlock(k)||(d=" "),h||(d=d.replace(/([^ \u00A0])\u00A0([^ \u00A0])/g,"$1 $2")),l.textContent!=d&&(l.textContent=d)}}function f(g,d){if(void 0!==g&&g||(g=c.el),void 0===d&&(d=!1),!g.getAttribute||"false"!=g.getAttribute("contenteditable")){if(g.nodeType==Node.TEXT_NODE){e(g,d)}else{if(g.nodeType==Node.ELEMENT_NODE){for(var h=c.doc.createTreeWalker(g,NodeFilter.SHOW_TEXT,c.node.filter(function(j){for(var i=j.parentNode;i&&i!==c.el;){if("STYLE"==i.tagName||"IFRAME"==i.tagName){return !1}if("PRE"===i.tagName){return !1}i=i.parentNode}return null!=j.textContent.match(/([ \u00A0\f\n\r\t\v]{2,})|(^[ \u00A0\f\n\r\t\v]{1,})|([ \u00A0\f\n\r\t\v]{1,}$)/g)&&!c.node.hasClass(j.parentNode,"fr-marker")}),!1);h.nextNode();){e(h.currentNode,d)}}}}}return{normalize:f,normalizeAroundCursor:function(){for(var l=[],h=c.el.querySelectorAll(".fr-marker"),p=0;p<h.length;p++){for(var k=null,m=c.node.blockParent(h[p]),g=(k=m||h[p]).nextSibling,d=k.previousSibling;g&&"BR"==g.tagName;){g=g.nextSibling}for(;d&&"BR"==d.tagName;){d=d.previousSibling}k&&l.indexOf(k)<0&&l.push(k),d&&l.indexOf(d)<0&&l.push(d),g&&l.indexOf(g)<0&&l.push(g)}for(var j=0;j<l.length;j++){f(l[j])}}}},b.FE.UNICODE_NBSP=String.fromCharCode(160),b.FE.VOID_ELEMENTS=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],b.FE.BLOCK_TAGS=["address","article","aside","audio","blockquote","canvas","details","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tbody","td","tfoot","th","thead","tr","ul","video"],b.extend(b.FE.DEFAULTS,{htmlAllowedEmptyTags:["textarea","a","iframe","object","video","style","script",".fa",".fr-emoticon",".fr-inner","path","line"],htmlDoNotWrapTags:["script","style"],htmlSimpleAmpersand:!1,htmlIgnoreCSSProperties:[],htmlExecuteScripts:!0}),b.FE.MODULES.html=function(j){function V(){return j.opts.enter==b.FE.ENTER_P?"p":j.opts.enter==b.FE.ENTER_DIV?"div":j.opts.enter==b.FE.ENTER_BR?null:void 0}function G(d,c){return !(!d||d===j.el)&&(c?-1!=["PRE","SCRIPT","STYLE"].indexOf(d.tagName)||G(d.parentNode,c):-1!=["PRE","SCRIPT","STYLE"].indexOf(d.tagName))}function P(v){var F,k=[],g=[];if(v){var h=j.el.querySelectorAll(".fr-marker");for(F=0;F<h.length;F++){var p=j.node.blockParent(h[F])||h[F];if(p){var E=p.nextSibling,O=p.previousSibling;p&&g.indexOf(p)<0&&j.node.isBlock(p)&&g.push(p),O&&j.node.isBlock(O)&&g.indexOf(O)<0&&g.push(O),E&&j.node.isBlock(E)&&g.indexOf(E)<0&&g.push(E)}}}else{g=j.el.querySelectorAll(I())}var m=I();for(m+=","+b.FE.VOID_ELEMENTS.join(","),m+=", .fr-inner",m+=","+j.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)",F=g.length-1;0<=F;F--){if(!(g[F].textContent&&0<g[F].textContent.replace(/\u200B|\n/g,"").length||0<g[F].querySelectorAll(m).length)){for(var w=j.node.contents(g[F]),D=!1,u=0;u<w.length;u++){if(w[u].nodeType!=Node.COMMENT_NODE&&w[u].textContent&&0<w[u].textContent.replace(/\u200B|\n/g,"").length){D=!0;break}}D||k.push(g[F])}}return k}function I(){return b.FE.BLOCK_TAGS.join(", ")}function T(f){var c,h,d=b.merge([],b.FE.VOID_ELEMENTS);d=b.merge(d,j.opts.htmlAllowedEmptyTags),d=void 0===f?b.merge(d,b.FE.BLOCK_TAGS):b.merge(d,b.FE.NO_DELETE_TAGS),c=j.el.querySelectorAll("*:empty:not("+d.join("):not(")+"):not(.fr-marker)");do{h=!1;for(var g=0;g<c.length;g++){0!==c[g].attributes.length&&void 0===c[g].getAttribute("href")||(c[g].parentNode.removeChild(c[g]),h=!0)}c=j.el.querySelectorAll("*:empty:not("+d.join("):not(")+"):not(.fr-marker)")}while(c.length&&h)}function W(m,v){var g=V();if(v&&(g="div"),g){for(var c=j.doc.createDocumentFragment(),f=null,k=!1,u=m.firstChild,w=!1;u;){var h=u.nextSibling;if(u.nodeType==Node.ELEMENT_NODE&&(j.node.isBlock(u)||0<=j.opts.htmlDoNotWrapTags.indexOf(u.tagName.toLowerCase())&&!j.node.hasClass(u,"fr-marker"))){f=null,c.appendChild(u.cloneNode(!0))}else{if(u.nodeType!=Node.ELEMENT_NODE&&u.nodeType!=Node.TEXT_NODE){f=null,c.appendChild(u.cloneNode(!0))}else{if("BR"==u.tagName){null==f?(f=j.doc.createElement(g),w=!0,v&&(f.setAttribute("class","fr-temp-div"),f.setAttribute("data-empty",!0)),f.appendChild(u.cloneNode(!0)),c.appendChild(f)):!1===k&&(f.appendChild(j.doc.createElement("br")),v&&(f.setAttribute("class","fr-temp-div"),f.setAttribute("data-empty",!0))),f=null}else{var p=u.textContent;(u.nodeType!==Node.TEXT_NODE||0<p.replace(/\n/g,"").replace(/(^ *)|( *$)/g,"").length||p.length&&p.indexOf("\n")<0)&&(null==f&&(f=j.doc.createElement(g),w=!0,v&&f.setAttribute("class","fr-temp-div"),c.appendChild(f),k=!1),f.appendChild(u.cloneNode(!0)),k||j.node.hasClass(u,"fr-marker")||u.nodeType==Node.TEXT_NODE&&0===p.replace(/ /g,"").length||(k=!0))}}}u=h}w&&(m.innerHTML="",m.appendChild(c))}}function M(d,c){for(var f=d.length-1;0<=f;f--){W(d[f],c)}}function B(g,d,k,f,h){if(!j.$wp){return !1}void 0===g&&(g=!1),void 0===d&&(d=!1),void 0===k&&(k=!1),void 0===f&&(f=!1),void 0===h&&(h=!1);var c=j.$wp.scrollTop();W(j.el,g),f&&M(j.el.querySelectorAll(".fr-inner"),g),d&&M(j.el.querySelectorAll("td, th"),g),k&&M(j.el.querySelectorAll("blockquote"),g),h&&M(j.el.querySelectorAll("li"),g),c!=j.$wp.scrollTop()&&j.$wp.scrollTop(c)}function K(h){if(void 0===h&&(h=j.el),h&&0<=["SCRIPT","STYLE","PRE"].indexOf(h.tagName)){return !1}for(var f=j.doc.createTreeWalker(h,NodeFilter.SHOW_TEXT,j.node.filter(function(i){return null!=i.textContent.match(/([ \n]{2,})|(^[ \n]{1,})|([ \n]{1,}$)/g)}),!1);f.nextNode();){var l=f.currentNode;if(!G(l.parentNode,!0)){var g=j.node.isBlock(l.parentNode)||j.node.isElement(l.parentNode),k=l.textContent.replace(/(?!^)( ){2,}(?!$)/g," ").replace(/\n/g," ").replace(/^[ ]{2,}/g," ").replace(/[ ]{2,}$/g," ");if(g){var d=l.previousSibling,c=l.nextSibling;d&&c&&" "==k?k=j.node.isBlock(d)&&j.node.isBlock(c)?"":" ":(d||(k=k.replace(/^ */,"")),c||(k=k.replace(/ *$/,"")))}l.textContent=k}}}function H(f,c,g){var d=new RegExp(c,"gi").exec(f);return d?d[g]:null}function q(d){var c=d.doctype,f="<!DOCTYPE html>";return c&&(f="<!DOCTYPE "+c.name+(c.publicId?' PUBLIC "'+c.publicId+'"':"")+(!c.publicId&&c.systemId?" SYSTEM":"")+(c.systemId?' "'+c.systemId+'"':"")+">"),f}function U(f){var c=f.parentNode;if(c&&(j.node.isBlock(c)||j.node.isElement(c))&&["TD","TH"].indexOf(c.tagName)<0){for(var g=f.previousSibling,d=f.nextSibling;g&&(g.nodeType==Node.TEXT_NODE&&0===g.textContent.replace(/\n|\r/g,"").length||j.node.hasClass(g,"fr-tmp"));){g=g.previousSibling}if(d){return !1}g&&c&&"BR"!=g.tagName&&!j.node.isBlock(g)&&!d&&0<c.textContent.replace(/\u200B/g,"").length&&0<g.textContent.length&&!j.node.hasClass(g,"fr-marker")&&(j.el==c&&!d&&j.opts.enter==b.FE.ENTER_BR&&j.browser.msie||f.parentNode.removeChild(f))}else{!c||j.node.isBlock(c)||j.node.isElement(c)||f.previousSibling||f.nextSibling||!j.node.isDeletable(f.parentNode)||U(f.parentNode)}}function z(){j.opts.htmlUntouched||(T(),B(),K(),j.spaces.normalize(null,!0),j.html.fillEmptyBlocks(),j.clean.lists(),j.clean.tables(),j.clean.toHTML5(),j.html.cleanBRs()),j.selection.restore(),J(),j.placeholder.refresh()}function J(){j.node.isEmpty(j.el)&&(null!=V()?j.el.querySelector(I())||j.el.querySelector(j.opts.htmlDoNotWrapTags.join(":not(.fr-marker),")+":not(.fr-marker)")||(j.core.hasFocus()?(j.$el.html("<"+V()+">"+b.FE.MARKERS+"<br/></"+V()+">"),j.selection.restore()):j.$el.html("<"+V()+"><br/></"+V()+">")):j.el.querySelector("*:not(.fr-marker):not(br)")||(j.core.hasFocus()?(j.$el.html(b.FE.MARKERS+"<br/>"),j.selection.restore()):j.$el.html("<br/>")))}function R(d,c){return H(d,"<"+c+"[^>]*?>([\\w\\W]*)</"+c+">",1)}function Q(d,c){var f=b("<div "+(H(d,"<"+c+"([^>]*?)>",1)||"")+">");return j.node.rawAttributes(f.get(0))}function L(c){return(H(c,"<!DOCTYPE([^>]*?)>",0)||"<!DOCTYPE html>").replace(/\n/g," ").replace(/ {2,}/g," ")}function A(d,c){j.opts.htmlExecuteScripts?d.html(c):d.get(0).innerHTML=c}function y(d){var c;(c=/:not\(([^\)]*)\)/g).test(d)&&(d=d.replace(c,"     $1 "));var f=100*(d.match(/(#[^\s\+>~\.\[:]+)/g)||[]).length+10*(d.match(/(\[[^\]]+\])/g)||[]).length+10*(d.match(/(\.[^\s\+>~\.\[:]+)/g)||[]).length+10*(d.match(/(:[\w-]+\([^\)]*\))/gi)||[]).length+10*(d.match(/(:[^\s\+>~\.\[:]+)/g)||[]).length+(d.match(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi)||[]).length;return f+=((d=(d=d.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," ")).match(/([^\s\+>~\.\[:]+)/g)||[]).length}function N(f){if(j.events.trigger("html.processGet",[f]),f&&f.getAttribute&&""===f.getAttribute("class")&&f.removeAttribute("class"),f&&f.getAttribute&&""===f.getAttribute("style")&&f.removeAttribute("style"),f&&f.nodeType==Node.ELEMENT_NODE){var c,h=f.querySelectorAll('[class=""],[style=""]');for(c=0;c<h.length;c++){var d=h[c];""===d.getAttribute("class")&&d.removeAttribute("class"),""===d.getAttribute("style")&&d.removeAttribute("style")}if("BR"===f.tagName){U(f)}else{var g=f.querySelectorAll("br");for(c=0;c<g.length;c++){U(g[c])}}}}function C(d,c){return d[3]-c[3]}function S(d){var c=j.doc.createElement("div");return c.innerHTML=d,null!==c.querySelector(I())}function x(k){var f=null;if(void 0===k&&(f=j.selection.element()),j.opts.keepFormatOnDelete){return !1}var m,h,l=f?(f.textContent.match(/\u200B/g)||[]).length-f.querySelectorAll(".fr-marker").length:0;if((j.el.textContent.match(/\u200B/g)||[]).length-j.el.querySelectorAll(".fr-marker").length==l){return !1}do{h=!1,m=j.el.querySelectorAll("*:not(.fr-marker)");for(var d=0;d<m.length;d++){var c=m[d];if(f!=c){var g=c.textContent;0===c.children.length&&1===g.length&&8203==g.charCodeAt(0)&&"TD"!==c.tagName&&(b(c).remove(),h=!0)}}}while(h)}return{defaultTag:V,isPreformatted:G,emptyBlocks:P,emptyBlockTagsQuery:function(){return b.FE.BLOCK_TAGS.join(":empty, ")+":empty"},blockTagsQuery:I,fillEmptyBlocks:function(f){for(var c=P(f),h=0;h<c.length;h++){var d=c[h];"false"===d.getAttribute("contenteditable")||d.querySelector(j.opts.htmlAllowedEmptyTags.join(":not(.fr-marker),")+":not(.fr-marker)")||j.node.isVoid(d)||"TABLE"!=d.tagName&&"TBODY"!=d.tagName&&"TR"!=d.tagName&&"UL"!=d.tagName&&"OL"!=d.tagName&&d.appendChild(j.doc.createElement("br"))}if(j.browser.msie&&j.opts.enter==b.FE.ENTER_BR){var g=j.node.contents(j.el);g.length&&g[g.length-1].nodeType==Node.TEXT_NODE&&j.$el.append("<br>")}},cleanEmptyTags:T,cleanWhiteTags:x,cleanBlankSpaces:K,blocks:function(){return j.$el.get(0).querySelectorAll(I())},getDoctype:q,set:function(D){var X,m,g,k=j.clean.html((D||"").trim(),[],[],j.opts.fullPage);if(j.opts.fullPage){var v=R(k,"body")||(0<=k.indexOf("<body")?"":k),O=Q(k,"body"),Y=R(k,"head")||"<title></title>",u=Q(k,"head"),E=b("<div>").append(Y).contents().each(function(){(this.nodeType==Node.COMMENT_NODE||0<=["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName))&&this.parentNode.removeChild(this)}).end().html().trim();Y=b("<div>").append(Y).contents().map(function(){return this.nodeType==Node.COMMENT_NODE?"\x3c!--"+this.nodeValue+"--\x3e":0<=["BASE","LINK","META","NOSCRIPT","SCRIPT","STYLE","TEMPLATE","TITLE"].indexOf(this.tagName)?this.outerHTML:""}).toArray().join("");var F=L(k),w=Q(k,"html");A(j.$el,E+"\n"+v),j.node.clearAttributes(j.el),j.$el.attr(O),j.$el.addClass("fr-view"),j.$el.attr("spellcheck",j.opts.spellcheck),j.$el.attr("dir",j.opts.direction),A(j.$head,Y),j.node.clearAttributes(j.$head.get(0)),j.$head.attr(u),j.node.clearAttributes(j.$html.get(0)),j.$html.attr(w),j.iframe_document.doctype.parentNode.replaceChild((X=F,m=j.iframe_document,(g=X.match(/<!DOCTYPE ?([^ ]*) ?([^ ]*) ?"?([^"]*)"? ?"?([^"]*)"?>/i))?m.implementation.createDocumentType(g[1],g[3],g[4]):m.implementation.createDocumentType("html")),j.iframe_document.doctype)}else{A(j.$el,k)}var h=j.edit.isDisabled();j.edit.on(),j.core.injectStyle(j.opts.iframeDefaultStyle+j.opts.iframeStyle),z(),j.opts.useClasses||(j.$el.find("[fr-original-class]").each(function(){this.setAttribute("class",this.getAttribute("fr-original-class")),this.removeAttribute("fr-original-class")}),j.$el.find("[fr-original-style]").each(function(){this.setAttribute("style",this.getAttribute("fr-original-style")),this.removeAttribute("fr-original-style")})),h&&j.edit.off(),j.events.trigger("html.set")},get:function(ap,ab){if(!j.$wp){return j.$oel.clone().removeClass("fr-view").removeAttr("contenteditable").get(0).outerHTML}var ai="";j.events.trigger("html.beforeGet");var ae,ah,al=[],au={},ac=[],ak=j.el.querySelectorAll("input, textarea");for(ae=0;ae<ak.length;ae++){ak[ae].setAttribute("value",ak[ae].value)}if(!j.opts.useClasses&&!ab){var aq=new RegExp("^"+j.opts.htmlIgnoreCSSProperties.join("$|^")+"$","gi");for(ae=0;ae<j.doc.styleSheets.length;ae++){var ar,ao=0;try{ar=j.doc.styleSheets[ae].cssRules,j.doc.styleSheets[ae].ownerNode&&"STYLE"==j.doc.styleSheets[ae].ownerNode.nodeType&&(ao=1)}catch(D){}if(ar){for(var ag=0,Z=ar.length;ag<Z;ag++){if(ar[ag].selectorText&&0<ar[ag].style.cssText.length){var an,am=ar[ag].selectorText.replace(/body |\.fr-view /g,"").replace(/::/g,":");try{an=j.el.querySelectorAll(am)}catch(D){an=[]}for(ah=0;ah<an.length;ah++){!an[ah].getAttribute("fr-original-style")&&an[ah].getAttribute("style")?(an[ah].setAttribute("fr-original-style",an[ah].getAttribute("style")),al.push(an[ah])):an[ah].getAttribute("fr-original-style")||(an[ah].setAttribute("fr-original-style",""),al.push(an[ah])),au[an[ah]]||(au[an[ah]]={});for(var aj=1000*ao+y(ar[ag].selectorText),aa=ar[ag].style.cssText.split(";"),Y=0;Y<aa.length;Y++){var at=aa[Y].trim().split(":")[0];if(at&&!at.match(aq)&&(au[an[ah]][at]||(au[an[ah]][at]=0)<=(an[ah].getAttribute("fr-original-style")||"").indexOf(at+":")&&(au[an[ah]][at]=10000),aj>=au[an[ah]][at]&&(au[an[ah]][at]=aj,aa[Y].trim().length))){var w=aa[Y].trim().split(":");w.splice(0,1),ac.push([an[ah],at.trim(),w.join(":").trim(),aj])}}}}}}}for(ac.sort(C),ae=0;ae<ac.length;ae++){var k=ac[ae];k[0].style[k[1]]=k[2]}for(ae=0;ae<al.length;ae++){if(al[ae].getAttribute("class")&&(al[ae].setAttribute("fr-original-class",al[ae].getAttribute("class")),al[ae].removeAttribute("class")),0<(al[ae].getAttribute("fr-original-style")||"").trim().length){var O=al[ae].getAttribute("fr-original-style").split(";");for(ah=0;ah<O.length;ah++){if(0<O[ah].indexOf(":")){var F=O[ah].split(":"),ad=F[0];F.splice(0,1),al[ae].style[ad.trim()]=F.join(":").trim()}}}}}if(j.node.isEmpty(j.el)){j.opts.fullPage&&(ai=q(j.iframe_document),ai+="<html"+j.node.attributes(j.$html.get(0))+">"+j.$html.find("head").get(0).outerHTML+"<body></body></html>")}else{if(void 0===ap&&(ap=!1),j.opts.fullPage){ai=q(j.iframe_document),j.$el.removeClass("fr-view");var af=j.opts.heightMin;j.opts.heightMin=null,j.size.refresh(),ai+="<html"+j.node.attributes(j.$html.get(0))+">"+j.$html.html()+"</html>",j.opts.heightMin=af,j.size.refresh(),j.$el.addClass("fr-view")}else{ai=j.$el.html()}}if(!j.opts.useClasses&&!ab){for(ae=0;ae<al.length;ae++){al[ae].getAttribute("fr-original-class")&&(al[ae].setAttribute("class",al[ae].getAttribute("fr-original-class")),al[ae].removeAttribute("fr-original-class")),null!=al[ae].getAttribute("fr-original-style")&&void 0!==al[ae].getAttribute("fr-original-style")?(0!==al[ae].getAttribute("fr-original-style").length?al[ae].setAttribute("style",al[ae].getAttribute("fr-original-style")):al[ae].removeAttribute("style"),al[ae].removeAttribute("fr-original-style")):al[ae].removeAttribute("style")}}j.opts.fullPage&&(ai=(ai=(ai=(ai=(ai=(ai=(ai=(ai=ai.replace(/<style data-fr-style="true">(?:[\w\W]*?)<\/style>/g,"")).replace(/<link([^>]*)data-fr-style="true"([^>]*)>/g,"")).replace(/<style(?:[\w\W]*?)class="firebugResetStyles"(?:[\w\W]*?)>(?:[\w\W]*?)<\/style>/g,"")).replace(/<body((?:[\w\W]*?)) spellcheck="true"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")).replace(/<body((?:[\w\W]*?)) contenteditable="(true|false)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>")).replace(/<body((?:[\w\W]*?)) dir="([\w]*)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$3>$4</body>")).replace(/<body((?:[\w\W]*?))class="([\w\W]*?)(fr-rtl|fr-ltr)([\w\W]*?)"((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,'<body$1class="$2$4"$5>$6</body>')).replace(/<body((?:[\w\W]*?)) class=""((?:[\w\W]*?))>((?:[\w\W]*?))<\/body>/g,"<body$1$2>$3</body>")),j.opts.htmlSimpleAmpersand&&(ai=ai.replace(/\&amp;/gi,"&")),j.events.trigger("html.afterGet"),ap||(ai=ai.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,"")),ai=j.clean.invisibleSpaces(ai),ai=j.clean.exec(ai,N);var X=j.events.chainTrigger("html.get",ai);return"string"==typeof X&&(ai=X),ai=(ai=ai.replace(/<pre(?:[\w\W]*?)>(?:[\w\W]*?)<\/pre>/g,function(c){return c.replace(/<br>/g,"\n")})).replace(/<meta((?:[\w\W]*?)) data-fr-http-equiv="/g,'<meta$1 http-equiv="')},getSelected:function(){var h,f,l=function(m,i){for(;i&&(i.nodeType==Node.TEXT_NODE||!j.node.isBlock(i))&&!j.node.isElement(i)&&!j.node.hasClass(i,"fr-inner");){i&&i.nodeType!=Node.TEXT_NODE&&b(m).wrapInner(j.node.openTagString(i)+j.node.closeTagString(i)),i=i.parentNode}i&&m.innerHTML==i.innerHTML&&(m.innerHTML=i.outerHTML)},g="";if("undefined"!=typeof j.win.getSelection){j.browser.mozilla&&(j.selection.save(),1<j.$el.find('.fr-marker[data-type="false"]').length&&(j.$el.find('.fr-marker[data-type="false"][data-id="0"]').remove(),j.$el.find('.fr-marker[data-type="false"]:last').attr("data-id","0"),j.$el.find(".fr-marker").not('[data-id="0"]').remove()),j.selection.restore());for(var k=j.selection.ranges(),d=0;d<k.length;d++){var c=document.createElement("div");c.appendChild(k[d].cloneContents()),l(c,(f=h=void 0,f=null,j.win.getSelection?(h=j.win.getSelection())&&h.rangeCount&&(f=h.getRangeAt(0).commonAncestorContainer).nodeType!=Node.ELEMENT_NODE&&(f=f.parentNode):(h=j.doc.selection)&&"Control"!=h.type&&(f=h.createRange().parentElement()),null!=f&&(0<=b.inArray(j.el,b(f).parents())||f==j.el)?f:null)),0<b(c).find(".fr-element").length&&(c=j.el),g+=c.innerHTML}}else{"undefined"!=typeof j.doc.selection&&"Text"==j.doc.selection.type&&(g=j.doc.selection.createRange().htmlText)}return g},insert:function(k,f,m){var h,l,d;if(j.selection.isCollapsed()||j.selection.remove(),h=f?k:j.clean.html(k),k.indexOf('class="fr-marker"')<0&&(l=h,(d=j.doc.createElement("div")).innerHTML=l,j.selection.setAtEnd(d),h=d.innerHTML),j.node.isEmpty(j.el)&&!j.opts.keepFormatOnDelete&&S(h)){j.el.innerHTML=h}else{var c=j.markers.insert();if(c){j.node.isLastSibling(c)&&b(c).parent().hasClass("fr-deletable")&&b(c).insertAfter(b(c).parent());var g=j.node.blockParent(c);if((S(h)||m)&&(j.node.deepestParent(c)||g&&"LI"==g.tagName)){if(g&&"LI"==g.tagName&&(h=function(s){if(!j.html.defaultTag()){return s}var i=j.doc.createElement("div");i.innerHTML=s;for(var v=i.querySelectorAll(":scope > "+j.html.defaultTag()),p=v.length-1;0<=p;p--){var u=v[p];j.node.isBlock(u.previousSibling)||(u.previousSibling&&!j.node.isEmpty(u)&&b("<br>").insertAfter(u.previousSibling),u.outerHTML=u.innerHTML)}return i.innerHTML}(h)),!(c=j.markers.split())){return !1}c.outerHTML=h}else{c.outerHTML=h}}else{j.el.innerHTML=j.el.innerHTML+h}}z(),j.keys.positionCaret(),j.events.trigger("html.inserted")},wrap:B,unwrap:function(){j.$el.find("div.fr-temp-div").each(function(){this.previousSibling&&this.previousSibling.nodeType===Node.TEXT_NODE&&b(this).before("<br>"),b(this).attr("data-empty")||!this.nextSibling||j.node.isBlock(this.nextSibling)&&!b(this.nextSibling).hasClass("fr-temp-div")?b(this).replaceWith(b(this).html()):b(this).replaceWith(b(this).html()+"<br>")}),j.$el.find(".fr-temp-div").removeClass("fr-temp-div").filter(function(){return""===b(this).attr("class")}).removeAttr("class")},escapeEntities:function(c){return c.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;")},checkIfEmpty:J,extractNode:R,extractNodeAttrs:Q,extractDoctype:L,cleanBRs:function(){for(var d=j.el.getElementsByTagName("br"),c=0;c<d.length;c++){U(d[c])}},_init:function(){if(j.$wp){var c=function(){x(),j.placeholder&&setTimeout(j.placeholder.refresh,0)};j.events.on("mouseup",c),j.events.on("keydown",c),j.events.on("contentChanged",J)}}}},b.extend(b.FE.DEFAULTS,{height:null,heightMax:null,heightMin:null,width:null}),b.FE.MODULES.size=function(d){function c(){f(),d.opts.height&&d.$el.css("minHeight",d.opts.height-d.helpers.getPX(d.$el.css("padding-top"))-d.helpers.getPX(d.$el.css("padding-bottom"))),d.$iframe.height(d.$el.outerHeight(!0))}function f(){d.opts.heightMin?d.$el.css("minHeight",d.opts.heightMin):d.$el.css("minHeight",""),d.opts.heightMax?(d.$wp.css("maxHeight",d.opts.heightMax),d.$wp.css("overflow","auto")):(d.$wp.css("maxHeight",""),d.$wp.css("overflow","")),d.opts.height?(d.$wp.height(d.opts.height),d.$wp.css("overflow","auto"),d.$el.css("minHeight",d.opts.height-d.helpers.getPX(d.$el.css("padding-top"))-d.helpers.getPX(d.$el.css("padding-bottom")))):(d.$wp.css("height",""),d.opts.heightMin||d.$el.css("minHeight",""),d.opts.heightMax||d.$wp.css("overflow","")),d.opts.width&&d.$box.width(d.opts.width)}return{_init:function(){if(!d.$wp){return !1}f(),d.$iframe&&(d.events.on("keyup keydown",function(){setTimeout(c,0)},!0),d.events.on("commands.after html.set init initialized paste.after",c))},syncIframe:c,refresh:f}},b.extend(b.FE.DEFAULTS,{language:null}),b.FE.LANGUAGE={},b.FE.MODULES.language=function(d){var c;return{_init:function(){b.FE.LANGUAGE&&(c=b.FE.LANGUAGE[d.opts.language]),c&&c.direction&&(d.opts.direction=c.direction)},translate:function(f){return c&&c.translation[f]&&c.translation[f].length?c.translation[f]:f}}},b.extend(b.FE.DEFAULTS,{placeholderText:"Type something"}),b.FE.MODULES.placeholder=function(h){function f(){h.$placeholder||(h.$placeholder=b('<span class="fr-placeholder"></span>'),h.$wp.append(h.$placeholder));var q=h.opts.iframe?h.$iframe.prev().outerHeight(!0):h.$el.prev().outerHeight(!0),w=0,k=0,c=0,j=0,p=0,v=0,x=h.node.contents(h.el),m=b(h.selection.element()).css("text-align");if(x.length&&x[0].nodeType==Node.ELEMENT_NODE){var u=b(x[0]);(!h.opts.toolbarInline||0<h.$el.prev().length)&&h.ready&&(w=h.helpers.getPX(u.css("margin-top")),j=h.helpers.getPX(u.css("padding-top")),k=h.helpers.getPX(u.css("margin-left")),c=h.helpers.getPX(u.css("margin-right")),p=h.helpers.getPX(u.css("padding-left")),v=h.helpers.getPX(u.css("padding-right"))),h.$placeholder.css("font-size",u.css("font-size")),h.$placeholder.css("line-height",u.css("line-height"))}else{h.$placeholder.css("font-size",h.$el.css("font-size")),h.$placeholder.css("line-height",h.$el.css("line-height"))}h.$wp.addClass("show-placeholder"),h.$placeholder.css({marginTop:Math.max(h.helpers.getPX(h.$el.css("margin-top")),w)+(q||0),paddingTop:Math.max(h.helpers.getPX(h.$el.css("padding-top")),j),paddingLeft:Math.max(h.helpers.getPX(h.$el.css("padding-left")),p),marginLeft:Math.max(h.helpers.getPX(h.$el.css("margin-left")),k),paddingRight:Math.max(h.helpers.getPX(h.$el.css("padding-right")),v),marginRight:Math.max(h.helpers.getPX(h.$el.css("margin-right")),c),textAlign:m}).text(h.language.translate(h.opts.placeholderText||h.$oel.attr("placeholder")||"")),h.$placeholder.html(h.$placeholder.text().replace(/\n/g,"<br>"))}function d(){h.$wp.removeClass("show-placeholder")}function g(){if(!h.$wp){return !1}h.core.isEmpty()?f():d()}return{_init:function(){if(!h.$wp){return !1}h.events.on("init input keydown keyup contentChanged initialized",g)},show:f,hide:d,refresh:g,isVisible:function(){return !h.$wp||h.node.hasClass(h.$wp.get(0),"show-placeholder")}}},b.FE.MODULES.edit=function(c){function f(){if(c.browser.mozilla){try{c.doc.execCommand("enableObjectResizing",!1,"false"),c.doc.execCommand("enableInlineTableEditing",!1,"false")}catch(h){}}if(c.browser.msie){try{c.doc.body.addEventListener("mscontrolselect",function(i){return i.preventDefault(),!1})}catch(h){}}}var g=!1;function d(){return g}return{_init:function(){c.events.on("focus",function(){d()?c.edit.off():c.edit.on()})},on:function(){c.$wp?(c.$el.attr("contenteditable",!0),c.$el.removeClass("fr-disabled").attr("aria-disabled",!1),c.$tb&&c.$tb.removeClass("fr-disabled").removeAttr("aria-disabled"),f()):c.$el.is("a")&&c.$el.attr("contenteditable",!0),g=!1},off:function(){c.events.disableBlur(),c.$wp?(c.$el.attr("contenteditable",!1),c.$el.addClass("fr-disabled").attr("aria-disabled",!0),c.$tb&&c.$tb.addClass("fr-disabled").attr("aria-disabled",!0)):c.$el.is("a")&&c.$el.attr("contenteditable",!1),c.events.enableBlur(),g=!0},disableDesign:f,isDisabled:d}},b.extend(b.FE.DEFAULTS,{editorClass:null,typingTimer:500,iframe:!1,requestWithCORS:!0,requestWithCredentials:!1,requestHeaders:{},useClasses:!0,spellcheck:!0,iframeDefaultStyle:'html{margin:0px;height:auto;}body{height:auto;padding:10px;background:transparent;color:#000000;position:relative;z-index: 2;-webkit-user-select:auto;margin:0px;overflow:hidden;min-height:20px;}body:after{content:"";display:block;clear:both;}body::-moz-selection{background:#b5d6fd;color:#000;}body::selection{background:#b5d6fd;color:#000;}',iframeStyle:"",iframeStyleFiles:[],direction:"auto",zIndex:1,tabIndex:null,disableRightClick:!1,scrollableContainer:"body",keepFormatOnDelete:!1,theme:null}),b.FE.MODULES.core=function(d){function c(){if(d.$box.addClass("fr-box"+(d.opts.editorClass?" "+d.opts.editorClass:"")),d.$box.attr("role","application"),d.$wp.addClass("fr-wrapper"),d.opts.iframe||d.$el.addClass("fr-element fr-view"),d.opts.iframe){d.$iframe.addClass("fr-iframe"),d.$el.addClass("fr-view");for(var h=0;h<d.o_doc.styleSheets.length;h++){var f;try{f=d.o_doc.styleSheets[h].cssRules}catch(i){}if(f){for(var j=0,g=f.length;j<g;j++){!f[j].selectorText||0!==f[j].selectorText.indexOf(".fr-view")&&0!==f[j].selectorText.indexOf(".fr-element")||0<f[j].style.cssText.length&&(0===f[j].selectorText.indexOf(".fr-view")?d.opts.iframeStyle+=f[j].selectorText.replace(/\.fr-view/g,"body")+"{"+f[j].style.cssText+"}":d.opts.iframeStyle+=f[j].selectorText.replace(/\.fr-element/g,"body")+"{"+f[j].style.cssText+"}")}}}}"auto"!=d.opts.direction&&d.$box.removeClass("fr-ltr fr-rtl").addClass("fr-"+d.opts.direction),d.$el.attr("dir",d.opts.direction),d.$wp.attr("dir",d.opts.direction),1<d.opts.zIndex&&d.$box.css("z-index",d.opts.zIndex),d.opts.theme&&d.$box.addClass(d.opts.theme+"-theme"),d.opts.tabIndex=d.opts.tabIndex||d.$oel.attr("tabIndex"),d.opts.tabIndex&&d.$el.attr("tabIndex",d.opts.tabIndex)}return{_init:function(){if(b.FE.INSTANCES.push(d),d.drag_support={filereader:"undefined"!=typeof FileReader,formdata:!!d.win.FormData,progress:"upload" in new XMLHttpRequest},d.$wp){c(),d.html.set(d._original_html),d.$el.attr("spellcheck",d.opts.spellcheck),d.helpers.isMobile()&&(d.$el.attr("autocomplete",d.opts.spellcheck?"on":"off"),d.$el.attr("autocorrect",d.opts.spellcheck?"on":"off"),d.$el.attr("autocapitalize",d.opts.spellcheck?"on":"off")),d.opts.disableRightClick&&d.events.$on(d.$el,"contextmenu",function(g){if(2==g.button){return !1}});try{d.doc.execCommand("styleWithCSS",!1,!1)}catch(f){}}"TEXTAREA"==d.$oel.get(0).tagName&&(d.events.on("contentChanged",function(){d.$oel.val(d.html.get())}),d.events.on("form.submit",function(){d.$oel.val(d.html.get())}),d.events.on("form.reset",function(){d.html.set(d._original_html)}),d.$oel.val(d.html.get())),d.helpers.isIOS()&&d.events.$on(d.$doc,"selectionchange",function(){d.$doc.get(0).hasFocus()||d.$win.get(0).focus()}),d.events.trigger("init"),d.opts.autofocus&&!d.opts.initOnClick&&d.$wp&&d.events.on("initialized",function(){d.events.focus(!0)})},destroy:function(f){"TEXTAREA"==d.$oel.get(0).tagName&&d.$oel.val(f),d.$box&&d.$box.removeAttr("role"),d.$wp&&("TEXTAREA"==d.$oel.get(0).tagName?(d.$el.html(""),d.$wp.html(""),d.$box.replaceWith(d.$oel),d.$oel.show()):(d.$wp.replaceWith(f),d.$el.html(""),d.$box.removeClass("fr-view fr-ltr fr-box "+(d.opts.editorClass||"")),d.opts.theme&&d.$box.addClass(d.opts.theme+"-theme"))),this.$wp=null,this.$el=null,this.el=null,this.$box=null},isEmpty:function(){return d.node.isEmpty(d.el)},getXHR:function(h,f){var i=new XMLHttpRequest;for(var g in i.open(f,h,!0),d.opts.requestWithCredentials&&(i.withCredentials=!0),d.opts.requestHeaders){d.opts.requestHeaders.hasOwnProperty(g)&&i.setRequestHeader(g,d.opts.requestHeaders[g])}return i},injectStyle:function(g){if(d.opts.iframe){d.$head.find("style[data-fr-style], link[data-fr-style]").remove(),d.$head.append('<style data-fr-style="true">'+g+"</style>");for(var f=0;f<d.opts.iframeStyleFiles.length;f++){var h=b('<link data-fr-style="true" rel="stylesheet" href="'+d.opts.iframeStyleFiles[f]+'">');h.get(0).addEventListener("load",d.size.syncIframe),d.$head.append(h)}}},hasFocus:function(){return d.browser.mozilla&&d.helpers.isMobile()?d.selection.inEditor():d.node.hasFocus(d.el)||0<d.$el.find("*:focus").length},sameInstance:function(g){if(!g){return !1}var f=g.data("instance");return !!f&&f.id==d.id}}},b.FE.MODULES.cursorLists=function(d){function c(g){for(var f=g;"LI"!=f.tagName;){f=f.parentNode}return f}function e(g){for(var f=g;!d.node.isList(f);){f=f.parentNode}return f}return{_startEnter:function(y){var D,m=c(y),h=m.nextSibling,k=m.previousSibling,v=d.html.defaultTag();if(d.node.isEmpty(m,!0)&&h){for(var B="",E="",q=y.parentNode;!d.node.isList(q)&&q.parentNode&&("LI"!==q.parentNode.tagName||q.parentNode===m);){B=d.node.openTagString(q)+B,E+=d.node.closeTagString(q),q=q.parentNode}B=d.node.openTagString(q)+B,E+=d.node.closeTagString(q);var z="";for(z=q.parentNode&&"LI"==q.parentNode.tagName?E+"<li>"+b.FE.MARKERS+"<br>"+B:v?E+"<"+v+">"+b.FE.MARKERS+"<br></"+v+">"+B:E+b.FE.MARKERS+"<br>"+B;["UL","OL"].indexOf(q.tagName)<0||q.parentNode&&"LI"===q.parentNode.tagName;){q=q.parentNode}b(m).replaceWith('<span id="fr-break"></span>');var A=d.node.openTagString(q)+b(q).html()+d.node.closeTagString(q);A=A.replace(/<span id="fr-break"><\/span>/g,z),b(q).replaceWith(A),d.$el.find("li:empty").remove()}else{if(k&&h||!d.node.isEmpty(m,!0)){for(var x="<br>",j=y.parentNode;j&&"LI"!=j.tagName;){x=d.node.openTagString(j)+x+d.node.closeTagString(j),j=j.parentNode}b(m).before("<li>"+x+"</li>"),b(y).remove()}else{if(k){D=e(m);for(var C=b.FE.MARKERS+"<br>",w=y.parentNode;w&&"LI"!=w.tagName;){C=d.node.openTagString(w)+C+d.node.closeTagString(w),w=w.parentNode}D.parentNode&&"LI"==D.parentNode.tagName?b(D.parentNode).after("<li>"+C+"</li>"):v?b(D).after("<"+v+">"+C+"</"+v+">"):b(D).after(C),b(m).remove()}else{(D=e(m)).parentNode&&"LI"==D.parentNode.tagName?h?b(D.parentNode).before(d.node.openTagString(m)+b.FE.MARKERS+"<br></li>"):b(D.parentNode).after(d.node.openTagString(m)+b.FE.MARKERS+"<br></li>"):v?b(D).before("<"+v+">"+b.FE.MARKERS+"<br></"+v+">"):b(D).before(b.FE.MARKERS+"<br>"),b(m).remove()}}}},_middleEnter:function(l){for(var h=c(l),p="",k=l,m="",g="";k!=h;){var f="A"==(k=k.parentNode).tagName&&d.cursor.isAtEnd(l,k)?"fr-to-remove":"";m=d.node.openTagString(b(k).clone().addClass(f).get(0))+m,g=d.node.closeTagString(k)+g}p=g+p+m+b.FE.MARKERS+b.FE.INVISIBLE_SPACE,b(l).replaceWith('<span id="fr-break"></span>');var j=d.node.openTagString(h)+b(h).html()+d.node.closeTagString(h);j=j.replace(/<span id="fr-break"><\/span>/g,p),b(h).replaceWith(j)},_endEnter:function(l){for(var h=c(l),p=b.FE.MARKERS,k="",m=l,g=!1;m!=h;){var f="A"==(m=m.parentNode).tagName&&d.cursor.isAtEnd(l,m)?"fr-to-remove":"";g||m==h||d.node.isBlock(m)||(g=!0,k+=b.FE.INVISIBLE_SPACE),k=d.node.openTagString(b(m).clone().addClass(f).get(0))+k,p+=d.node.closeTagString(m)}var j=k+p;b(l).remove(),b(h).after(j)},_backspace:function(m){var q=c(m),h=q.previousSibling;if(h){h=b(h).find(d.html.blockTagsQuery()).get(-1)||h,b(m).replaceWith(b.FE.MARKERS);var f=d.node.contents(h);f.length&&"BR"==f[f.length-1].tagName&&b(f[f.length-1]).remove(),b(q).find(d.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==q&&b(this).replaceWith(b(this).html()+(d.node.isEmpty(this)?"":"<br>"))});for(var g,k=d.node.contents(q)[0];k&&!d.node.isList(k);){g=k.nextSibling,b(h).append(k),k=g}for(h=q.previousSibling;k;){g=k.nextSibling,b(h).append(k),k=g}b(q).remove()}else{var p=e(q);if(b(m).replaceWith(b.FE.MARKERS),p.parentNode&&"LI"==p.parentNode.tagName){var u=p.previousSibling;d.node.isBlock(u)?(b(q).find(d.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==q&&b(this).replaceWith(b(this).html()+(d.node.isEmpty(this)?"":"<br>"))}),b(u).append(b(q).html())):b(p).before(b(q).html())}else{var j=d.html.defaultTag();j&&0===b(q).find(d.html.blockTagsQuery()).length?b(p).before("<"+j+">"+b(q).html()+"</"+j+">"):b(p).before(b(q).html())}b(q).remove(),d.html.wrap(),0===b(p).find("li").length&&b(p).remove()}},_del:function(l){var h,p=c(l),k=p.nextSibling;if(k){(h=d.node.contents(k)).length&&"BR"==h[0].tagName&&b(h[0]).remove(),b(k).find(d.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==k&&b(this).replaceWith(b(this).html()+(d.node.isEmpty(this)?"":"<br>"))});for(var m,g=l,f=d.node.contents(k)[0];f&&!d.node.isList(f);){m=f.nextSibling,b(g).after(f),g=f,f=m}for(;f;){m=f.nextSibling,b(p).append(f),f=m}b(l).replaceWith(b.FE.MARKERS),b(k).remove()}else{for(var j=p;!j.nextSibling&&j!=d.el;){j=j.parentNode}if(j==d.el){return !1}if(j=j.nextSibling,d.node.isBlock(j)){b.FE.NO_DELETE_TAGS.indexOf(j.tagName)<0&&(b(l).replaceWith(b.FE.MARKERS),(h=d.node.contents(p)).length&&"BR"==h[h.length-1].tagName&&b(h[h.length-1]).remove(),b(p).append(b(j).html()),b(j).remove())}else{for((h=d.node.contents(p)).length&&"BR"==h[h.length-1].tagName&&b(h[h.length-1]).remove(),b(l).replaceWith(b.FE.MARKERS);j&&!d.node.isBlock(j)&&"BR"!=j.tagName;){b(p).append(b(j)),j=j.nextSibling}}}}}},b.FE.NO_DELETE_TAGS=["TH","TD","TR","TABLE","FORM"],b.FE.SIMPLE_ENTER_TAGS=["TH","TD","LI","DL","DT","FORM"],b.FE.MODULES.cursor=function(z){function q(c){return !!c&&(!!z.node.isBlock(c)||(c.nextSibling&&c.nextSibling.nodeType==Node.TEXT_NODE&&0===c.nextSibling.textContent.replace(/\u200b/g,"").length?q(c.nextSibling):!(c.nextSibling&&(!c.previousSibling||"BR"!=c.nextSibling.tagName||c.nextSibling.nextSibling))&&q(c.parentNode)))}function y(c){return !!c&&(!!z.node.isBlock(c)||(c.previousSibling&&c.previousSibling.nodeType==Node.TEXT_NODE&&0===c.previousSibling.textContent.replace(/\u200b/g,"").length?y(c.previousSibling):!c.previousSibling&&(!(c.previousSibling||!z.node.hasClass(c.parentNode,"fr-inner"))||y(c.parentNode))))}function t(d,c){return !!d&&(d!=z.$wp.get(0)&&(d.previousSibling&&d.previousSibling.nodeType==Node.TEXT_NODE&&0===d.previousSibling.textContent.replace(/\u200b/g,"").length?t(d.previousSibling,c):!d.previousSibling&&(d.parentNode==c||t(d.parentNode,c))))}function r(d,c){return !!d&&(d!=z.$wp.get(0)&&(d.nextSibling&&d.nextSibling.nodeType==Node.TEXT_NODE&&0===d.nextSibling.textContent.replace(/\u200b/g,"").length?r(d.nextSibling,c):!(d.nextSibling&&(!d.previousSibling||"BR"!=d.nextSibling.tagName||d.nextSibling.nextSibling))&&(d.parentNode==c||r(d.parentNode,c))))}function A(c){return 0<b(c).parentsUntil(z.$el,"LI").length&&0===b(c).parentsUntil("LI","TABLE").length}function w(f,c){var g=new RegExp((c?"^":"")+"(([\\uD83C-\\uDBFF\\uDC00-\\uDFFF]+\\u200D)*[\\uD83C-\\uDBFF\\uDC00-\\uDFFF]{2})"+(c?"":"$"),"i"),d=f.match(g);return d?d[0].length:1}function x(m){for(var u,f=m;!f.previousSibling;){if(f=f.parentNode,z.node.isElement(f)){return !1}}if(f=f.previousSibling,!z.node.isBlock(f)&&z.node.isEditable(f)){for(u=z.node.contents(f);f.nodeType!=Node.TEXT_NODE&&!z.node.isDeletable(f)&&u.length&&z.node.isEditable(f);){f=u[u.length-1],u=z.node.contents(f)}if(f.nodeType==Node.TEXT_NODE){var c=f.textContent,d=c.length;if(c.length&&"\n"===c[c.length-1]){return f.textContent=c.substring(0,d-2),0===f.textContent.length&&f.parentNode.removeChild(f),x(m)}if(z.opts.tabSpaces&&c.length>=z.opts.tabSpaces){0===c.substr(c.length-z.opts.tabSpaces,c.length-1).replace(/ /g,"").replace(new RegExp(b.FE.UNICODE_NBSP,"g"),"").length&&(d=c.length-z.opts.tabSpaces+1)}f.textContent=c.substring(0,d-w(c));var h=c.length!=f.textContent.length;if(0===f.textContent.length){if(h&&z.opts.keepFormatOnDelete){b(f).after(b.FE.INVISIBLE_SPACE+b.FE.MARKERS)}else{if((2!=f.parentNode.childNodes.length||f.parentNode!=m.parentNode)&&1!=f.parentNode.childNodes.length||z.node.isBlock(f.parentNode)||z.node.isElement(f.parentNode)||!z.node.isDeletable(f.parentNode)){for(;!z.node.isElement(f.parentNode)&&z.node.isEmpty(f.parentNode)&&z.node.isDeletable(f.parentNode);){var p=f;f=f.parentNode,p.parentNode.removeChild(p)}b(f).after(b.FE.MARKERS),z.node.isElement(f.parentNode)&&!m.nextSibling&&f.previousSibling&&"BR"==f.previousSibling.tagName&&b(m).after("<br>"),f.parentNode.removeChild(f)}else{b(f.parentNode).after(b.FE.MARKERS),b(f.parentNode).remove()}}}else{b(f).after(b.FE.MARKERS)}}else{z.node.isDeletable(f)?(b(f).after(b.FE.MARKERS),b(f).remove()):m.nextSibling&&"BR"==m.nextSibling.tagName&&z.node.isVoid(f)&&"BR"!=f.tagName?(b(m.nextSibling).remove(),b(m).replaceWith(b.FE.MARKERS)):!1!==z.events.trigger("node.remove",[b(f)])&&(b(f).after(b.FE.MARKERS),b(f).remove())}}else{if(b.FE.NO_DELETE_TAGS.indexOf(f.tagName)<0&&(z.node.isEditable(f)||z.node.isDeletable(f))){if(z.node.isDeletable(f)){b(m).replaceWith(b.FE.MARKERS),b(f).remove()}else{if(z.node.isEmpty(f)&&!z.node.isList(f)){b(f).remove(),b(m).replaceWith(b.FE.MARKERS)}else{for(z.node.isList(f)&&(f=b(f).find("li:last").get(0)),(u=z.node.contents(f))&&"BR"==u[u.length-1].tagName&&b(u[u.length-1]).remove(),u=z.node.contents(f);u&&z.node.isBlock(u[u.length-1]);){f=u[u.length-1],u=z.node.contents(f)}b(f).append(b.FE.MARKERS);for(var B=m;!B.previousSibling;){B=B.parentNode}for(;B&&"BR"!==B.tagName&&!z.node.isBlock(B);){var g=B;B=B.nextSibling,b(f).append(g)}B&&"BR"==B.tagName&&b(B).remove(),b(m).remove()}}}else{m.nextSibling&&"BR"==m.nextSibling.tagName&&b(m.nextSibling).remove()}}}function o(l){var f=0<b(l).parentsUntil(z.$el,"BLOCKQUOTE").length,p=z.node.deepestParent(l,[],!f);if(p&&"BLOCKQUOTE"==p.tagName){var h=z.node.deepestParent(l,[b(l).parentsUntil(z.$el,"BLOCKQUOTE").get(0)]);h&&h.nextSibling&&(p=h)}if(null!==p){var m,d=p.nextSibling;if(z.node.isBlock(p)&&(z.node.isEditable(p)||z.node.isDeletable(p))&&d&&b.FE.NO_DELETE_TAGS.indexOf(d.tagName)<0){if(z.node.isDeletable(d)){b(d).remove(),b(l).replaceWith(b.FE.MARKERS)}else{if(z.node.isBlock(d)&&z.node.isEditable(d)){if(z.node.isList(d)){if(z.node.isEmpty(p,!0)){b(p).remove(),b(d).find("li:first").prepend(b.FE.MARKERS)}else{var c=b(d).find("li:first");"BLOCKQUOTE"==p.tagName&&(m=z.node.contents(p)).length&&z.node.isBlock(m[m.length-1])&&(p=m[m.length-1]),0===c.find("ul, ol").length&&(b(l).replaceWith(b.FE.MARKERS),c.find(z.html.blockTagsQuery()).not("ol, ul, table").each(function(){this.parentNode==c.get(0)&&b(this).replaceWith(b(this).html()+(z.node.isEmpty(this)?"":"<br>"))}),b(p).append(z.node.contents(c.get(0))),c.remove(),0===b(d).find("li").length&&b(d).remove())}}else{if((m=z.node.contents(d)).length&&"BR"==m[0].tagName&&b(m[0]).remove(),"BLOCKQUOTE"!=d.tagName&&"BLOCKQUOTE"==p.tagName){for(m=z.node.contents(p);m.length&&z.node.isBlock(m[m.length-1]);){p=m[m.length-1],m=z.node.contents(p)}}else{if("BLOCKQUOTE"==d.tagName&&"BLOCKQUOTE"!=p.tagName){for(m=z.node.contents(d);m.length&&z.node.isBlock(m[0]);){d=m[0],m=z.node.contents(d)}}}b(l).replaceWith(b.FE.MARKERS),b(p).append(d.innerHTML),b(d).remove()}}else{for(b(l).replaceWith(b.FE.MARKERS);d&&"BR"!==d.tagName&&!z.node.isBlock(d)&&z.node.isEditable(d);){var g=d;d=d.nextSibling,b(p).append(g)}d&&"BR"==d.tagName&&z.node.isEditable(d)&&b(d).remove()}}}}}function j(f){for(var c,h=f;!h.nextSibling;){if(h=h.parentNode,z.node.isElement(h)){return !1}}if("BR"==(h=h.nextSibling).tagName&&z.node.isEditable(h)){if(h.nextSibling){if(z.node.isBlock(h.nextSibling)&&z.node.isEditable(h.nextSibling)){if(!(b.FE.NO_DELETE_TAGS.indexOf(h.nextSibling.tagName)<0)){return void b(h).remove()}h=h.nextSibling,b(h.previousSibling).remove()}}else{if(q(h)){if(A(f)){z.cursorLists._del(f)}else{z.node.deepestParent(h)&&((!z.node.isEmpty(z.node.blockParent(h))||(z.node.blockParent(h).nextSibling&&b.FE.NO_DELETE_TAGS.indexOf(z.node.blockParent(h).nextSibling.tagName))<0)&&b(h).remove(),o(f))}return}}}if(!z.node.isBlock(h)&&z.node.isEditable(h)){for(c=z.node.contents(h);h.nodeType!=Node.TEXT_NODE&&c.length&&!z.node.isDeletable(h)&&z.node.isEditable(h);){h=c[0],c=z.node.contents(h)}h.nodeType==Node.TEXT_NODE?(b(h).before(b.FE.MARKERS),h.textContent.length&&(h.textContent=h.textContent.substring(w(h.textContent,!0),h.textContent.length))):z.node.isDeletable(h)?(b(h).before(b.FE.MARKERS),b(h).remove()):!1!==z.events.trigger("node.remove",[b(h)])&&(b(h).before(b.FE.MARKERS),b(h).remove()),b(f).remove()}else{if(b.FE.NO_DELETE_TAGS.indexOf(h.tagName)<0&&(z.node.isEditable(h)||z.node.isDeletable(h))){if(z.node.isDeletable(h)){b(f).replaceWith(b.FE.MARKERS),b(h).remove()}else{if(z.node.isList(h)){f.previousSibling?(b(h).find("li:first").prepend(f),z.cursorLists._backspace(f)):(b(h).find("li:first").prepend(b.FE.MARKERS),b(f).remove())}else{if((c=z.node.contents(h))&&"BR"==c[0].tagName&&b(c[0]).remove(),c&&"BLOCKQUOTE"==h.tagName){var d=c[0];for(b(f).before(b.FE.MARKERS);d&&"BR"!=d.tagName;){var g=d;d=d.nextSibling,b(f).before(g)}d&&"BR"==d.tagName&&b(d).remove()}else{b(f).after(b(h).html()).after(b.FE.MARKERS),b(h).remove()}}}}}}function v(){for(var d=z.el.querySelectorAll("blockquote:empty"),c=0;c<d.length;c++){d[c].parentNode.removeChild(d[c])}}function e(E,I,u){var g,m=z.node.deepestParent(E,[],!u);if(m&&"BLOCKQUOTE"==m.tagName){return r(E,m)?((g=z.html.defaultTag())?b(m).after("<"+g+">"+b.FE.MARKERS+"<br></"+g+">"):b(m).after(b.FE.MARKERS+"<br>"),b(E).remove()):k(E,I,u),!1}if(null==m){(g=z.html.defaultTag())&&z.node.isElement(E.parentNode)?b(E).replaceWith("<"+g+">"+b.FE.MARKERS+"<br></"+g+">"):!E.previousSibling||b(E.previousSibling).is("br")||E.nextSibling?b(E).replaceWith("<br>"+b.FE.MARKERS):b(E).replaceWith("<br>"+b.FE.MARKERS+"<br>")}else{var C=E,H="";z.node.isBlock(m)&&!I||(H="<br/>");var J,B="",F="",G="",D="";(g=z.html.defaultTag())&&z.node.isBlock(m)&&(G="<"+g+">",D="</"+g+">",m.tagName==g.toUpperCase()&&(G=z.node.openTagString(b(m).clone().removeAttr("id").get(0))));do{if(C=C.parentNode,!I||C!=m||I&&!z.node.isBlock(m)){if(B+=z.node.closeTagString(C),C==m&&z.node.isBlock(m)){F=G+F}else{var h="A"==C.tagName&&r(E,C)?"fr-to-remove":"";F=z.node.openTagString(b(C).clone().addClass(h).get(0))+F}}}while(C!=m);H=B+H+F+(E.parentNode==m&&z.node.isBlock(m)?"":b.FE.INVISIBLE_SPACE)+b.FE.MARKERS,z.node.isBlock(m)&&!b(m).find("*:last").is("br")&&b(m).append("<br/>"),b(E).after('<span id="fr-break"></span>'),b(E).remove(),m.nextSibling&&!z.node.isBlock(m.nextSibling)||z.node.isBlock(m)||b(m).after("<br>"),J=(J=!I&&z.node.isBlock(m)?z.node.openTagString(m)+b(m).html()+D:z.node.openTagString(m)+b(m).html()+z.node.closeTagString(m)).replace(/<span id="fr-break"><\/span>/g,H),b(m).replaceWith(J)}}function k(E,I,u){var g=z.node.deepestParent(E,[],!u);if(null==g){z.html.defaultTag()&&E.parentNode===z.el?b(E).replaceWith("<"+z.html.defaultTag()+">"+b.FE.MARKERS+"<br></"+z.html.defaultTag()+">"):(E.nextSibling&&!z.node.isBlock(E.nextSibling)||b(E).after("<br>"),b(E).replaceWith("<br>"+b.FE.MARKERS))}else{var m=E,C="";"PRE"==g.tagName&&(I=!0),z.node.isBlock(g)&&!I||(C="<br>");var H="",J="";do{var B=m;if(m=m.parentNode,"BLOCKQUOTE"==g.tagName&&z.node.isEmpty(B)&&!z.node.hasClass(B,"fr-marker")&&0<b(B).find(E).length&&b(B).after(E),("BLOCKQUOTE"!=g.tagName||!r(E,m)&&!t(E,m))&&(!I||m!=g||I&&!z.node.isBlock(g))){H+=z.node.closeTagString(m);var F="A"==m.tagName&&r(E,m)?"fr-to-remove":"";J=z.node.openTagString(b(m).clone().addClass(F).removeAttr("id").get(0))+J}}while(m!=g);var G=g==E.parentNode&&z.node.isBlock(g)||E.nextSibling;if("BLOCKQUOTE"==g.tagName){E.previousSibling&&z.node.isBlock(E.previousSibling)&&E.nextSibling&&"BR"==E.nextSibling.tagName&&(b(E.nextSibling).after(E),E.nextSibling&&"BR"==E.nextSibling.tagName&&b(E.nextSibling).remove());var D=z.html.defaultTag();C=H+C+(D?"<"+D+">":"")+b.FE.MARKERS+"<br>"+(D?"</"+D+">":"")+J}else{C=H+C+J+(G?"":b.FE.INVISIBLE_SPACE)+b.FE.MARKERS}b(E).replaceWith('<span id="fr-break"></span>');var h=z.node.openTagString(g)+b(g).html()+z.node.closeTagString(g);h=h.replace(/<span id="fr-break"><\/span>/g,C),b(g).replaceWith(h)}}return{enter:function(c){var g=z.markers.insert();if(!g){return !0}z.el.normalize();var d=!1;0<b(g).parentsUntil(z.$el,"BLOCKQUOTE").length&&(d=!(c=!1)),b(g).parentsUntil(z.$el,"TD, TH").length&&(d=!1),q(g)?!A(g)||c||d?e(g,c,d):z.cursorLists._endEnter(g):y(g)?!A(g)||c||d?function f(m,C,u){var B,l=z.node.deepestParent(m,[],!u);if(l&&"TABLE"==l.tagName){return b(l).find("td:first, th:first").prepend(m),f(m,C,u)}if(l&&"BLOCKQUOTE"==l.tagName){if(t(m,l)){return(B=z.html.defaultTag())?b(l).before("<"+B+">"+b.FE.MARKERS+"<br></"+B+">"):b(l).before(b.FE.MARKERS+"<br>"),b(m).remove(),!1}r(m,l)?e(m,C,!0):k(m,C,!0)}if(null==l){(B=z.html.defaultTag())&&z.node.isElement(m.parentNode)?b(m).replaceWith("<"+B+">"+b.FE.MARKERS+"<br></"+B+">"):b(m).replaceWith("<br>"+b.FE.MARKERS)}else{if(z.node.isBlock(l)){if("PRE"==l.tagName&&(C=!0),C){b(m).remove(),b(l).prepend("<br>"+b.FE.MARKERS)}else{if(z.node.isEmpty(l,!0)){return e(m,C,u)}if(z.opts.keepFormatOnDelete){for(var h=m,p=b.FE.INVISIBLE_SPACE;h!=l&&!z.node.isElement(h);){h=h.parentNode,p=z.node.openTagString(h)+p+z.node.closeTagString(h)}b(l).before(p)}else{b(l).before(z.node.openTagString(b(l).clone().removeAttr("id").get(0))+"<br>"+z.node.closeTagString(l))}}}else{b(l).before("<br>")}b(m).remove()}}(g,c,d):z.cursorLists._startEnter(g):!A(g)||c||d?k(g,c,d):z.cursorLists._middleEnter(g),z.$el.find(".fr-to-remove").each(function(){for(var i=z.node.contents(this),h=0;h<i.length;h++){i[h].nodeType==Node.TEXT_NODE&&(i[h].textContent=i[h].textContent.replace(/\u200B/g,""))}b(this).replaceWith(this.innerHTML)}),z.html.fillEmptyBlocks(!0),z.opts.htmlUntouched||(z.html.cleanEmptyTags(),z.clean.lists()),z.spaces.normalizeAroundCursor(),z.selection.restore()},backspace:function(){var f=!1,c=z.markers.insert();if(!c){return !0}for(var h=c.parentNode;h&&!z.node.isElement(h);){if("false"===h.getAttribute("contenteditable")){return b(c).replaceWith(b.FE.MARKERS),z.selection.restore(),!1}if("true"===h.getAttribute("contenteditable")){break}h=h.parentNode}z.el.normalize();var d=c.previousSibling;if(d){var g=d.textContent;g&&g.length&&8203==g.charCodeAt(g.length-1)&&(1==g.length?b(d).remove():d.textContent=d.textContent.substr(0,g.length-w(g)))}return q(c)?f=x(c):y(c)?A(c)&&t(c,b(c).parents("li:first").get(0))?z.cursorLists._backspace(c):function(C){for(var p=0<b(C).parentsUntil(z.$el,"BLOCKQUOTE").length,E=z.node.deepestParent(C,[],!p),B=E;E&&!E.previousSibling&&"BLOCKQUOTE"!=E.tagName&&E.parentElement!=z.el&&!z.node.hasClass(E.parentElement,"fr-inner")&&b.FE.SIMPLE_ENTER_TAGS.indexOf(E.parentElement.tagName)<0;){E=E.parentElement}if(E&&"BLOCKQUOTE"==E.tagName){var D=z.node.deepestParent(C,[b(C).parentsUntil(z.$el,"BLOCKQUOTE").get(0)]);D&&D.previousSibling&&(B=E=D)}if(null!==E){var m,l=E.previousSibling;if(z.node.isBlock(E)&&z.node.isEditable(E)&&l&&b.FE.NO_DELETE_TAGS.indexOf(l.tagName)<0){if(z.node.isDeletable(l)){b(l).remove(),b(C).replaceWith(b.FE.MARKERS)}else{if(z.node.isEditable(l)){if(z.node.isBlock(l)){if(z.node.isEmpty(l)&&!z.node.isList(l)){b(l).remove(),b(C).after(z.opts.keepFormatOnDelete?b.FE.INVISIBLE_SPACE:"")}else{if(z.node.isList(l)&&(l=b(l).find("li:last").get(0)),(m=z.node.contents(l)).length&&"BR"==m[m.length-1].tagName&&b(m[m.length-1]).remove(),"BLOCKQUOTE"==l.tagName&&"BLOCKQUOTE"!=E.tagName){for(m=z.node.contents(l);m.length&&z.node.isBlock(m[m.length-1]);){l=m[m.length-1],m=z.node.contents(l)}}else{if("BLOCKQUOTE"!=l.tagName&&"BLOCKQUOTE"==E.tagName){for(m=z.node.contents(E);m.length&&z.node.isBlock(m[0]);){E=m[0],m=z.node.contents(E)}}}if(z.node.isEmpty(E)){b(C).remove(),z.selection.setAtEnd(l,!0)}else{b(C).replaceWith(b.FE.MARKERS);var u=l.childNodes;z.node.isBlock(u[u.length-1])?b(u[u.length-1]).append(B.innerHTML):b(l).append(B.innerHTML)}b(B).remove(),z.node.isEmpty(E)&&b(E).remove()}}else{b(C).replaceWith(b.FE.MARKERS),"BLOCKQUOTE"==E.tagName&&l.nodeType==Node.ELEMENT_NODE?b(l).remove():(b(l).after(z.node.isEmpty(E)?"":b(E).html()),b(E).remove(),"BR"==l.tagName&&b(l).remove())}}}}}}(c):f=x(c),b(c).remove(),v(),z.html.fillEmptyBlocks(!0),z.opts.htmlUntouched||(z.html.cleanEmptyTags(),z.clean.lists(),z.spaces.normalizeAroundCursor()),z.selection.restore(),f},del:function(){var d=z.markers.insert();if(!d){return !1}if(z.el.normalize(),q(d)){if(A(d)){if(0===b(d).parents("li:first").find("ul, ol").length){z.cursorLists._del(d)}else{var c=b(d).parents("li:first").find("ul:first, ol:first").find("li:first");(c=c.find(z.html.blockTagsQuery()).get(-1)||c).prepend(d),z.cursorLists._backspace(d)}}else{o(d)}}else{y(d),j(d)}b(d).remove(),v(),z.html.fillEmptyBlocks(!0),z.opts.htmlUntouched||(z.html.cleanEmptyTags(),z.clean.lists()),z.spaces.normalizeAroundCursor(),z.selection.restore()},isAtEnd:r,isAtStart:t}},b.FE.ENTER_P=0,b.FE.ENTER_DIV=1,b.FE.ENTER_BR=2,b.FE.KEYCODE={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,FF_HYPHEN:173,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,HYPHEN:189,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,IME:229},b.extend(b.FE.DEFAULTS,{enter:b.FE.ENTER_P,multiLine:!0,tabSpaces:0}),b.FE.MODULES.keys=function(F){var L,C,z,M=!1;function K(){if(F.browser.mozilla&&F.selection.isCollapsed()&&!M){var d=F.selection.ranges(0),c=d.startContainer,f=d.startOffset;c&&c.nodeType==Node.TEXT_NODE&&f<=c.textContent.length&&0<f&&32==c.textContent.charCodeAt(f-1)&&(F.selection.save(),F.spaces.normalize(),F.selection.restore())}}function x(){F.selection.isFull()&&setTimeout(function(){var c=F.html.defaultTag();c?F.$el.html("<"+c+">"+b.FE.MARKERS+"<br/></"+c+">"):F.$el.html(b.FE.MARKERS+"<br/>"),F.selection.restore(),F.placeholder.refresh(),F.button.bulkRefresh(),F.undo.saveStep()},0)}function B(){M=!1}function G(){M=!1}function J(){var c=F.html.defaultTag();c?F.$el.html("<"+c+">"+b.FE.MARKERS+"<br/></"+c+">"):F.$el.html(b.FE.MARKERS+"<br/>"),F.selection.restore()}function O(l){var f=F.selection.element();if(f&&0<=["INPUT","TEXTAREA"].indexOf(f.tagName)){return !0}if(l&&I(l.which)){return !0}F.events.disableBlur(),null;var p=l.which;if(16===p){return !0}if((L=p)===b.FE.KEYCODE.IME){return M=!0}M=!1;var h,m,d,c=H(p)&&!q(l)&&!l.altKey,g=p==b.FE.KEYCODE.BACKSPACE||p==b.FE.KEYCODE.DELETE;if((F.selection.isFull()&&!F.opts.keepFormatOnDelete&&!F.placeholder.isVisible()||g&&F.placeholder.isVisible()&&F.opts.keepFormatOnDelete)&&(c||g)&&(J(),!H(p))){return l.preventDefault(),!0}p==b.FE.KEYCODE.ENTER?l.shiftKey?((d=l).preventDefault(),d.stopPropagation(),F.opts.multiLine&&(F.selection.isCollapsed()||F.selection.remove(),F.cursor.enter(!0))):(m=l,F.opts.multiLine?(F.helpers.isIOS()||(m.preventDefault(),m.stopPropagation()),F.selection.isCollapsed()||F.selection.remove(),F.cursor.enter()):(m.preventDefault(),m.stopPropagation())):p===b.FE.KEYCODE.BACKSPACE&&(l.metaKey||l.ctrlKey)?setTimeout(function(){F.events.disableBlur(),F.events.focus()},0):p!=b.FE.KEYCODE.BACKSPACE||q(l)||l.altKey?p!=b.FE.KEYCODE.DELETE||q(l)||l.altKey||l.shiftKey?p==b.FE.KEYCODE.SPACE?function(s){var i=F.selection.element();if(!F.helpers.isMobile()&&i&&"A"==i.tagName){s.preventDefault(),s.stopPropagation(),F.selection.isCollapsed()||F.selection.remove();var u=F.markers.insert();if(u){var o=u.previousSibling;!u.nextSibling&&u.parentNode&&"A"==u.parentNode.tagName?(u.parentNode.insertAdjacentHTML("afterend","&nbsp;"+b.FE.MARKERS),u.parentNode.removeChild(u)):(o&&o.nodeType==Node.TEXT_NODE&&1==o.textContent.length&&160==o.textContent.charCodeAt(0)?o.textContent=o.textContent+" ":u.insertAdjacentHTML("beforebegin","&nbsp;"),u.outerHTML=b.FE.MARKERS),F.selection.restore()}}}(l):p==b.FE.KEYCODE.TAB?function(o){if(0<F.opts.tabSpaces){if(F.selection.isCollapsed()){F.undo.saveStep(),o.preventDefault(),o.stopPropagation();for(var i="",r=0;r<F.opts.tabSpaces;r++){i+="&nbsp;"}F.html.insert(i),F.placeholder.refresh(),F.undo.saveStep()}else{o.preventDefault(),o.stopPropagation(),o.shiftKey?F.commands.outdent():F.commands.indent()}}}(l):q(l)||!H(l.which)||F.selection.isCollapsed()||l.ctrlKey||l.altKey||F.selection.remove():F.placeholder.isVisible()?(F.opts.keepFormatOnDelete||J(),l.preventDefault(),l.stopPropagation()):((h=l).preventDefault(),h.stopPropagation(),""===F.selection.text()?F.cursor.del():F.selection.remove(),F.placeholder.refresh()):F.placeholder.isVisible()?(F.opts.keepFormatOnDelete||J(),l.preventDefault(),l.stopPropagation()):function(n){if(F.selection.isCollapsed()){if(F.cursor.backspace(),F.helpers.isIOS()){var i=F.selection.ranges(0);i.deleteContents(),i.insertNode(document.createTextNode("\u200b")),F.selection.get().modify("move","forward","character")}else{n.preventDefault(),n.stopPropagation()}}else{n.preventDefault(),n.stopPropagation(),F.selection.remove()}F.placeholder.refresh()}(l),F.events.enableBlur()}function y(){if(!F.$wp){return !0}var c;F.opts.height||F.opts.heightMax?(c=F.position.getBoundingRect().top,(F.helpers.isIOS()||F.helpers.isAndroid())&&(c-=F.helpers.scrollTop()),F.opts.iframe&&(c+=F.$iframe.offset().top),c>F.$wp.offset().top-F.helpers.scrollTop()+F.$wp.height()-20&&F.$wp.scrollTop(c+F.$wp.scrollTop()-(F.$wp.height()+F.$wp.offset().top)+F.helpers.scrollTop()+20)):(c=F.position.getBoundingRect().top,F.opts.toolbarBottom&&(c+=F.opts.toolbarStickyOffset),(F.helpers.isIOS()||F.helpers.isAndroid())&&(c-=F.helpers.scrollTop()),F.opts.iframe&&(c+=F.$iframe.offset().top,c-=F.helpers.scrollTop()),(c+=F.opts.toolbarStickyOffset)>F.o_win.innerHeight-20&&b(F.o_win).scrollTop(c+F.helpers.scrollTop()-F.o_win.innerHeight+20),c=F.position.getBoundingRect().top,F.opts.toolbarBottom||(c-=F.opts.toolbarStickyOffset),(F.helpers.isIOS()||F.helpers.isAndroid())&&(c-=F.helpers.scrollTop()),F.opts.iframe&&(c+=F.$iframe.offset().top,c-=F.helpers.scrollTop()),c<F.$tb.height()+20&&b(F.o_win).scrollTop(c+F.helpers.scrollTop()-F.$tb.height()-20))}function A(f){var c=F.selection.element();if(c&&0<=["INPUT","TEXTAREA"].indexOf(c.tagName)){return !0}if(f&&0===f.which&&L&&(f.which=L),F.helpers.isAndroid()&&F.browser.mozilla){return !0}if(M){return !1}if(f&&F.helpers.isIOS()&&f.which==b.FE.KEYCODE.ENTER&&F.doc.execCommand("undo"),!F.selection.isCollapsed()){return !0}if(f&&(f.which===b.FE.KEYCODE.META||f.which==b.FE.KEYCODE.CTRL)){return !0}if(f&&I(f.which)){return !0}if(f&&!F.helpers.isIOS()&&(f.which==b.FE.KEYCODE.ENTER||f.which==b.FE.KEYCODE.BACKSPACE||37<=f.which&&f.which<=40&&!F.browser.msie)){try{y()}catch(g){}}var h,d=F.selection.element();!function(l){if(!l){return !1}var i=l.innerHTML;return !!((i=i.replace(/<span[^>]*? class\s*=\s*["']?fr-marker["']?[^>]+>\u200b<\/span>/gi,""))&&/\u200B/.test(i)&&0<i.replace(/\u200B/gi,"").length)}(d)||F.node.hasClass(d,"fr-marker")||"IFRAME"==d.tagName||(h=d,F.helpers.isIOS()&&0!==((h.textContent||"").match(/[\u3041-\u3096\u30A0-\u30FF\u4E00-\u9FFF\u3130-\u318F\uAC00-\uD7AF]/gi)||[]).length)||(F.selection.save(),function(l){for(var i=F.doc.createTreeWalker(l,NodeFilter.SHOW_TEXT,F.node.filter(function(n){return/\u200B/gi.test(n.textContent)}),!1);i.nextNode();){var m=i.currentNode;m.textContent=m.textContent.replace(/\u200B/gi,"")}}(d),F.selection.restore())}function q(c){if(-1!=navigator.userAgent.indexOf("Mac OS X")){if(c.metaKey&&!c.altKey){return !0}}else{if(c.ctrlKey&&!c.altKey){return !0}}return !1}function I(c){if(c>=b.FE.KEYCODE.ARROW_LEFT&&c<=b.FE.KEYCODE.ARROW_DOWN){return !0}}function H(c){if(c>=b.FE.KEYCODE.ZERO&&c<=b.FE.KEYCODE.NINE){return !0}if(c>=b.FE.KEYCODE.NUM_ZERO&&c<=b.FE.KEYCODE.NUM_MULTIPLY){return !0}if(c>=b.FE.KEYCODE.A&&c<=b.FE.KEYCODE.Z){return !0}if(F.browser.webkit&&0===c){return !0}switch(c){case b.FE.KEYCODE.SPACE:case b.FE.KEYCODE.QUESTION_MARK:case b.FE.KEYCODE.NUM_PLUS:case b.FE.KEYCODE.NUM_MINUS:case b.FE.KEYCODE.NUM_PERIOD:case b.FE.KEYCODE.NUM_DIVISION:case b.FE.KEYCODE.SEMICOLON:case b.FE.KEYCODE.FF_SEMICOLON:case b.FE.KEYCODE.DASH:case b.FE.KEYCODE.EQUALS:case b.FE.KEYCODE.FF_EQUALS:case b.FE.KEYCODE.COMMA:case b.FE.KEYCODE.PERIOD:case b.FE.KEYCODE.SLASH:case b.FE.KEYCODE.APOSTROPHE:case b.FE.KEYCODE.SINGLE_QUOTE:case b.FE.KEYCODE.OPEN_SQUARE_BRACKET:case b.FE.KEYCODE.BACKSLASH:case b.FE.KEYCODE.CLOSE_SQUARE_BRACKET:return !0;default:return !1}}function D(d){var c=d.which;if(q(d)||37<=c&&c<=40||!H(c)&&c!=b.FE.KEYCODE.DELETE&&c!=b.FE.KEYCODE.BACKSPACE&&c!=b.FE.KEYCODE.ENTER&&c!=b.FE.KEYCODE.IME){return !0}C||(z=F.snapshot.get(),F.undo.canDo()||F.undo.saveStep()),clearTimeout(C),C=setTimeout(function(){C=null,F.undo.saveStep()},Math.max(250,F.opts.typingTimer))}function w(d){var c=d.which;if(q(d)||37<=c&&c<=40){return !0}z&&C?(F.undo.saveStep(z),z=null):void 0!==c&&0!==c||z||C||F.undo.saveStep()}function k(d){if(d&&"BR"==d.tagName){return !1}try{return 0===(d.textContent||"").length&&d.querySelector&&!d.querySelector(":scope > br")||d.childNodes&&1==d.childNodes.length&&d.childNodes[0].getAttribute&&("false"==d.childNodes[0].getAttribute("contenteditable")||F.node.hasClass(d.childNodes[0],"fr-img-caption"))}catch(c){return !1}}function N(d){var c=F.el.childNodes,f=F.html.defaultTag();return !(!d.target||d.target===F.el)||(0===c.length||void (F.$el.outerHeight()-d.offsetY<=10?k(c[c.length-1])&&(f?F.$el.append("<"+f+">"+b.FE.MARKERS+"<br></"+f+">"):F.$el.append(b.FE.MARKERS+"<br>"),F.selection.restore(),y()):d.offsetY<=10&&k(c[0])&&(f?F.$el.prepend("<"+f+">"+b.FE.MARKERS+"<br></"+f+">"):F.$el.prepend(b.FE.MARKERS+"<br>"),F.selection.restore(),y())))}function j(){C&&clearTimeout(C)}return{_init:function(){F.events.on("keydown",D),F.events.on("input",K),F.events.on("mousedown",G),F.events.on("keyup input",w),F.events.on("keypress",B),F.events.on("keydown",O),F.events.on("keyup",A),F.events.on("destroy",j),F.events.on("html.inserted",A),F.events.on("cut",x),F.events.on("click",N)},ctrlKey:q,isCharacter:H,isArrow:I,forceUndo:function(){C&&(clearTimeout(C),F.undo.saveStep(),z=null)},isIME:function(){return M},isBrowserAction:function(d){var c=d.which;return q(d)||c==b.FE.KEYCODE.F5},positionCaret:y}},b.FE.MODULES.accessibility=function(I){var F=!0;function x(c){c&&c.length&&!I.$el.find('[contenteditable="true"]').is(":focus")&&(c.data("blur-event-set")||c.parents(".fr-popup").length||(I.events.$on(c,"blur",function(){var d=c.parents(".fr-toolbar, .fr-popup").data("instance")||I;d.events.blurActive()&&d.events.trigger("blur"),setTimeout(function(){d.events.enableBlur()},100)},!0),c.data("blur-event-set",!0)),(c.parents(".fr-toolbar, .fr-popup").data("instance")||I).events.disableBlur(),c.focus(),I.shared.$f_el=c)}function z(f,c){var g=c?"last":"first",d=f.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible")[g]();if(d.length){return x(d),!0}}function M(c){return c.is("input, textarea, select")&&w(),I.events.disableBlur(),c.focus(),!0}function k(f,c){var h=f.find("input, textarea, button, select").filter(":visible").not(":disabled").filter(c?":last":":first");if(h.length){return M(h)}if(I.shared.with_kb){var d=f.find(".fr-active-item:visible:first");if(d.length){return M(d)}var g=f.find("[tabIndex]:visible:first");if(g.length){return M(g)}}}function w(){0===I.$el.find(".fr-marker").length&&I.core.hasFocus()&&I.selection.save()}function D(){var d=I.popups.areVisible();if(d){var c=d.find(".fr-buttons");return c.find("button:focus, .fr-group span:focus").length?!z(d.data("instance").$tb):!z(c)}return !z(I.$tb)}function K(){var c=null;return I.shared.$f_el.is(".fr-dropdown.fr-active")?c=I.shared.$f_el:I.shared.$f_el.closest(".fr-dropdown-menu").prev().is(".fr-dropdown.fr-active")&&(c=I.shared.$f_el.closest(".fr-dropdown-menu").prev()),c}function B(h,f,m){if(I.shared.$f_el){var g=K();g&&(I.button.click(g),I.shared.$f_el=g);var l=h.find("button:visible:not(.fr-disabled), .fr-group span.fr-command:visible"),d=l.index(I.shared.$f_el);if(0===d&&!m||d==l.length-1&&m){var c;if(f){if(h.parent().is(".fr-popup")){c=!k(h.parent().children().not(".fr-buttons"),!m)}!1===c&&(I.shared.$f_el=null)}f&&!1===c||z(h,!m)}else{x(b(l.get(d+(m?1:-1))))}return !1}}function L(d,c){return B(d,c,!0)}function H(d,c){return B(d,c)}function G(d){if(I.shared.$f_el){var c;if(I.shared.$f_el.is(".fr-dropdown.fr-active")){return x(c=d?I.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").first():I.shared.$f_el.next().find(".fr-command:not(.fr-disabled)").last()),!1}if(I.shared.$f_el.is("a.fr-command")){return(c=d?I.shared.$f_el.closest("li").nextAll(":visible:first").find(".fr-command:not(.fr-disabled)").first():I.shared.$f_el.closest("li").prevAll(":visible:first").find(".fr-command:not(.fr-disabled)").first()).length||(c=d?I.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").first():I.shared.$f_el.closest(".fr-dropdown-menu").find(".fr-command:not(.fr-disabled)").last()),x(c),!1}}}function C(){if(I.shared.$f_el){if(I.shared.$f_el.hasClass("fr-dropdown")){I.button.click(I.shared.$f_el)}else{if(I.shared.$f_el.is("button.fr-back")){I.opts.toolbarInline&&(I.events.disableBlur(),I.events.focus());var d=I.popups.areVisible(I);d&&(I.shared.with_kb=!1),I.button.click(I.shared.$f_el),j(d)}else{if(I.events.disableBlur(),I.button.click(I.shared.$f_el),I.shared.$f_el.attr("data-popup")){var c=I.popups.areVisible(I);c&&c.data("popup-button",I.shared.$f_el)}else{if(I.shared.$f_el.attr("data-modal")){var f=I.modals.areVisible(I);f&&f.data("modal-button",I.shared.$f_el)}}I.shared.$f_el=null}}return !1}}function q(){I.shared.$f_el&&(I.events.disableBlur(),I.shared.$f_el.blur(),I.shared.$f_el=null),!1!==I.events.trigger("toolbar.focusEditor")&&(I.events.disableBlur(),I.$el.focus(),I.events.focus())}function y(c){c&&c.length&&(I.events.$on(c,"keydown",function(f){if(!b(f.target).is("a.fr-command, button.fr-command, .fr-group span.fr-command")){return !0}var d=c.parents(".fr-popup").data("instance")||c.data("instance")||I;I.shared.with_kb=!0;var g=d.accessibility.exec(f,c);return I.shared.with_kb=!1,g},!0),I.events.$on(c,"mouseenter","[tabIndex]",function(f){var d=c.parents(".fr-popup").data("instance")||c.data("instance")||I;if(!F){return f.stopPropagation(),void f.preventDefault()}var g=b(f.currentTarget);d.shared.$f_el&&d.shared.$f_el.not(g)&&d.accessibility.focusEditor()},!0))}function j(d){var c=d.data("popup-button");c&&setTimeout(function(){x(c),d.data("popup-button",null)},0)}function A(d){var c=I.popups.areVisible(d);c&&c.data("popup-button",null)}function J(f){var c=-1!=navigator.userAgent.indexOf("Mac OS X")?f.metaKey:f.ctrlKey;if(f.which==b.FE.KEYCODE.F10&&!c&&!f.shiftKey&&f.altKey){I.shared.with_kb=!0;var g=I.popups.areVisible(I),d=!1;return g&&(d=k(g.children().not(".fr-buttons"))),d||D(),I.shared.with_kb=!1,f.preventDefault(),f.stopPropagation(),!1}return !0}return{_init:function(){I.$wp?I.events.on("keydown",J,!0):I.events.$on(I.$win,"keydown",J,!0),I.events.on("mousedown",function(c){A(I),I.shared.$f_el&&(I.accessibility.restoreSelection(),c.stopPropagation(),I.events.disableBlur(),I.shared.$f_el=null)},!0),I.events.on("blur",function(){I.shared.$f_el=null,A(I)},!0)},registerPopup:function(g){var h,l,f=I.popups.get(g),i=(h=g,l=I.popups.get(h),{_tiKeydown:function(v){var N=l.data("instance")||I;if(!1===N.events.trigger("popup.tab",[v])){return !1}var m=v.which,c=l.find(":focus:first");if(b.FE.KEYCODE.TAB==m){v.preventDefault();var d=l.children().not(".fr-buttons"),u=d.find("input, textarea, button, select").filter(":visible").not(".fr-no-touch input, .fr-no-touch textarea, .fr-no-touch button, .fr-no-touch select, :disabled").toArray(),E=u.indexOf(this)+(v.shiftKey?-1:1);if(0<=E&&E<u.length){return N.events.disableBlur(),b(u[E]).focus(),v.stopPropagation(),!1}var O=l.find(".fr-buttons");if(O.length&&z(O,!!v.shiftKey)){return v.stopPropagation(),!1}if(k(d)){return v.stopPropagation(),!1}}else{if(b.FE.KEYCODE.ENTER!=m||!v.target||"TEXTAREA"===v.target.tagName){return b.FE.KEYCODE.ESC==m?(v.preventDefault(),v.stopPropagation(),N.accessibility.restoreSelection(),N.popups.isVisible(h)&&l.find(".fr-back:visible").length?(N.opts.toolbarInline&&(N.events.disableBlur(),N.events.focus()),N.button.exec(l.find(".fr-back:visible:first")),j(l)):N.popups.isVisible(h)&&l.find(".fr-dismiss:visible").length?N.button.exec(l.find(".fr-dismiss:visible:first")):(N.popups.hide(h),N.opts.toolbarInline&&N.toolbar.showInline(null,!0),j(l)),!1):b.FE.KEYCODE.SPACE==m&&(c.is(".fr-submit")||c.is(".fr-dismiss"))?(v.preventDefault(),v.stopPropagation(),N.events.disableBlur(),N.button.exec(c),!0):N.keys.isBrowserAction(v)?void v.stopPropagation():c.is("input[type=text], textarea")?void v.stopPropagation():b.FE.KEYCODE.SPACE==m&&(c.is(".fr-link-attr")||c.is("input[type=file]"))?void v.stopPropagation():(v.stopPropagation(),v.preventDefault(),!1)}var p=null;0<l.find(".fr-submit:visible").length?p=l.find(".fr-submit:visible:first"):l.find(".fr-dismiss:visible").length&&(p=l.find(".fr-dismiss:visible:first")),p&&(v.preventDefault(),v.stopPropagation(),N.events.disableBlur(),N.button.exec(p))}},_tiMouseenter:function(){var c=l.data("instance")||I;A(c)}});y(f.find(".fr-buttons")),I.events.$on(f,"mouseenter","tabIndex",i._tiMouseenter,!0),I.events.$on(f.children().not(".fr-buttons"),"keydown","[tabIndex]",i._tiKeydown,!0),I.popups.onHide(g,function(){(f.data("instance")||I).accessibility.restoreSelection()}),I.popups.onShow(g,function(){F=!1,setTimeout(function(){F=!0},0)})},registerToolbar:y,focusToolbarElement:x,focusToolbar:z,focusContent:k,focusPopup:function(c){var d=c.children().not(".fr-buttons");d.data("mouseenter-event-set")||(I.events.$on(d,"mouseenter","[tabIndex]",function(g){var f=c.data("instance")||I;if(!F){return g.stopPropagation(),void g.preventDefault()}var h=d.find(":focus:first");h.length&&!h.is("input, button, textarea, select")&&(f.events.disableBlur(),h.blur(),f.events.disableBlur(),f.events.focus())}),d.data("mouseenter-event-set",!0)),!k(d)&&I.shared.with_kb&&z(c.find(".fr-buttons"))},focusModal:function(c){I.core.hasFocus()||(I.events.disableBlur(),I.events.focus()),I.accessibility.saveSelection(),I.events.disableBlur(),I.$el.blur(),I.selection.clear(),I.events.disableBlur(),I.shared.with_kb?c.find(".fr-command[tabIndex], [tabIndex]").first().focus():c.find("[tabIndex]:first").focus()},focusEditor:q,focusPopupButton:j,focusModalButton:function(d){var c=d.data("modal-button");c&&setTimeout(function(){x(c),d.data("modal-button",null)},0)},hasFocus:function(){return null!=I.shared.$f_el},exec:function(f,c){var h=-1!=navigator.userAgent.indexOf("Mac OS X")?f.metaKey:f.ctrlKey,d=f.which,g=!1;return d!=b.FE.KEYCODE.TAB||h||f.shiftKey||f.altKey?d!=b.FE.KEYCODE.ARROW_RIGHT||h||f.shiftKey||f.altKey?d!=b.FE.KEYCODE.TAB||h||!f.shiftKey||f.altKey?d!=b.FE.KEYCODE.ARROW_LEFT||h||f.shiftKey||f.altKey?d!=b.FE.KEYCODE.ARROW_UP||h||f.shiftKey||f.altKey?d!=b.FE.KEYCODE.ARROW_DOWN||h||f.shiftKey||f.altKey?d!=b.FE.KEYCODE.ENTER&&d!=b.FE.KEYCODE.SPACE||h||f.shiftKey||f.altKey?d!=b.FE.KEYCODE.ESC||h||f.shiftKey||f.altKey?d!=b.FE.KEYCODE.F10||h||f.shiftKey||!f.altKey||(g=D()):g=function(l){if(I.shared.$f_el){var i=K();return i?(I.button.click(i),x(i)):l.parent().find(".fr-back:visible").length?(I.shared.with_kb=!1,I.opts.toolbarInline&&(I.events.disableBlur(),I.events.focus()),I.button.exec(l.parent().find(".fr-back:visible:first")),j(l.parent())):I.shared.$f_el.is("button, .fr-group span")&&(l.parent().is(".fr-popup")?(I.accessibility.restoreSelection(),I.shared.$f_el=null,!1!==I.events.trigger("toolbar.esc")&&(I.popups.hide(l.parent()),I.opts.toolbarInline&&I.toolbar.showInline(null,!0),j(l.parent()))):q()),!1}}(c):g=C():g=I.shared.$f_el&&I.shared.$f_el.is(".fr-dropdown:not(.fr-active)")?C():G(!0):g=G():g=H(c):g=H(c,!0):g=L(c):g=L(c,!0),I.shared.$f_el||g!==undefined||(g=!0),!g&&I.keys.isBrowserAction(f)&&(g=!0),!!g||(f.preventDefault(),f.stopPropagation(),!1)},saveSelection:w,restoreSelection:function(){I.$el.find(".fr-marker").length&&(I.events.disableBlur(),I.selection.restore(),I.events.enableBlur())}}},b.FE.MODULES.format=function(k){function j(l,f){var m="<"+l;for(var h in f){f.hasOwnProperty(h)&&(m+=" "+h+'="'+f[h]+'"')}return m+=">"}function q(l,f){var m=l;for(var h in f){f.hasOwnProperty(h)&&(m+="id"==h?"#"+f[h]:"class"==h?"."+f[h]:"["+h+'="'+f[h]+'"]')}return m}function d(h,f){return !(!h||h.nodeType!=Node.ELEMENT_NODE)&&(h.matches||h.matchesSelector||h.msMatchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector).call(h,f)}function i(v,l,y){if(v){for(;v.nodeType===Node.COMMENT_NODE;){v=v.nextSibling}if(v){if(k.node.isBlock(v)&&"HR"!==v.tagName){return i(v.firstChild,l,y),!1}for(var p=b(j(l,y)).insertBefore(v),x=v;x&&!b(x).is(".fr-marker")&&0===b(x).find(".fr-marker").length&&"UL"!=x.tagName&&"OL"!=x.tagName;){var h=x;x=x.nextSibling,p.append(h)}if(x){(b(x).find(".fr-marker").length||"UL"==x.tagName||"OL"==x.tagName)&&i(x.firstChild,l,y)}else{for(var f=p.get(0).parentNode;f&&!f.nextSibling&&!k.node.isElement(f);){f=f.parentNode}if(f){var m=f.nextSibling;m&&(k.node.isBlock(m)?"HR"===m.tagName?i(m.nextSibling,l,y):i(m.firstChild,l,y):i(m,l,y))}}p.is(":empty")&&p.remove()}}}function g(m,h){var v;if(void 0===h&&(h={}),h.style&&delete h.style,k.selection.isCollapsed()){k.markers.insert(),k.$el.find(".fr-marker").replaceWith(j(m,h)+b.FE.INVISIBLE_SPACE+b.FE.MARKERS+("</"+m+">")),k.selection.restore()}else{var l;k.selection.save(),i(k.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,m,h);do{for(l=k.$el.find(q(m,h)+" > "+q(m,h)),v=0;v<l.length;v++){l[v].outerHTML=l[v].innerHTML}}while(l.length);k.el.normalize();var p=k.el.querySelectorAll(".fr-marker");for(v=0;v<p.length;v++){var f=b(p[v]);!0===f.data("type")?d(f.get(0).nextSibling,q(m,h))&&f.next().prepend(f):d(f.get(0).previousSibling,q(m,h))&&f.prev().append(f)}k.selection.restore()}}function w(x,A,m,f){if(!f){var h=!1;if(!0===x.data("type")){for(;k.node.isFirstSibling(x.get(0))&&!x.parent().is(k.$el)&&!x.parent().is("ol")&&!x.parent().is("ul");){x.parent().before(x),h=!0}}else{if(!1===x.data("type")){for(;k.node.isLastSibling(x.get(0))&&!x.parent().is(k.$el)&&!x.parent().is("ol")&&!x.parent().is("ul");){x.parent().after(x),h=!0}}}if(h){return !0}}if(x.parents(A).length||void 0===A){var v="",z="",B=x.parent();if(B.is(k.$el)||k.node.isBlock(B.get(0))){return !1}for(;!k.node.isBlock(B.parent().get(0))&&(void 0===A||void 0!==A&&!d(B.get(0),q(A,m)));){v+=k.node.closeTagString(B.get(0)),z=k.node.openTagString(B.get(0))+z,B=B.parent()}var p=x.get(0).outerHTML;x.replaceWith('<span id="mark"></span>');var y=B.html().replace(/<span id="mark"><\/span>/,v+k.node.closeTagString(B.get(0))+z+p+v+k.node.openTagString(B.get(0))+z);return B.replaceWith(k.node.openTagString(B.get(0))+y+k.node.closeTagString(B.get(0))),!0}return !1}function c(z,m){void 0===m&&(m={}),m.style&&delete m.style;var f=k.selection.isCollapsed();k.selection.save();for(var h=!0;h;){h=!1;for(var v=k.$el.find(".fr-marker"),y=0;y<v.length;y++){var A=b(v[y]),p=null;if(A.attr("data-cloned")||f||(p=A.clone().removeClass("fr-marker").addClass("fr-clone"),!0===A.data("type")?A.attr("data-cloned",!0).after(p):A.attr("data-cloned",!0).before(p)),w(A,z,m,f)){h=!0;break}}}!function x(J,D,B,C){for(var F=k.node.contents(J.get(0)),I=0;I<F.length;I++){var K=F[I];if(k.node.hasClass(K,"fr-marker")){D=(D+1)%2}else{if(D){if(0<b(K).find(".fr-marker").length){D=x(b(K),D,B,C)}else{for(var E=b(K).find(B||"*:not(a):not(br)"),G=E.length-1;0<=G;G--){var H=E[G];k.node.isBlock(H)||k.node.isVoid(H)||void 0!==B&&!d(H,q(B,C))?k.node.isBlock(H)&&void 0===B&&"TABLE"!=K.tagName&&k.node.clearAttributes(H):k.node.hasClass(H,"fr-clone")||(H.outerHTML=H.innerHTML)}void 0===B&&K.nodeType==Node.ELEMENT_NODE&&!k.node.isVoid(K)||d(K,q(B,C))?b(K).replaceWith(K.innerHTML):void 0===B&&K.nodeType==Node.ELEMENT_NODE&&k.node.isBlock(K)&&"TABLE"!=K.tagName&&k.node.clearAttributes(K)}}else{0<b(K).find(".fr-marker").length&&(D=x(b(K),D,B,C))}}}return D}(k.$el,0,z,m),f||(k.$el.find(".fr-marker").remove(),k.$el.find(".fr-clone").removeClass("fr-clone").addClass("fr-marker")),f&&k.$el.find(".fr-marker").before(b.FE.INVISIBLE_SPACE).after(b.FE.INVISIBLE_SPACE),k.html.cleanEmptyTags(),k.el.normalize(),k.selection.restore()}function u(C,H){var x,h,v,z,F,I=null;if(k.selection.isCollapsed()){k.markers.insert();var y=(h=k.$el.find(".fr-marker")).parent();if(k.node.openTagString(y.get(0))=='<span style="'+C+": "+y.css(C)+';">'){if(k.node.isEmpty(y.get(0))){I=b('<span style="'+C+": "+H+';">'+b.FE.INVISIBLE_SPACE+b.FE.MARKERS+"</span>"),y.replaceWith(I)}else{var D={};D["style*"]=C+":",w(h,"span",D,!0),h=k.$el.find(".fr-marker"),H?(I=b('<span style="'+C+": "+H+';">'+b.FE.INVISIBLE_SPACE+b.FE.MARKERS+"</span>"),h.replaceWith(I)):h.replaceWith(b.FE.INVISIBLE_SPACE+b.FE.MARKERS)}k.html.cleanEmptyTags()}else{k.node.isEmpty(y.get(0))&&y.is("span")?(h.replaceWith(b.FE.MARKERS),y.css(C,H)):(I=b('<span style="'+C+": "+H+';">'+b.FE.INVISIBLE_SPACE+b.FE.MARKERS+"</span>"),h.replaceWith(I))}I&&s(I,C,H)}else{if(k.selection.save(),null==H||"color"==C&&0<k.$el.find(".fr-marker").parents("u, a").length){var E=k.$el.find(".fr-marker");for(x=0;x<E.length;x++){if(!0===(h=b(E[x])).data("type")){for(;k.node.isFirstSibling(h.get(0))&&!h.parent().is(k.$el)&&!k.node.isElement(h.parent().get(0))&&!k.node.isBlock(h.parent().get(0));){h.parent().before(h)}}else{for(;k.node.isLastSibling(h.get(0))&&!h.parent().is(k.$el)&&!k.node.isElement(h.parent().get(0))&&!k.node.isBlock(h.parent().get(0));){h.parent().after(h)}}}}var B=k.$el.find('.fr-marker[data-type="true"]').get(0).nextSibling,m={"class":"fr-unprocessed"};for(H&&(m.style=C+": "+H+";"),i(B,"span",m),k.$el.find(".fr-marker + .fr-unprocessed").each(function(){b(this).prepend(b(this).prev())}),k.$el.find(".fr-unprocessed + .fr-marker").each(function(){b(this).prev().append(this)}),(H||"").match(/\dem$/)&&k.$el.find("span.fr-unprocessed").removeClass("fr-unprocessed");0<k.$el.find("span.fr-unprocessed").length;){if((I=k.$el.find("span.fr-unprocessed:first").removeClass("fr-unprocessed")).parent().get(0).normalize(),I.parent().is("span")&&1==I.parent().get(0).childNodes.length){I.parent().css(C,H);var G=I;I=I.parent(),G.replaceWith(G.html())}var A=I.find("span");for(x=A.length-1;0<=x;x--){v=A[x],z=C,F=void 0,(F=b(v)).css(z,""),""===F.attr("style")&&F.replaceWith(F.html())}s(I,C,H)}}!function(){var o;for(;0<k.$el.find(".fr-split:empty").length;){k.$el.find(".fr-split:empty").remove()}k.$el.find(".fr-split").removeClass("fr-split"),k.$el.find('[style=""]').removeAttr("style"),k.$el.find('[class=""]').removeAttr("class"),k.html.cleanEmptyTags(),b(k.$el.find("span").get().reverse()).each(function(){this.attributes&&0!==this.attributes.length||b(this).replaceWith(this.innerHTML)}),k.el.normalize();var f=k.$el.find("span[style] + span[style]");for(o=0;o<f.length;o++){var p=b(f[o]),l=b(f[o]).prev();p.get(0).previousSibling==l.get(0)&&k.node.openTagString(p.get(0))==k.node.openTagString(l.get(0))&&(p.prepend(l.html()),l.remove())}k.$el.find("span[style] span[style]").each(function(){if(0<=b(this).attr("style").indexOf("font-size")){var n=b(this).parents("span[style]");0<=n.attr("style").indexOf("background-color")&&(b(this).attr("style",b(this).attr("style")+";"+n.attr("style")),w(b(this),"span[style]",{},!1))}}),k.el.normalize(),k.selection.restore()}()}function s(C,H,x){var h,v,z,F=C.parentsUntil(k.$el,"span[style]"),I=[];for(h=F.length-1;0<=h;h--){v=F[h],z=H,0===b(v).attr("style").indexOf(z+":")||0<=b(v).attr("style").indexOf(";"+z+":")||0<=b(v).attr("style").indexOf("; "+z+":")||I.push(F[h])}if((F=F.not(I)).length){for(var y="",D="",E="",B="",m=C.get(0);m=m.parentNode,b(m).addClass("fr-split"),y+=k.node.closeTagString(m),D=k.node.openTagString(b(m).clone().addClass("fr-split").get(0))+D,F.get(0)!=m&&(E+=k.node.closeTagString(m),B=k.node.openTagString(b(m).clone().addClass("fr-split").get(0))+B),F.get(0)!=m;){}var G=y+k.node.openTagString(b(F.get(0)).clone().css(H,x||"").get(0))+B+C.css(H,"").get(0).outerHTML+E+"</span>"+D;C.replaceWith('<span id="fr-break"></span>');var A=F.get(0).outerHTML;b(F.get(0)).replaceWith(A.replace(/<span id="fr-break"><\/span>/g,G))}}function e(m,h){void 0===h&&(h={}),h.style&&delete h.style;var v=k.selection.ranges(0),l=v.startContainer;if(l.nodeType==Node.ELEMENT_NODE&&0<l.childNodes.length&&l.childNodes[v.startOffset]&&(l=l.childNodes[v.startOffset]),!v.collapsed&&l.nodeType==Node.TEXT_NODE&&v.startOffset==(l.textContent||"").length){for(;!k.node.isBlock(l.parentNode)&&!l.nextSibling;){l=l.parentNode}l.nextSibling&&(l=l.nextSibling)}for(var p=l;p&&p.nodeType==Node.ELEMENT_NODE&&!d(p,q(m,h));){p=p.firstChild}if(p&&p.nodeType==Node.ELEMENT_NODE&&d(p,q(m,h))){return !0}var f=l;for(f&&f.nodeType!=Node.ELEMENT_NODE&&(f=f.parentNode);f&&f.nodeType==Node.ELEMENT_NODE&&f!=k.el&&!d(f,q(m,h));){f=f.parentNode}return !(!f||f.nodeType!=Node.ELEMENT_NODE||f==k.el||!d(f,q(m,h)))}return{is:e,toggle:function(h,f){e(h,f)?c(h,f):g(h,f)},apply:g,remove:c,applyStyle:u,removeStyle:function(f){u(f,null)}}},b.extend(b.FE.DEFAULTS,{indentMargin:20}),b.FE.COMMANDS={bold:{title:"Bold",toggle:!0,refresh:function(d){var c=this.format.is("strong");d.toggleClass("fr-active",c).attr("aria-pressed",c)}},italic:{title:"Italic",toggle:!0,refresh:function(d){var c=this.format.is("em");d.toggleClass("fr-active",c).attr("aria-pressed",c)}},underline:{title:"Underline",toggle:!0,refresh:function(d){var c=this.format.is("u");d.toggleClass("fr-active",c).attr("aria-pressed",c)}},strikeThrough:{title:"Strikethrough",toggle:!0,refresh:function(d){var c=this.format.is("s");d.toggleClass("fr-active",c).attr("aria-pressed",c)}},subscript:{title:"Subscript",toggle:!0,refresh:function(d){var c=this.format.is("sub");d.toggleClass("fr-active",c).attr("aria-pressed",c)}},superscript:{title:"Superscript",toggle:!0,refresh:function(d){var c=this.format.is("sup");d.toggleClass("fr-active",c).attr("aria-pressed",c)}},outdent:{title:"Decrease Indent"},indent:{title:"Increase Indent"},undo:{title:"Undo",undo:!1,forcedRefresh:!0,disabled:!0},redo:{title:"Redo",undo:!1,forcedRefresh:!0,disabled:!0},insertHR:{title:"Insert Horizontal Line"},clearFormatting:{title:"Clear Formatting"},selectAll:{title:"Select All",undo:!1}},b.FE.RegisterCommand=function(d,c){b.FE.COMMANDS[d]=c},b.FE.MODULES.commands=function(k){function d(i){return k.html.defaultTag()&&(i="<"+k.html.defaultTag()+">"+i+"</"+k.html.defaultTag()+">"),i}var h={bold:function(){j("bold","strong")},subscript:function(){k.format.is("sup")&&k.format.remove("sup"),j("subscript","sub")},superscript:function(){k.format.is("sub")&&k.format.remove("sub"),j("superscript","sup")},italic:function(){j("italic","em")},strikeThrough:function(){j("strikeThrough","s")},underline:function(){j("underline","u")},undo:function(){k.undo.run()},redo:function(){k.undo.redo()},indent:function(){f(1)},outdent:function(){f(-1)},show:function(){k.opts.toolbarInline&&k.toolbar.showInline(null,!0)},insertHR:function(){k.selection.remove();var o="";k.core.isEmpty()&&(o=d(o="<br>")),k.html.insert('<hr id="fr-just">'+o);var i,q=k.$el.find("hr#fr-just");if(q.removeAttr("id"),0===q.next().length){var l=k.html.defaultTag();l?q.after(b("<"+l+">").append("<br>")):q.after("<br>")}q.prev().is("hr")?i=k.selection.setAfter(q.get(0),!1):q.next().is("hr")?i=k.selection.setBefore(q.get(0),!1):k.selection.setAfter(q.get(0),!1)||k.selection.setBefore(q.get(0),!1),i||void 0===i||(o=d(o=b.FE.MARKERS+"<br>"),q.after(o)),k.selection.restore()},clearFormatting:function(){k.format.remove()},selectAll:function(){k.doc.execCommand("selectAll",!1,!1)}};function m(q,i){if(!1!==k.events.trigger("commands.before",b.merge([q],i||[]))){var u=b.FE.COMMANDS[q]&&b.FE.COMMANDS[q].callback||h[q],l=!0,s=!1;b.FE.COMMANDS[q]&&("undefined"!=typeof b.FE.COMMANDS[q].focus&&(l=b.FE.COMMANDS[q].focus),"undefined"!=typeof b.FE.COMMANDS[q].accessibilityFocus&&(s=b.FE.COMMANDS[q].accessibilityFocus)),(!k.core.hasFocus()&&l&&!k.popups.areVisible()||!k.core.hasFocus()&&s&&k.accessibility.hasFocus())&&k.events.focus(!0),b.FE.COMMANDS[q]&&!1!==b.FE.COMMANDS[q].undo&&(k.$el.find(".fr-marker").length&&(k.events.disableBlur(),k.selection.restore()),k.undo.saveStep()),u&&u.apply(k,b.merge([q],i||[])),k.events.trigger("commands.after",b.merge([q],i||[])),b.FE.COMMANDS[q]&&!1!==b.FE.COMMANDS[q].undo&&k.undo.saveStep()}}function j(l,i){k.format.toggle(i)}function f(u){k.selection.save(),k.html.wrap(!0,!0,!0,!0),k.selection.restore();for(var q=k.selection.blocks(),w=0;w<q.length;w++){if("LI"!=q[w].tagName&&"LI"!=q[w].parentNode.tagName){var s=b(q[w]),v="rtl"==k.opts.direction||"rtl"==s.css("direction")?"margin-right":"margin-left",l=k.helpers.getPX(s.css(v));if(s.width()<2*k.opts.indentMargin&&0<u){continue}s.css(v,Math.max(l+u*k.opts.indentMargin,0)||""),s.removeClass("fr-temp-div")}}k.selection.save(),k.html.unwrap(),k.selection.restore()}function c(i){return function(){m(i)}}var p={};for(var g in h){h.hasOwnProperty(g)&&(p[g]=c(g))}return b.extend(p,{exec:m,_init:function(){k.events.on("keydown",function(l){var i=k.selection.element();if(i&&"HR"==i.tagName&&!k.keys.isArrow(l.which)){return l.preventDefault(),!1}}),k.events.on("keyup",function(l){var i=k.selection.element();if(i&&"HR"==i.tagName){if(l.which==b.FE.KEYCODE.ARROW_LEFT||l.which==b.FE.KEYCODE.ARROW_UP){if(i.previousSibling){return k.node.isBlock(i.previousSibling)?k.selection.setAtEnd(i.previousSibling):b(i).before(b.FE.MARKERS),k.selection.restore(),!1}}else{if((l.which==b.FE.KEYCODE.ARROW_RIGHT||l.which==b.FE.KEYCODE.ARROW_DOWN)&&i.nextSibling){return k.node.isBlock(i.nextSibling)?k.selection.setAtStart(i.nextSibling):b(i).after(b.FE.MARKERS),k.selection.restore(),!1}}}}),k.events.on("mousedown",function(i){if(i.target&&"HR"==i.target.tagName){return i.preventDefault(),i.stopPropagation(),!1}}),k.events.on("mouseup",function(){var i=k.selection.element();i==k.selection.endElement()&&i&&"HR"==i.tagName&&(i.nextSibling&&(k.node.isBlock(i.nextSibling)?k.selection.setAtStart(i.nextSibling):b(i).after(b.FE.MARKERS)),k.selection.restore())})}})},b.FE.MODULES.data=function(o){var c="NCKB1zwtPA9tqzajXC2c2A7B-16VD3spzJ1C9C3D5oOF2OB1NB1LD7VA5QF4TE3gytXB2A4C-8VA2AC4E1D3GB2EB2KC3KD1MF1juuSB1A8C6yfbmd1B2a1A5qdsdB2tivbC3CB1KC1CH1eLA2sTF1B4I4H-7B-21UB6b1F5bzzzyAB4JC3MG2hjdKC1JE6C1E1cj1pD-16pUE5B4prra2B5ZB3D3C3pxj1EA6A3rnJA2C-7I-7JD9D1E1wYH1F3sTB5TA2G4H4ZA22qZA5BB3mjcvcCC3JB1xillavC-21VE6PC5SI4YC5C8mb1A3WC3BD2B5aoDA2qqAE3A5D-17fOD1D5RD4WC10tE6OAZC3nF-7b1C4A4D3qCF2fgmapcromlHA2QA6a1E1D3e1A6C2bie2F4iddnIA7B2mvnwcIB5OA1DB2OLQA3PB10WC7WC5d1E3uI-7b1D5D6b1E4D2arlAA4EA1F-11srxI-7MB1D7PF1E5B4adB-21YD5vrZH3D3xAC4E1A2GF2CF2J-7yNC2JE1MI2hH-7QB1C6B5B-9bA-7XB13a1B5VievwpKB4LA3NF-10H-9I-8hhaC-16nqPG4wsleTD5zqYF3h1G2B7B4yvGE2Pi1H-7C-21OE6B1uLD1kI4WC1E7C5g1D-8fue1C8C6c1D4D3Hpi1CC4kvGC2E1legallyXB4axVA11rsA4A-9nkdtlmzBA2GD3A13A6CB1dabE1lezrUE6RD5TB4A-7f1C8c1B5d1D4D3tyfCD5C2D2==",x=function(){for(var g=0,d=document.domain,h=d.split("."),f="_gd"+(new Date).getTime();g<h.length-1&&-1==document.cookie.indexOf(f+"="+f);){d=h.slice(-1- ++g).join("."),document.cookie=f+"="+f+";domain="+d+";"}return document.cookie=f+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+d+";",(d||"").replace(/(^\.*)|(\.*$)/g,"")}();function n(d){return d}var l,i,z=n(function(p){if(!p){return p}for(var v="",g=n("charCodeAt"),d=n("fromCharCode"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".indexOf(p[0]),m=1;m<p.length-2;m++){for(var u=r(++f),y=p[g](m),h="";/[0-9-]/.test(p[m+1]);){h+=p[++m]}y=w(y,u,h=parseInt(h,10)||0),y^=f-1&31,v+=String[d](y)}return v});function r(g){for(var d=g.toString(),h=0,f=0;f<d.length;f++){h+=parseInt(d.charAt(f),10)}return 10<h?h%9+1:h}function w(g,d,h){for(var f=Math.abs(h);0<f--;){g-=d}return h<0&&(g+=123),g}function t(d){return !(!d||"block"===d.css("display")||(d.remove(),0))}function k(d){return d&&0===o.$box.find(d).length}var q=0;function j(){if(10<q&&(o[n(z("0ppecjvc=="))](),setTimeout(function(){b.FE=null},10)),!o.$box){return !1}o.$wp.prepend(z(n(z(c)))),l=o.$wp.find("> div:first"),i=l.find("> a"),"rtl"==o.opts.direction&&l.css("left","auto").css("right",0).attr("direction","rtl"),q++}function s(f){for(var d=[z("9qqG-7amjlwq=="),z("KA3B3C2A6D1D5H5H1A3=="),z("3B9B3B5F3C4G3E3=="),z("QzbzvxyB2yA-9m=="),z("ji1kacwmgG5bc=="),z("nmA-13aogi1A3c1jd==")],g=0;g<d.length;g++){if(String.prototype.endsWith||(String.prototype.endsWith=function(m,h){return(h===undefined||h>this.length)&&(h=this.length),this.substring(h-m.length,h)===m}),f.endsWith(d[g])){return !0}}return !1}return{_init:function(){var u=o.o_win.FEK;try{u=u||localStorage&&localStorage.FEK}catch(C){}u=o.opts.key||u||[""];var D=z(n("ziRA1E3B9pA5B-11D-11xg1A3ZB5D1D4B-11ED2EG2pdeoC1clIH4wB-22yQD5uF4YE3E3A9=="));"string"==typeof u&&(u=[u]);for(var h,f,g,p=!(o.ul=!0),B=0,E=0;E<u.length;E++){var m=(f=u[E],3===(g=(z(f)||"").split("|")).length?g:[null,null,z(f)||""]),y=m[2];y="OEM_LICENSE_KEY";if(y===z(n(z("mcVRDoB1BGILD7YFe1BTXBA7B6==")))||0<=y.indexOf(x,y.length-x.length)||s(x)){if(true){o.ul=!1;break}p=!0,c="RCZB17botVG4A-8yzia1C4A5DG3CD2cFB4qflmCE4I2FB1SC7F6PE4WE3RD6e2A4c1D3d1E2E3ehxdGE3CE2IB2LC1HG2LE1QA3QC7B-13cC-9epmkjc1B4e1C4pgjgvkOC5E1eNE1HB2LD2B-13WD5tvabUA5a1A4f1A2G3C2A-21cihKE3FE2DB2cccJE1iC-7G-7tD-17tVD6A-9qC-7QC7a1E4B4je1E3E2G2ecmsAA1xH-8HB11C1D1lgzQA3dTB8od1D4XE3ohb1B4E4D3mbLA10NA7C-21d1genodKC11PD9PE5tA-8UI3ZC5XB5B-11qXF2F-7wtwjAG3NA1IB1OD1HC1RD4QJ4evUF2D5XG2G4XA8pqocH1F3G2J2hcpHC4D1MD4C1MB8PD5klcQD1A8A6e2A3ed1E2A24A7HC5C3qA-9tiA-61dcC3MD1LE1D4SA3A9ZZXSE4g1C3Pa2C5ufbcGI3I2B4skLF2CA1vxB-22wgUC4kdH-8cVB5iwe1A2D3H3G-7DD5JC2ED2OH2JB10D3C2xHE1KA29PB11wdC-11C4cixb2C7a1C4YYE3B2A15uB-21wpCA1MF1NuC-21dyzD6pPG4I-7pmjc1A4yte1F3B-22yvCC3VbC-7qC-22qNE2hC1vH-8zad1RF6WF3DpI-7C8A-16hpf1F3D2ylalB-13BB2lpA-63IB3uOF6D5G4gabC-21UD2A3PH4ZA20B11b2C6ED4A2H3I1A15DB4KD2laC-8LA5B8B7==",B=m[0]||-1}}var A=new Image;!0===o.ul&&(j(),A.src=p?n(z(D))+"e="+B:n(z(D))+"u"),!0===o.ul&&o.events.on("contentChanged",function(){(t(l)||t(i)||k(l)||k(i))&&j()}),o.events.on("destroy",function(){l&&l.length&&l.remove()},!0)}}},b.extend(b.FE.DEFAULTS,{pastePlain:!1,pasteDeniedTags:["colgroup","col","meta"],pasteDeniedAttrs:["class","id","style"],pasteAllowedStyleProps:[".*"],pasteAllowLocalImages:!1}),b.FE.MODULES.paste=function(A){var B,D,h,p;function j(d,c){try{A.win.localStorage.setItem("fr-copied-html",d),A.win.localStorage.setItem("fr-copied-text",c)}catch(f){}}function v(d){var c=A.html.getSelected();j(c,b("<div>").html(c).text()),"cut"==d.type&&(A.undo.saveStep(),setTimeout(function(){A.selection.save(),A.html.wrap(),A.selection.restore(),A.events.focus(),A.undo.saveStep()},0))}var q=!1;function C(f){if(q){return !1}if(f.originalEvent&&(f=f.originalEvent),!1===A.events.trigger("paste.before",[f])){return f.preventDefault(),!1}if(A.$win.scrollTop(),f&&f.clipboardData&&f.clipboardData.getData){var c="",i=f.clipboardData.types;if(A.helpers.isArray(i)){for(var d=0;d<i.length;d++){c+=i[d]+";"}}else{c=i}if(B="",/text\/rtf/.test(c)&&(D=f.clipboardData.getData("text/rtf")),/text\/html/.test(c)&&!A.browser.safari?B=f.clipboardData.getData("text/html"):/text\/rtf/.test(c)&&A.browser.safari?B=D:/public.rtf/.test(c)&&A.browser.safari&&(B=f.clipboardData.getData("text/rtf")),""!==B){return k(),f.preventDefault&&(f.stopPropagation(),f.preventDefault()),!1}B=null}return function(){A.selection.save(),A.events.disableBlur(),B=null,h?(h.html(""),A.browser.edge&&A.opts.iframe&&A.$el.append(h)):(h=b('<div contenteditable="true" style="position: fixed; top: 0; left: -9999px; height: 100%; width: 0; word-break: break-all; overflow:hidden; z-index: 2147483647; line-height: 140%; -moz-user-select: text; -webkit-user-select: text; -ms-user-select: text; user-select: text;" tabIndex="-1"></div>'),A.browser.webkit?(h.css("top",A.$sc.scrollTop()),A.$el.after(h)):A.browser.edge&&A.opts.iframe?A.$el.append(h):A.$box.after(h),A.events.on("destroy",function(){h.remove()}));h.focus(),A.win.setTimeout(k,1)}(),!1}function g(l){if(l.originalEvent&&(l=l.originalEvent),l&&l.dataTransfer&&l.dataTransfer.getData){var d="",y=l.dataTransfer.types;if(A.helpers.isArray(y)){for(var f=0;f<y.length;f++){d+=y[f]+";"}}else{d=y}if(B="",/text\/rtf/.test(d)&&(D=l.dataTransfer.getData("text/rtf")),/text\/html/.test(d)?B=l.dataTransfer.getData("text/html"):/text\/rtf/.test(d)&&A.browser.safari?B=D:/text\/plain/.test(d)&&!this.browser.mozilla&&(B=A.html.escapeEntities(l.dataTransfer.getData("text/plain")).replace(/\n/g,"<br>")),""!==B){A.keys.forceUndo(),p=A.snapshot.get(),A.selection.save(),A.$el.find(".fr-marker").removeClass("fr-marker").addClass("fr-marker-helper");var s=A.markers.insertAtPoint(l);if(A.$el.find(".fr-marker").removeClass("fr-marker").addClass("fr-marker-placeholder"),A.$el.find(".fr-marker-helper").addClass("fr-marker").removeClass("fr-marker-helper"),A.selection.restore(),A.selection.remove(),A.$el.find(".fr-marker-placeholder").addClass("fr-marker").removeClass("fr-marker-placeholder"),!1!==s){var c=A.el.querySelector(".fr-marker");return b(c).replaceWith(b.FE.MARKERS),A.selection.restore(),k(),l.preventDefault&&(l.stopPropagation(),l.preventDefault()),!1}}else{B=null}}}function k(){A.browser.edge&&A.opts.iframe&&A.$box.after(h),p||(A.keys.forceUndo(),p=A.snapshot.get()),B||(B=h.get(0).innerHTML,A.selection.restore(),A.events.enableBlur());var d=B.match(/(class=\"?Mso|class=\'?Mso|class="?Xl|class='?Xl|class=Xl|style=\"[^\"]*\bmso\-|style=\'[^\']*\bmso\-|w:WordDocument)/gi),c=A.events.chainTrigger("paste.beforeCleanup",B);c&&"string"==typeof c&&(B=c),(!d||d&&!1!==A.events.trigger("paste.wordPaste",[B]))&&w(B,d)}function m(d){for(var c="",f=0;f++<d;){c+="&nbsp;"}return c}function w(T,H,M){var J,L=null,P=null;if(0<=T.toLowerCase().indexOf("<body")){var W="";0<=T.indexOf("<style")&&(W=T.replace(/[.\s\S\w\W<>]*(<style[^>]*>[\s]*[.\s\S\w\W<>]*[\s]*<\/style>)[.\s\S\w\W<>]*/gi,"$1")),T=(T=W+T.replace(/[.\s\S\w\W<>]*<body[^>]*>[\s]*([.\s\S\w\W<>]*)[\s]*<\/body>[.\s\S\w\W<>]*/gi,"$1")).replace(/ \n/g," ").replace(/\n /g," ").replace(/([^>])\n([^<])/g,"$1 $2")}var I=!1;0<=T.indexOf('id="docs-internal-guid')&&(T=T.replace(/^[\w\W\s\S]* id="docs-internal-guid[^>]*>([\w\W\s\S]*)<\/b>[\w\W\s\S]*$/g,"$1"),I=!0),0<=T.indexOf('content="Sheets"')&&(T=T.replace(/width:0px;/g,""));var O=!1;if(!H&&((O=function(d){var c=null;try{c=A.win.localStorage.getItem("fr-copied-text")}catch(f){}return !(!c||b("<div>").html(d).text().replace(/\u00A0/gi," ").replace(/\r|\n/gi,"")!=c.replace(/\u00A0/gi," ").replace(/\r|\n/gi,""))}(T))&&(T=A.win.localStorage.getItem("fr-copied-html")),!O)){var U=A.opts.htmlAllowedStyleProps;A.opts.htmlAllowedStyleProps=A.opts.pasteAllowedStyleProps,A.opts.htmlAllowComments=!1,T=(T=(T=T.replace(/<span class="Apple-tab-span">\s*<\/span>/g,m(A.opts.tabSpaces||4))).replace(/<span class="Apple-tab-span" style="white-space:pre">(\t*)<\/span>/g,function(d,c){return m(c.length*(A.opts.tabSpaces||4))})).replace(/\t/g,m(A.opts.tabSpaces||4)),T=A.clean.html(T,A.opts.pasteDeniedTags,A.opts.pasteDeniedAttrs),A.opts.htmlAllowedStyleProps=U,A.opts.htmlAllowComments=!0,T=(T=(T=z(T)).replace(/\r/g,"")).replace(/^ */g,"").replace(/ *$/g,"")}!H||A.wordPaste&&M||(0===(T=T.replace(/^\n*/g,"").replace(/^ /g,"")).indexOf("<colgroup>")&&(T="<table>"+T+"</table>"),T=z(T=function(Z){var ac;Z=(Z=(Z=(Z=(Z=(Z=(Z=(Z=(Z=(Z=(Z=(Z=(Z=(Z=(Z=Z.replace(/<p(.*?)class="?'?MsoListParagraph"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li>$3</li></ul>")).replace(/<p(.*?)class="?'?NumberedText"?'? ([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li>$3</li></ol>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ul><li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpFirst"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<ol><li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?NumberedTextCxSpMiddle"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListBullet"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li>")).replace(/<p(.*?)class="?'?MsoListParagraphCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ul>")).replace(/<p(.*?)class="?'?NumberedTextCxSpLast"?'?([\s\S]*?)(level\d)?([\s\S]*?)>([\s\S]*?)<\/p>/gi,"<li$3>$5</li></ol>")).replace(/<span([^<]*?)style="?'?mso-list:Ignore"?'?([\s\S]*?)>([\s\S]*?)<span/gi,"<span><span")).replace(/<!--\[if \!supportLists\]-->([\s\S]*?)<!--\[endif\]-->/gi,"")).replace(/<!\[if \!supportLists\]>([\s\S]*?)<!\[endif\]>/gi,"")).replace(/(\n|\r| class=(")?Mso[a-zA-Z0-9]+(")?)/gi," ")).replace(/<!--[\s\S]*?-->/gi,"")).replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var E,c=["style","script","applet","embed","noframes","noscript"];for(ac=0;ac<c.length;ac++){var f=new RegExp("<"+c[ac]+".*?"+c[ac]+"(.*?)>","gi");Z=Z.replace(f,"")}for(Z=(Z=(Z=Z.replace(/&nbsp;/gi," ")).replace(/<td([^>]*)><\/td>/g,"<td$1><br></td>")).replace(/<th([^>]*)><\/th>/g,"<th$1><br></th>");(Z=(E=Z).replace(/<[^\/>][^>]*><\/[^>]+>/gi,""))!=E;){}Z=(Z=Z.replace(/<lilevel([^1])([^>]*)>/gi,'<li data-indent="true"$2>')).replace(/<lilevel1([^>]*)>/gi,"<li$1>"),Z=(Z=(Z=A.clean.html(Z,A.opts.pasteDeniedTags,A.opts.pasteDeniedAttrs)).replace(/<a>(.[^<]+)<\/a>/gi,"$1")).replace(/<br> */g,"<br>");var Y=A.o_doc.createElement("div");Y.innerHTML=Z;var ab=Y.querySelectorAll("li[data-indent]");for(ac=0;ac<ab.length;ac++){var ad=ab[ac],X=ad.previousElementSibling;if(X&&"LI"==X.tagName){var aa=X.querySelector(":scope > ul, :scope > ol");aa||(aa=document.createElement("ul"),X.appendChild(aa)),aa.appendChild(ad)}else{ad.removeAttribute("data-indent")}}return A.html.cleanBlankSpaces(Y),Z=Y.innerHTML}(T))),A.opts.pastePlain&&!O&&(T=function(l){var d,E=null,f=A.doc.createElement("div");f.innerHTML=l;var s=f.querySelectorAll("p, div, h1, h2, h3, h4, h5, h6, pre, blockquote");for(d=0;d<s.length;d++){(E=s[d]).outerHTML="<"+(A.html.defaultTag()||"DIV")+">"+E.innerHTML+"</"+(A.html.defaultTag()||"DIV")+">"}for(d=(s=f.querySelectorAll("*:not("+"p, div, h1, h2, h3, h4, h5, h6, pre, blockquote, ul, ol, li, table, tbody, thead, tr, td, br, img".split(",").join("):not(")+")")).length-1;0<=d;d--){(E=s[d]).outerHTML=E.innerHTML}var c=function(o){for(var i=A.node.contents(o),r=0;r<i.length;r++){i[r].nodeType!=Node.TEXT_NODE&&i[r].nodeType!=Node.ELEMENT_NODE?i[r].parentNode.removeChild(i[r]):c(i[r])}};return c(f),f.innerHTML}(T));var V=A.events.chainTrigger("paste.afterCleanup",T);if("string"==typeof V&&(T=V),""!==T){var S=A.o_doc.createElement("div");0<=(S.innerHTML=T).indexOf("<body>")?(A.html.cleanBlankSpaces(S),A.spaces.normalize(S,!0)):A.spaces.normalize(S);var K=S.getElementsByTagName("span");for(J=K.length-1;0<=J;J--){var F=K[J];0===F.attributes.length&&(F.outerHTML=F.innerHTML)}var R=A.selection.element(),Q=!1;if(R&&b(R).parentsUntil(A.el,"ul, ol").length&&(Q=!0),Q){var N=S.children;1==N.length&&0<=["OL","UL"].indexOf(N[0].tagName)&&(N[0].outerHTML=N[0].innerHTML)}if(!I){var G=S.getElementsByTagName("br");for(J=G.length-1;0<=J;J--){var y=G[J];A.node.isBlock(y.previousSibling)&&y.parentNode.removeChild(y)}}if(A.opts.enter==b.FE.ENTER_BR){for(J=(L=S.querySelectorAll("p, div")).length-1;0<=J;J--){0===(P=L[J]).attributes.length&&(P.outerHTML=P.innerHTML+(P.nextSibling&&!A.node.isEmpty(P)?"<br>":""))}}else{if(A.opts.enter==b.FE.ENTER_DIV){for(J=(L=S.getElementsByTagName("p")).length-1;0<=J;J--){0===(P=L[J]).attributes.length&&(P.outerHTML="<div>"+P.innerHTML+"</div>")}}else{A.opts.enter==b.FE.ENTER_P&&1==S.childNodes.length&&"P"==S.childNodes[0].tagName&&0===S.childNodes[0].attributes.length&&(S.childNodes[0].outerHTML=S.childNodes[0].innerHTML)}}T=S.innerHTML,O&&(T=function(f){var c,i=A.o_doc.createElement("div");i.innerHTML=f;var d=i.querySelectorAll("*:empty:not(td):not(th):not(tr):not(iframe):not(svg):not("+b.FE.VOID_ELEMENTS.join("):not(")+"):not("+A.opts.htmlAllowedEmptyTags.join("):not(")+")");for(;d.length;){for(c=0;c<d.length;c++){d[c].parentNode.removeChild(d[c])}d=i.querySelectorAll("*:empty:not(td):not(th):not(tr):not(iframe):not(svg):not("+b.FE.VOID_ELEMENTS.join("):not(")+"):not("+A.opts.htmlAllowedEmptyTags.join("):not(")+")")}return i.innerHTML}(T)),A.html.insert(T,!0)}A.events.trigger("paste.after"),A.undo.saveStep(p),p=null,A.undo.saveStep()}function x(d){for(var c=d.length-1;0<=c;c--){d[c].attributes&&d[c].attributes.length&&d.splice(c,1)}return d}function z(E){var f,G=A.o_doc.createElement("div");G.innerHTML=E;for(var y=x(Array.prototype.slice.call(G.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])")));y.length;){var F=y[y.length-1];if(A.html.defaultTag()&&"div"!=A.html.defaultTag()){F.querySelector(A.html.blockTagsQuery())?F.outerHTML=F.innerHTML:F.outerHTML="<"+A.html.defaultTag()+">"+F.innerHTML+"</"+A.html.defaultTag()+">"}else{var d=F.querySelectorAll("*");!d.length||"BR"!==d[d.length-1].tagName&&0===F.innerText.length?F.outerHTML=F.innerHTML+"<br>":F.outerHTML=F.innerHTML}y=x(Array.prototype.slice.call(G.querySelectorAll(":scope > div:not([style]), td > div:not([style]), th > div:not([style]), li > div:not([style])")))}for(y=x(Array.prototype.slice.call(G.querySelectorAll("div:not([style])")));y.length;){for(f=0;f<y.length;f++){var c=y[f],l=c.innerHTML.replace(/\u0009/gi,"").trim();c.outerHTML=l}y=x(Array.prototype.slice.call(G.querySelectorAll("div:not([style])")))}return G.innerHTML}function u(){A.el.removeEventListener("copy",v),A.el.removeEventListener("cut",v),A.el.removeEventListener("paste",C)}return{_init:function(){A.el.addEventListener("copy",v),A.el.addEventListener("cut",v),A.el.addEventListener("paste",C,{capture:!0}),A.events.on("drop",g),A.browser.msie&&A.browser.version<11&&(A.events.on("mouseup",function(c){2==c.button&&(setTimeout(function(){q=!1},50),q=!0)},!0),A.events.on("beforepaste",C)),A.events.on("destroy",u)},cleanEmptyTagsAndDivs:z,getRtfClipboard:function(){return D},saveCopiedText:j,clean:w}},b.extend(b.FE.DEFAULTS,{shortcutsEnabled:[],shortcutsHint:!0}),b.FE.SHORTCUTS_MAP={},b.FE.RegisterShortcut=function(g,d,j,f,h,c){b.FE.SHORTCUTS_MAP[(h?"^":"")+(c?"@":"")+g]={cmd:d,val:j,letter:f,shift:h,option:c},b.FE.DEFAULTS.shortcutsEnabled.push(d)},b.FE.RegisterShortcut(b.FE.KEYCODE.E,"show",null,"E",!1,!1),b.FE.RegisterShortcut(b.FE.KEYCODE.B,"bold",null,"B",!1,!1),b.FE.RegisterShortcut(b.FE.KEYCODE.I,"italic",null,"I",!1,!1),b.FE.RegisterShortcut(b.FE.KEYCODE.U,"underline",null,"U",!1,!1),b.FE.RegisterShortcut(b.FE.KEYCODE.S,"strikeThrough",null,"S",!1,!1),b.FE.RegisterShortcut(b.FE.KEYCODE.CLOSE_SQUARE_BRACKET,"indent",null,"]",!1,!1),b.FE.RegisterShortcut(b.FE.KEYCODE.OPEN_SQUARE_BRACKET,"outdent",null,"[",!1,!1),b.FE.RegisterShortcut(b.FE.KEYCODE.Z,"undo",null,"Z",!1,!1),b.FE.RegisterShortcut(b.FE.KEYCODE.Z,"redo",null,"Z",!0,!1),b.FE.RegisterShortcut(b.FE.KEYCODE.Y,"redo",null,"Y",!1,!1),b.FE.MODULES.shortcuts=function(d){var f=null;var c=!1;function g(m){if(!d.core.hasFocus()){return !0}var k=m.which,q=-1!=navigator.userAgent.indexOf("Mac OS X")?m.metaKey:m.ctrlKey;if("keyup"==m.type&&c&&k!=b.FE.KEYCODE.META){return c=!1}"keydown"==m.type&&(c=!1);var l=(m.shiftKey?"^":"")+(m.altKey?"@":"")+k;if(q&&b.FE.SHORTCUTS_MAP[l]){var p=b.FE.SHORTCUTS_MAP[l].cmd;if(p&&0<=d.opts.shortcutsEnabled.indexOf(p)){var j,h=b.FE.SHORTCUTS_MAP[l].val;if(p&&!h?j=d.$tb.find('.fr-command[data-cmd="'+p+'"]'):p&&h&&(j=d.$tb.find('.fr-command[data-cmd="'+p+'"][data-param1="'+h+'"]')),j.length){return m.preventDefault(),m.stopPropagation(),j.parents(".fr-toolbar").data("instance",d),"keydown"==m.type&&(d.button.exec(j),c=!0),!1}if(p&&(d.commands[p]||b.FE.COMMANDS[p]&&b.FE.COMMANDS[p].callback)){return m.preventDefault(),m.stopPropagation(),"keydown"==m.type&&((d.commands[p]||b.FE.COMMANDS[p].callback)(),c=!0),!1}}}}return{_init:function(){d.events.on("keydown",g,!0),d.events.on("keyup",g,!0)},get:function(i){if(!d.opts.shortcutsHint){return null}if(!f){for(var h in f={},b.FE.SHORTCUTS_MAP){b.FE.SHORTCUTS_MAP.hasOwnProperty(h)&&0<=d.opts.shortcutsEnabled.indexOf(b.FE.SHORTCUTS_MAP[h].cmd)&&(f[b.FE.SHORTCUTS_MAP[h].cmd+"."+(b.FE.SHORTCUTS_MAP[h].val||"")]={shift:b.FE.SHORTCUTS_MAP[h].shift,option:b.FE.SHORTCUTS_MAP[h].option,letter:b.FE.SHORTCUTS_MAP[h].letter})}}var j=f[i];return j?(d.helpers.isMac()?String.fromCharCode(8984):d.language.translate("Ctrl")+"+")+(j.shift?d.helpers.isMac()?String.fromCharCode(8679):d.language.translate("Shift")+"+":"")+(j.option?d.helpers.isMac()?String.fromCharCode(8997):d.language.translate("Alt")+"+":"")+j.letter:null}}},b.FE.MODULES.snapshot=function(c){function j(p){for(var l=p.parentNode.childNodes,s=0,m=null,q=0;q<l.length;q++){if(m){var k=l[q].nodeType===Node.TEXT_NODE&&""===l[q].textContent,d=m.nodeType===Node.TEXT_NODE&&l[q].nodeType===Node.TEXT_NODE;k||d||s++}if(l[q]==p){return s}m=l[q]}}function h(i){var d=[];if(!i.parentNode){return[]}for(;!c.node.isElement(i);){d.push(j(i)),i=i.parentNode}return d.reverse()}function e(i,d){for(;i&&i.nodeType===Node.TEXT_NODE;){var k=i.previousSibling;k&&k.nodeType==Node.TEXT_NODE&&(d+=k.textContent.length),i=k}return d}function g(i){for(var d=c.el,k=0;k<i.length;k++){d=d.childNodes[i[k]]}return d}function f(q,l){try{var v=g(l.scLoc),p=l.scOffset,u=g(l.ecLoc),k=l.ecOffset,d=c.doc.createRange();d.setStart(v,p),d.setEnd(u,k),q.addRange(d)}catch(m){console.warn(m)}}return{get:function(){var k,d={};if(c.events.trigger("snapshot.before"),d.html=(c.$wp?c.$el.html():c.$oel.get(0).outerHTML).replace(/ style=""/g,""),d.ranges=[],c.$wp&&c.selection.inEditor()&&c.core.hasFocus()){for(var l=c.selection.ranges(),i=0;i<l.length;i++){d.ranges.push({scLoc:h((k=l[i]).startContainer),scOffset:e(k.startContainer,k.startOffset),ecLoc:h(k.endContainer),ecOffset:e(k.endContainer,k.endOffset)})}}return c.events.trigger("snapshot.after",[d]),d},restore:function(i){c.$el.html()!=i.html&&(c.opts.htmlExecuteScripts?c.$el.html(i.html):c.el.innerHTML=i.html);var d=c.selection.get();c.selection.clear(),c.events.focus(!0);for(var k=0;k<i.ranges.length;k++){f(d,i.ranges[k])}},equal:function(i,d){return i.html==d.html&&(!c.core.hasFocus()||JSON.stringify(i.ranges)==JSON.stringify(d.ranges))}}},b.FE.MODULES.undo=function(j){function g(k){var i=k.which;j.keys.ctrlKey(k)&&(90==i&&k.shiftKey&&k.preventDefault(),90==i&&k.preventDefault())}var d=null;function f(){if(!j.undo_stack||j.undoing){return !1}for(;j.undo_stack.length>j.undo_index;){j.undo_stack.pop()}}function h(){j.undo_index=0,j.undo_stack=[]}function c(){j.undo_stack=[]}return{_init:function(){h(),j.events.on("initialized",function(){d=(j.$wp?j.$el.html():j.$oel.get(0).outerHTML).replace(/ style=""/g,"")}),j.events.on("blur",function(){j.el.querySelector(".fr-dragging")||j.undo.saveStep()}),j.events.on("keydown",g),j.events.on("destroy",c)},run:function(){if(1<j.undo_index){j.undoing=!0;var i=j.undo_stack[--j.undo_index-1];clearTimeout(j._content_changed_timer),j.snapshot.restore(i),d=i.html,j.popups.hideAll(),j.toolbar.enable(),j.events.trigger("contentChanged"),j.events.trigger("commands.undo"),j.undoing=!1}},redo:function(){if(j.undo_index<j.undo_stack.length){j.undoing=!0;var i=j.undo_stack[j.undo_index++];clearTimeout(j._content_changed_timer),j.snapshot.restore(i),d=i.html,j.popups.hideAll(),j.toolbar.enable(),j.events.trigger("contentChanged"),j.events.trigger("commands.redo"),j.undoing=!1}},canDo:function(){return !(0===j.undo_stack.length||j.undo_index<=1)},canRedo:function(){return j.undo_index!=j.undo_stack.length},dropRedo:f,reset:h,saveStep:function(i){if(!j.undo_stack||j.undoing||j.el.querySelector(".fr-marker")){return !1}void 0===i?(i=j.snapshot.get(),j.undo_stack[j.undo_index-1]&&j.snapshot.equal(j.undo_stack[j.undo_index-1],i)||(f(),j.undo_stack.push(i),j.undo_index++,i.html!=d&&(j.events.trigger("contentChanged"),d=i.html))):(f(),0<j.undo_index?j.undo_stack[j.undo_index-1]=i:(j.undo_stack.push(i),j.undo_index++))}}},b.FE.ICON_TEMPLATES={font_awesome:'<i class="fa fa-[NAME]" aria-hidden="true"></i>',font_awesome_5:'<i class="fas fa-[FA5NAME]" aria-hidden="true"></i>',font_awesome_5r:'<i class="far fa-[FA5NAME]" aria-hidden="true"></i>',font_awesome_5l:'<i class="fal fa-[FA5NAME]" aria-hidden="true"></i>',font_awesome_5b:'<i class="fab fa-[FA5NAME]" aria-hidden="true"></i>',text:'<span style="text-align: center;">[NAME]</span>',image:"<img src=[SRC] alt=[ALT] />",svg:'<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">[PATH]</svg>'},b.FE.ICONS={bold:{NAME:"bold"},italic:{NAME:"italic"},underline:{NAME:"underline"},strikeThrough:{NAME:"strikethrough"},subscript:{NAME:"subscript"},superscript:{NAME:"superscript"},color:{NAME:"tint"},outdent:{NAME:"outdent"},indent:{NAME:"indent"},undo:{NAME:"rotate-left",FA5NAME:"undo"},redo:{NAME:"rotate-right",FA5NAME:"redo"},insertHR:{NAME:"minus"},clearFormatting:{NAME:"eraser"},selectAll:{NAME:"mouse-pointer"}},b.FE.DefineIconTemplate=function(d,c){b.FE.ICON_TEMPLATES[d]=c},b.FE.DefineIcon=function(d,c){b.FE.ICONS[d]=c},b.extend(b.FE.DEFAULTS,{iconsTemplate:"font_awesome"}),b.FE.MODULES.icon=function(c){return{create:function(h){var g=null,f=b.FE.ICONS[h];if(void 0!==f){var d=f.template||b.FE.ICON_DEFAULT_TEMPLATE||c.opts.iconsTemplate;f.FA5NAME||(f.FA5NAME=f.NAME),d&&(d=b.FE.ICON_TEMPLATES[d])&&(g=d.replace(/\[([a-zA-Z0-9]*)\]/g,function(j,i){return"NAME"==i?f[i]||h:f[i]}))}return g||h},getTemplate:function(f){var d=b.FE.ICONS[f],g=c.opts.iconsTemplate;return void 0!==d?g=d.template||b.FE.ICON_DEFAULT_TEMPLATE||c.opts.iconsTemplate:g}}},b.extend(b.FE.DEFAULTS,{tooltips:!0}),b.FE.MODULES.tooltip=function(e){function d(){if(e.helpers.isMobile()){return !1}e.$tooltip&&e.$tooltip.removeClass("fr-visible").css("left","-3000px").css("position","fixed")}function c(h,f){if(e.helpers.isMobile()){return !1}if(h.data("title")||h.data("title",h.attr("title")),!h.data("title")){return !1}e.$tooltip||e.opts.tooltips&&!e.helpers.isMobile()&&(e.shared.$tooltip?e.$tooltip=e.shared.$tooltip:(e.shared.$tooltip=b('<div class="fr-tooltip"></div>'),e.$tooltip=e.shared.$tooltip,e.opts.theme&&e.$tooltip.addClass(e.opts.theme+"-theme"),b(e.o_doc).find("body:first").append(e.$tooltip)),e.events.on("shared.destroy",function(){e.$tooltip.html("").removeData().remove(),e.$tooltip=null},!0)),h.removeAttr("title"),e.$tooltip.text(e.language.translate(h.data("title"))),e.$tooltip.addClass("fr-visible");var i=h.offset().left+(h.outerWidth()-e.$tooltip.outerWidth())/2;i<0&&(i=0),i+e.$tooltip.outerWidth()>b(e.o_win).width()&&(i=b(e.o_win).width()-e.$tooltip.outerWidth()),void 0===f&&(f=e.opts.toolbarBottom);var g=f?h.offset().top-e.$tooltip.height():h.offset().top+h.outerHeight();e.$tooltip.css("position",""),e.$tooltip.css("left",i),e.$tooltip.css("top",Math.ceil(g)),"static"!=b(e.o_doc).find("body:first").css("position")?(e.$tooltip.css("margin-left",-b(e.o_doc).find("body:first").offset().left),e.$tooltip.css("margin-top",-b(e.o_doc).find("body:first").offset().top)):(e.$tooltip.css("margin-left",""),e.$tooltip.css("margin-top",""))}return{hide:d,to:c,bind:function(g,f,h){e.opts.tooltips&&!e.helpers.isMobile()&&(e.events.$on(g,"mouseenter",f,function(i){e.node.hasClass(i.currentTarget,"fr-disabled")||e.edit.isDisabled()||c(b(i.currentTarget),h)},!0),e.events.$on(g,"mouseleave "+e._mousedown+" "+e._mouseup,f,function(){d()},!0))}}},b.FE.MODULES.button=function(G){var F=[];(G.opts.toolbarInline||G.opts.toolbarContainer)&&(G.shared.buttons||(G.shared.buttons=[]),F=G.shared.buttons);var I=[];function x(h,f,m){for(var g=b(),l=0;l<h.length;l++){var d=b(h[l]);if(d.is(f)&&(g=g.add(d)),m&&d.is(".fr-dropdown")){var c=d.next().find(f);g=g.add(c)}}return g}function D(g,d){var l,f=b();if(!g){return f}for(l in f=(f=f.add(x(F,g,d))).add(x(I,g,d)),G.shared.popups){if(G.shared.popups.hasOwnProperty(l)){var h=G.shared.popups[l].children().find(g);f=f.add(h)}}for(l in G.shared.modals){if(G.shared.modals.hasOwnProperty(l)){var c=G.shared.modals[l].$modal.find(g);f=f.add(c)}}return f}function j(f){f.addClass("fr-blink"),setTimeout(function(){f.removeClass("fr-blink")},500);for(var c=f.data("cmd"),g=[];void 0!==f.data("param"+(g.length+1));){g.push(f.data("param"+(g.length+1)))}var d=D(".fr-dropdown.fr-active");d.length&&(d.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),d.parent(".fr-toolbar:not(.fr-inline)").css("zIndex","")),f.parents(".fr-popup, .fr-toolbar").data("instance").commands.exec(c,g)}function H(d){var c=d.parents(".fr-popup, .fr-toolbar").data("instance");if(0!==d.parents(".fr-popup").length||d.data("popup")||c.popups.hideAll(),c.popups.areVisible()&&!c.popups.areVisible(c)){for(var f=0;f<b.FE.INSTANCES.length;f++){b.FE.INSTANCES[f]!=c&&b.FE.INSTANCES[f].popups&&b.FE.INSTANCES[f].popups.areVisible()&&b.FE.INSTANCES[f].$el.find(".fr-marker").remove()}c.popups.hideAll()}G.node.hasClass(d.get(0),"fr-dropdown")?function(u){var l=u.next(),K=G.node.hasClass(u.get(0),"fr-active"),p=D(".fr-dropdown.fr-active").not(u),J=u.parents(".fr-toolbar, .fr-popup").data("instance")||G;if(J.helpers.isIOS()&&!J.el.querySelector(".fr-marker")&&(J.selection.save(),J.selection.clear(),J.selection.restore()),!K){var h=u.data("cmd");l.find(".fr-command").removeClass("fr-active").attr("aria-selected",!1),b.FE.COMMANDS[h]&&b.FE.COMMANDS[h].refreshOnShow&&b.FE.COMMANDS[h].refreshOnShow.apply(J,[u,l]),l.css("left",u.offset().left-u.parent().offset().left-("rtl"==G.opts.direction?l.width()-u.outerWidth():0)),l.addClass("test-height");var g=l.outerHeight();l.removeClass("test-height"),l.css("top","").css("bottom",""),!G.opts.toolbarBottom&&l.offset().top+u.outerHeight()+g<b(G.o_doc).height()?l.css("top",u.position().top+u.outerHeight()):l.css("bottom",u.parents(".fr-popup, .fr-toolbar").first().height()-u.position().top)}u.addClass("fr-blink").toggleClass("fr-active"),u.hasClass("fr-active")?(l.attr("aria-hidden",!1),u.attr("aria-expanded",!0)):(l.attr("aria-hidden",!0),u.attr("aria-expanded",!1)),setTimeout(function(){u.removeClass("fr-blink")},300),l.css("margin-left",""),l.offset().left+l.outerWidth()>G.$sc.offset().left+G.$sc.width()&&l.css("margin-left",-(l.offset().left+l.outerWidth()-G.$sc.offset().left-G.$sc.width())),l.offset().left<G.$sc.offset().left&&"rtl"==G.opts.direction&&l.css("margin-left",G.$sc.offset().left),p.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),p.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""),0!==u.parents(".fr-popup").length||G.opts.toolbarInline||(G.node.hasClass(u.get(0),"fr-active")?G.$tb.css("zIndex",(G.opts.zIndex||1)+4):G.$tb.css("zIndex",""));var m=l.find("a.fr-command.fr-active:first");G.helpers.isMobile()||(m.length?G.accessibility.focusToolbarElement(m):G.accessibility.focusToolbarElement(u))}(d):(j(d),b.FE.COMMANDS[d.data("cmd")]&&!1!==b.FE.COMMANDS[d.data("cmd")].refreshAfterCallback&&c.button.bulkRefresh())}function y(c){H(b(c.currentTarget))}function E(d){var c=d.find(".fr-dropdown.fr-active");c.length&&(c.removeClass("fr-active").attr("aria-expanded",!1).next().attr("aria-hidden",!0),c.parent(".fr-toolbar:not(.fr-inline)").css("zIndex",""))}function B(c){c.preventDefault(),c.stopPropagation()}function k(c){if(c.stopPropagation(),!G.helpers.isMobile()){return !1}}function A(M,Q,u){if(G.helpers.isMobile()&&!1===Q.showOnMobile){return""}var g,m=Q.displaySelection;if("function"==typeof m&&(m=m(G)),m){var K="function"==typeof Q.defaultSelection?Q.defaultSelection(G):Q.defaultSelection;g='<span style="width:'+(Q.displaySelectionWidth||100)+'px">'+G.language.translate(K||Q.title)+"</span>"}else{g=G.icon.create(Q.icon||M),g+='<span class="fr-sr-only">'+(G.language.translate(Q.title)||"")+"</span>"}var P=Q.popup?' data-popup="true"':"",R=Q.modal?' data-modal="true"':"",J=G.shortcuts.get(M+".");J=J?" ("+J+")":"";var N=M+"-"+G.id,O="dropdown-menu-"+N,L='<button id="'+N+'"type="button" tabIndex="-1" role="button"'+(Q.toggle?' aria-pressed="false"':"")+("dropdown"==Q.type?' aria-controls="'+O+'" aria-expanded="false" aria-haspopup="true"':"")+(Q.disabled?' aria-disabled="true"':"")+' title="'+(G.language.translate(Q.title)||"")+J+'" class="fr-command fr-btn'+("dropdown"==Q.type?" fr-dropdown":"")+" fr-btn-"+G.icon.getTemplate(Q.icon)+(Q.displaySelection?" fr-selection":"")+(Q.back?" fr-back":"")+(Q.disabled?" fr-disabled":"")+(u?"":" fr-hidden")+'" data-cmd="'+M+'"'+P+R+">"+g+"</button>";if("dropdown"==Q.type){var h='<div id="'+O+'" class="fr-dropdown-menu" role="listbox" aria-labelledby="'+N+'" aria-hidden="true"><div class="fr-dropdown-wrapper" role="presentation"><div class="fr-dropdown-content" role="presentation">';h+=function(l,d){var s="";if(d.html){"function"==typeof d.html?s+=d.html.call(G):s+=d.html}else{var f=d.options;for(var p in "function"==typeof f&&(f=f()),s+='<ul class="fr-dropdown-list" role="presentation">',f){if(f.hasOwnProperty(p)){var c=G.shortcuts.get(l+"."+p);c=c?'<span class="fr-shortcut">'+c+"</span>":"",s+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="'+l+'" data-param1="'+p+'" title="'+f[p]+'">'+G.language.translate(f[p])+"</a></li>"}}s+="</ul>"}return s}(M,Q),L+=h+="</div></div></div>"}return L}function C(d){var c=G.$tb&&G.$tb.data("instance")||G;if(!1===G.events.trigger("buttons.refresh")){return !0}setTimeout(function(){for(var h=c.selection.inEditor()&&c.core.hasFocus(),f=0;f<d.length;f++){var i=b(d[f]),g=i.data("cmd");0===i.parents(".fr-popup").length?h||b.FE.COMMANDS[g]&&b.FE.COMMANDS[g].forcedRefresh?c.button.refresh(i):G.node.hasClass(i.get(0),"fr-dropdown")||(i.removeClass("fr-active"),i.attr("aria-pressed")&&i.attr("aria-pressed",!1)):i.parents(".fr-popup").is(":visible")&&c.button.refresh(i)}},0)}function v(){C(F),C(I)}function q(){F=[],I=[]}G.shared.popup_buttons||(G.shared.popup_buttons=[]),I=G.shared.popup_buttons;var z=null;function w(){clearTimeout(z),z=setTimeout(v,50)}return{_init:function(){G.opts.toolbarInline?G.events.on("toolbar.show",v):(G.events.on("mouseup",w),G.events.on("keyup",w),G.events.on("blur",w),G.events.on("focus",w),G.events.on("contentChanged",w),G.helpers.isMobile()&&G.events.$on(G.$doc,"selectionchange",v)),G.events.on("shared.destroy",q)},buildList:function(g,d){for(var l="",f=0;f<g.length;f++){var h=g[f],c=b.FE.COMMANDS[h];c&&"undefined"!=typeof c.plugin&&G.opts.pluginsEnabled.indexOf(c.plugin)<0||(c?l+=A(h,c,void 0===d||0<=d.indexOf(h)):"|"==h?l+='<div class="fr-separator fr-vs" role="separator" aria-orientation="vertical"></div>':"-"==h&&(l+='<div class="fr-separator fr-hs" role="separator" aria-orientation="horizontal"></div>'))}return l},bindCommands:function(c,f){G.events.bindClick(c,".fr-command:not(.fr-disabled)",y),G.events.$on(c,G._mousedown+" "+G._mouseup+" "+G._move,".fr-dropdown-menu",B,!0),G.events.$on(c,G._mousedown+" "+G._mouseup+" "+G._move,".fr-dropdown-menu .fr-dropdown-wrapper",k,!0);var h=c.get(0).ownerDocument,d="defaultView" in h?h.defaultView:h.parentWindow,g=function(i){(!i||i.type==G._mouseup&&i.target!=b("html").get(0)||"keydown"==i.type&&(G.keys.isCharacter(i.which)&&!G.keys.ctrlKey(i)||i.which==b.FE.KEYCODE.ESC))&&E(c)};G.events.$on(b(d),G._mouseup+" resize keydown",g,!0),G.opts.iframe&&G.events.$on(G.$win,G._mouseup,g,!0),G.node.hasClass(c.get(0),"fr-popup")?b.merge(I,c.find(".fr-btn").toArray()):b.merge(F,c.find(".fr-btn").toArray()),G.tooltip.bind(c,".fr-btn, .fr-title",f)},refresh:function(f){var c,g=f.parents(".fr-popup, .fr-toolbar").data("instance")||G,d=f.data("cmd");G.node.hasClass(f.get(0),"fr-dropdown")?c=f.next():(f.removeClass("fr-active"),f.attr("aria-pressed")&&f.attr("aria-pressed",!1)),b.FE.COMMANDS[d]&&b.FE.COMMANDS[d].refresh?b.FE.COMMANDS[d].refresh.apply(g,[f,c]):G.refresh[d]&&g.refresh[d](f,c)},bulkRefresh:v,exec:j,click:H,hideActiveDropdowns:E,getButtons:D}},b.FE.MODULES.modals=function(f){f.shared.modals||(f.shared.modals={});var g,i=f.shared.modals;function h(){for(var d in i){var c=i[d];c&&c.$modal&&c.$modal.removeData().remove()}g&&g.removeData().remove(),i={}}function k(l,c){if(i[l]){var m=i[l].$modal,d=m.data("instance")||f;d.events.enableBlur(),m.hide(),g.hide(),b(d.o_doc).find("body:first").removeClass("prevent-scroll fr-mobile"),m.removeClass("fr-active"),c||(d.accessibility.restoreSelection(),d.events.trigger("modals.hide"))}}function j(d){var c;if("string"==typeof d){if(!i[d]){return}c=i[d].$modal}else{c=d}return c&&f.node.hasClass(c,"fr-active")&&f.core.sameInstance(c)||!1}return{_init:function(){f.events.on("shared.destroy",h,!0)},get:function(c){return i[c]},create:function(s,p,l){if(f.shared.$overlay||(f.shared.$overlay=b('<div class="fr-overlay">').appendTo("body:first")),g=f.shared.$overlay,f.opts.theme&&g.addClass(f.opts.theme+"-theme"),!i[s]){var m=(q=p,d=l,c='<div tabIndex="-1" class="fr-modal'+(f.opts.theme?" "+f.opts.theme+"-theme":"")+'"><div class="fr-modal-wrapper">',c+='<div class="fr-modal-head">'+q+'<i title="'+f.language.translate("Cancel")+'" class="fa fa-times fr-modal-close"></i></div>',c+='<div tabIndex="-1" class="fr-modal-body">'+d+"</div>",b(c+="</div></div>"));i[s]={$modal:m,$head:m.find(".fr-modal-head"),$body:m.find(".fr-modal-body")},f.helpers.isMobile()||m.addClass("fr-desktop"),m.appendTo("body:first"),f.events.$on(m,"click",".fr-modal-close",function(){k(s)},!0),i[s].$body.css("margin-top",i[s].$head.outerHeight()),f.events.$on(m,"keydown",function(o){var n=o.which;return n==b.FE.KEYCODE.ESC?(k(s),f.accessibility.focusModalButton(m),!1):!(!b(o.currentTarget).is("input[type=text], textarea")&&n!=b.FE.KEYCODE.ARROW_UP&&n!=b.FE.KEYCODE.ARROW_DOWN&&!f.keys.isBrowserAction(o)&&(o.preventDefault(),o.stopPropagation(),1))},!0),k(s,!0)}var q,d,c;return i[s]},show:function(d){if(i[d]){var c=i[d].$modal;c.data("instance",f),c.show(),g.show(),b(f.o_doc).find("body:first").addClass("prevent-scroll"),f.helpers.isMobile()&&b(f.o_doc).find("body:first").addClass("fr-mobile"),c.addClass("fr-active"),f.accessibility.focusModal(c)}},hide:k,resize:function(q){if(i[q]){var l=i[q],v=l.$modal,p=l.$body,u=b(f.o_win).height(),d=v.find(".fr-modal-wrapper"),c=u-d.outerHeight(!0)+(d.height()-(p.outerHeight(!0)-p.height())),m="auto";c<p.get(0).scrollHeight&&(m=c),p.height(m)}},isVisible:j,areVisible:function(d){for(var c in i){if(i.hasOwnProperty(c)&&j(c)&&(void 0===d||i[c].$modal.data("instance")==d)){return i[c].$modal}}return !1}}},b.FE.POPUP_TEMPLATES={"text.edit":"[_EDIT_]"},b.FE.RegisterTemplate=function(d,c){b.FE.POPUP_TEMPLATES[d]=c},b.FE.MODULES.popups=function(x){x.shared.popups||(x.shared.popups={});var v=x.shared.popups;function d(f,c){c.is(":visible")||(c=x.$sc),c.is(v[f].data("container"))||(v[f].data("container",c),c.append(v[f]))}function z(c){return v[c]&&x.node.hasClass(v[c],"fr-active")&&x.core.sameInstance(v[c])||!1}function s(f){for(var c in v){if(v.hasOwnProperty(c)&&z(c)&&(void 0===f||v[c].data("instance")==f)){return v[c]}}return !1}function k(f){var c=null;(c="string"!=typeof f?f:v[f])&&x.node.hasClass(c,"fr-active")&&(c.removeClass("fr-active fr-above"),x.events.trigger("popups.hide."+f),x.$tb&&(1<x.opts.zIndex?x.$tb.css("zIndex",x.opts.zIndex+1):x.$tb.css("zIndex","")),x.events.disableBlur(),c.find("input, textarea, button").filter(":focus").blur(),c.find("input, textarea").attr("disabled","disabled"))}function r(f){for(var c in void 0===f&&(f=[]),v){v.hasOwnProperty(c)&&f.indexOf(c)<0&&k(c)}}function A(){x.shared.exit_flag=!0}function l(){x.shared.exit_flag=!1}function q(){return x.shared.exit_flag}function j(g,c){var i,f,h=function(p,m){var u=b.FE.POPUP_TEMPLATES[p];if(!u){return null}for(var o in "function"==typeof u&&(u=u.apply(x)),m){m.hasOwnProperty(o)&&(u=u.replace("[_"+o.toUpperCase()+"_]",m[o]))}return u}(g,c);return h?(i=b('<div class="fr-popup'+(x.helpers.isMobile()?" fr-mobile":" fr-desktop")+(x.opts.toolbarInline?" fr-inline":"")+'"><span class="fr-arrow"></span>'+h+"</div>"),x.opts.theme&&i.addClass(x.opts.theme+"-theme"),1<x.opts.zIndex&&(x.opts.editInPopup?i.css("z-index",x.opts.zIndex+2):x.$tb.css("z-index",x.opts.zIndex+2)),"auto"!=x.opts.direction&&i.removeClass("fr-ltr fr-rtl").addClass("fr-"+x.opts.direction),i.find("input, textarea").attr("dir",x.opts.direction).attr("disabled","disabled"),(f=b("body:first")).append(i),i.data("container",f),v[g]=i,x.button.bindCommands(i,!1),i):(i=b('<div class="fr-popup fr-empty"></div>'),(f=b("body:first")).append(i),i.data("container",f),v[g]=i)}function B(c){var e=v[c];return{_windowResize:function(){var f=e.data("instance")||x;!f.helpers.isMobile()&&e.is(":visible")&&(f.events.disableBlur(),f.popups.hide(c),f.events.enableBlur())},_inputFocus:function(h){var f=e.data("instance")||x,i=b(h.currentTarget);if(i.is("input:file")&&i.closest(".fr-layer").addClass("fr-input-focus"),h.preventDefault(),h.stopPropagation(),setTimeout(function(){f.events.enableBlur()},100),f.helpers.isMobile()){var g=b(f.o_win).scrollTop();setTimeout(function(){b(f.o_win).scrollTop(g)},0)}},_inputBlur:function(g){var f=e.data("instance")||x,h=b(g.currentTarget);h.is("input:file")&&h.closest(".fr-layer").removeClass("fr-input-focus"),document.activeElement!=this&&b(this).is(":visible")&&(f.events.blurActive()&&f.events.trigger("blur"),f.events.enableBlur())},_editorKeydown:function(g){var f=e.data("instance")||x;f.keys.ctrlKey(g)||g.which==b.FE.KEYCODE.ALT||g.which==b.FE.KEYCODE.ESC||(z(c)&&e.find(".fr-back:visible").length?f.button.exec(e.find(".fr-back:visible:first")):g.which!=b.FE.KEYCODE.ALT&&f.popups.hide(c))},_preventFocus:function(h){var f=e.data("instance")||x,i=h.originalEvent?h.originalEvent.target||h.originalEvent.originalTarget:null;"mouseup"==h.type||b(i).is(":focus")||f.events.disableBlur(),"mouseup"!=h.type||b(i).hasClass("fr-command")||0<b(i).parents(".fr-command").length||b(i).hasClass("fr-dropdown-content")||x.button.hideActiveDropdowns(e),(x.browser.safari||x.browser.mozilla)&&"mousedown"==h.type&&b(i).is("input[type=file]")&&f.events.disableBlur();var g="input, textarea, button, select, label, .fr-command";if(i&&!b(i).is(g)&&0===b(i).parents(g).length){return h.stopPropagation(),!1}i&&b(i).is(g)&&h.stopPropagation(),l()},_editorMouseup:function(){e.is(":visible")&&q()&&0<e.find("input:focus, textarea:focus, button:focus, select:focus").filter(":visible").length&&x.events.disableBlur()},_windowMouseup:function(g){if(!x.core.sameInstance(e)){return !0}var f=e.data("instance")||x;e.is(":visible")&&q()&&(g.stopPropagation(),f.markers.remove(),f.popups.hide(c),l())},_windowKeydown:function(g){if(!x.core.sameInstance(e)){return !0}var f=e.data("instance")||x,h=g.which;if(b.FE.KEYCODE.ESC==h){if(f.popups.isVisible(c)&&f.opts.toolbarInline){return g.stopPropagation(),f.popups.isVisible(c)&&(e.find(".fr-back:visible").length?(f.button.exec(e.find(".fr-back:visible:first")),f.accessibility.focusPopupButton(e)):e.find(".fr-dismiss:visible").length?f.button.exec(e.find(".fr-dismiss:visible:first")):(f.popups.hide(c),f.toolbar.showInline(null,!0),f.accessibility.FocusPopupButton(e))),!1}if(f.popups.isVisible(c)){return e.find(".fr-back:visible").length?(f.button.exec(e.find(".fr-back:visible:first")),f.accessibility.focusPopupButton(e)):e.find(".fr-dismiss:visible").length?f.button.exec(e.find(".fr-dismiss:visible:first")):(f.popups.hide(c),f.accessibility.focusPopupButton(e)),!1}}},_doPlaceholder:function(){0===b(this).next().length&&b(this).attr("placeholder")&&b(this).after('<label for="'+b(this).attr("id")+'">'+b(this).attr("placeholder")+"</label>"),b(this).toggleClass("fr-not-empty",""!==b(this).val())},_repositionPopup:function(){if(!x.opts.height&&!x.opts.heightMax||x.opts.toolbarInline){return !0}if(x.$wp&&z(c)&&e.parent().get(0)==x.$sc.get(0)){var g=e.offset().top-x.$wp.offset().top,f=x.$wp.outerHeight();x.node.hasClass(e.get(0),"fr-above")&&(g+=e.outerHeight()),f<g||g<0?e.addClass("fr-hidden"):e.removeClass("fr-hidden")}}}}function y(f,c){x.events.on("mouseup",f._editorMouseup,!0),x.$wp&&x.events.on("keydown",f._editorKeydown),x.events.on("blur",function(){s()&&x.markers.remove(),r()}),x.$wp&&!x.helpers.isMobile()&&x.events.$on(x.$wp,"scroll.popup"+c,f._repositionPopup),x.events.on("window.mouseup",f._windowMouseup,!0),x.events.on("window.keydown",f._windowKeydown,!0),v[c].data("inst"+x.id,!0),x.events.on("destroy",function(){x.core.sameInstance(v[c])&&v[c].removeClass("fr-active").appendTo("body:first")},!0)}function w(){for(var f in v){if(v.hasOwnProperty(f)){var c=v[f];c&&(c.html("").removeData().remove(),v[f]=null)}}v=[]}return x.shared.exit_flag=!1,{_init:function(){x.events.on("shared.destroy",w,!0),x.events.on("window.mousedown",A),x.events.on("window.touchmove",l),x.events.$on(b(x.o_win),"scroll",l),x.events.on("mousedown",function(c){s()&&(c.stopPropagation(),x.$el.find(".fr-marker").remove(),A(),x.events.disableBlur())})},create:function(g,c){var h=j(g,c),f=B(g);return y(f,g),x.events.$on(h,"mousedown mouseup touchstart touchend touch","*",f._preventFocus,!0),x.events.$on(h,"focus","input, textarea, button, select",f._inputFocus,!0),x.events.$on(h,"blur","input, textarea, button, select",f._inputBlur,!0),x.accessibility.registerPopup(g),x.events.$on(h,"keydown keyup change input","input, textarea",f._doPlaceholder,!0),x.helpers.isIOS()&&x.events.$on(h,"touchend","label",function(){b("#"+b(this).attr("for")).prop("checked",function(m,i){return !i})},!0),x.events.$on(b(x.o_win),"resize",f._windowResize,!0),h},get:function(f){var c=v[f];return c&&!c.data("inst"+x.id)&&y(B(f),f),c},show:function(p,D,g,c){if(z(p)||(s()&&0<x.$el.find(".fr-marker").length?(x.events.disableBlur(),x.selection.restore()):s()||(x.events.disableBlur(),x.events.focus(),x.events.enableBlur())),r([p]),!v[p]){return !1}var f=x.button.getButtons(".fr-dropdown.fr-active");f.removeClass("fr-active").attr("aria-expanded",!1).parent(".fr-toolbar").css("zIndex",""),f.next().attr("aria-hidden",!0),v[p].data("instance",x),x.$tb&&x.$tb.data("instance",x);var m=v[p].outerWidth(),C=z(p);v[p].addClass("fr-active").removeClass("fr-hidden").find("input, textarea").removeAttr("disabled");var E,h,u=v[p].data("container");E=p,(h=u).is(":visible")||(h=x.$sc),0===h.find([v[E]]).length&&h.append(v[E]),x.opts.toolbarInline&&u&&x.$tb&&u.get(0)==x.$tb.get(0)&&(d(p,x.$sc),g=x.$tb.offset().top-x.helpers.getPX(x.$tb.css("margin-top")),D=x.$tb.offset().left+x.$tb.outerWidth()/2+(parseFloat(x.$tb.find(".fr-arrow").css("margin-left"))||0)+x.$tb.find(".fr-arrow").outerWidth()/2,x.node.hasClass(x.$tb.get(0),"fr-above")&&g&&(g+=x.$tb.outerHeight()),c=0),u=v[p].data("container"),!x.opts.iframe||c||C||(D&&(D-=x.$iframe.offset().left),g&&(g-=x.$iframe.offset().top)),u.is(x.$tb)?x.$tb.css("zIndex",(x.opts.zIndex||1)+4):v[p].css("zIndex",(x.opts.zIndex||1)+4),D&&(D-=m/2),x.opts.toolbarBottom&&u&&x.$tb&&u.get(0)==x.$tb.get(0)&&(v[p].addClass("fr-above"),g&&(g-=v[p].outerHeight())),v[p].removeClass("fr-active"),x.position.at(D,g,v[p],c||0),v[p].addClass("fr-active"),C||x.accessibility.focusPopup(v[p]),x.opts.toolbarInline&&x.toolbar.hide(),x.events.trigger("popups.show."+p),B(p)._repositionPopup(),l()},hide:k,onHide:function(f,c){x.events.on("popups.hide."+f,c)},hideAll:r,setContainer:d,refresh:function(g){v[g].data("instance",x),x.events.trigger("popups.refresh."+g);for(var c=v[g].find(".fr-command"),h=0;h<c.length;h++){var f=b(c[h]);0===f.parents(".fr-dropdown-menu").length&&x.button.refresh(f)}},onRefresh:function(f,c){x.events.on("popups.refresh."+f,c)},onShow:function(f,c){x.events.on("popups.show."+f,c)},isVisible:z,areVisible:s}},b.FE.MODULES.position=function(f){function h(){var l=f.selection.ranges(0).getBoundingClientRect();if(0===l.top&&0===l.left&&0===l.width||0===l.height){var i=!1;0===f.$el.find(".fr-marker").length&&(f.selection.save(),i=!0);var p=f.$el.find(".fr-marker:first");p.css("display","inline"),p.css("line-height","");var k=p.offset(),m=p.outerHeight();p.css("display","none"),p.css("line-height",0),(l={}).left=k.left,l.width=0,l.height=m,l.top=k.top-(f.helpers.isMobile()&&!f.helpers.isIOS()||f.opts.iframe?0:f.helpers.scrollTop()),l.right=1,l.bottom=1,l.ok=!0,i&&f.selection.restore()}return l}function d(v,x,p,k){var m=p.data("container");!m||"BODY"===m.get(0).tagName&&"static"==m.css("position")||(v&&(v-=m.offset().left),x&&(x-=m.offset().top),"BODY"!=m.get(0).tagName?(v&&(v+=m.get(0).scrollLeft),x&&(x+=m.get(0).scrollTop)):"absolute"==m.css("position")&&(v&&(v+=m.position().left),x&&(x+=m.position().top))),f.opts.iframe&&m&&f.$tb&&m.get(0)!=f.$tb.get(0)&&(v&&(v+=f.$iframe.offset().left),x&&(x+=f.$iframe.offset().top));var u,w,y=(u=v,w=p.outerWidth(!0),u+w>f.$sc.get(0).clientWidth-10&&(u=f.$sc.get(0).clientWidth-w-10),u<0&&(u=10),u);if(v){p.css("left",y);var q=p.data("fr-arrow");q||(q=p.find(".fr-arrow"),p.data("fr-arrow",q)),q.data("margin-left")||q.data("margin-left",f.helpers.getPX(q.css("margin-left"))),q.css("margin-left",v-y+q.data("margin-left"))}x&&p.css("top",function(B,z,D){var A=B.outerHeight(!0);if(!f.helpers.isMobile()&&f.$tb&&B.parent().get(0)!=f.$tb.get(0)){var C=B.parent().offset().top,s=z-A-(D||0);B.parent().get(0)==f.$sc.get(0)&&(C-=B.parent().position().top);var l=f.$sc.get(0).clientHeight;C+z+A>f.$sc.offset().top+l&&0<B.parent().offset().top+s&&0<s?s>f.$wp.scrollTop()&&(z=s,B.addClass("fr-above")):B.removeClass("fr-above")}return z}(p,x,k))}function j(u){var w=b(u),m=w.is(".fr-sticky-on"),q=w.data("sticky-top"),v=w.data("sticky-scheduled");if(void 0===q){w.data("sticky-top",0);var l=b('<div class="fr-sticky-dummy" style="height: '+w.outerHeight()+'px;"></div>');f.$box.prepend(l)}else{f.$box.find(".fr-sticky-dummy").css("height",w.outerHeight())}if(f.core.hasFocus()||0<f.$tb.find("input:visible:focus").length){var k=f.helpers.scrollTop(),p=Math.min(Math.max(k-f.$tb.parent().offset().top,0),f.$tb.parent().outerHeight()-w.outerHeight());p!=q&&p!=v&&(clearTimeout(w.data("sticky-timeout")),w.data("sticky-scheduled",p),w.outerHeight()<k-f.$tb.parent().offset().top&&w.addClass("fr-opacity-0"),w.data("sticky-timeout",setTimeout(function(){var n=f.helpers.scrollTop(),i=Math.min(Math.max(n-f.$tb.parent().offset().top,0),f.$tb.parent().outerHeight()-w.outerHeight());0<i&&"BODY"==f.$tb.parent().get(0).tagName&&(i+=f.$tb.parent().position().top),i!=q&&(w.css("top",Math.max(i,0)),w.data("sticky-top",i),w.data("sticky-scheduled",i)),w.removeClass("fr-opacity-0")},100))),m||(w.css("top","0"),w.width(f.$tb.parent().width()),w.addClass("fr-sticky-on"),f.$box.addClass("fr-sticky-box"))}else{clearTimeout(b(u).css("sticky-timeout")),w.css("top","0"),w.css("position",""),w.width(""),w.data("sticky-top",0),w.removeClass("fr-sticky-on"),f.$box.removeClass("fr-sticky-box")}}function c(D){if(D.offsetWidth){var I,w,k=b(D),v=k.outerHeight(),z=k.data("sticky-position"),G=b("body"==f.opts.scrollableContainer?f.o_win:f.opts.scrollableContainer).outerHeight(),J=0,y=0;"body"!==f.opts.scrollableContainer&&(J=f.$sc.offset().top,y=b(f.o_win).outerHeight()-J-G);var E="body"==f.opts.scrollableContainer?f.helpers.scrollTop():J,F=k.is(".fr-sticky-on");k.data("sticky-parent")||k.data("sticky-parent",k.parent());var C=k.data("sticky-parent"),q=C.offset().top,H=C.outerHeight();if(k.data("sticky-offset")?f.$box.find(".fr-sticky-dummy").css("height",v+"px"):(k.data("sticky-offset",!0),k.after('<div class="fr-sticky-dummy" style="height: '+v+'px;"></div>')),!z){var B="auto"!==k.css("top")||"auto"!==k.css("bottom");B||k.css("position","fixed"),z={top:f.node.hasClass(k.get(0),"fr-top"),bottom:f.node.hasClass(k.get(0),"fr-bottom")},B||k.css("position",""),k.data("sticky-position",z),k.data("top",f.node.hasClass(k.get(0),"fr-top")?k.css("top"):"auto"),k.data("bottom",f.node.hasClass(k.get(0),"fr-bottom")?k.css("bottom"):"auto")}I=f.helpers.getPX(k.data("top")),w=f.helpers.getPX(k.data("bottom"));var A=z.top&&q<E+I&&E+I<=q+H-v&&(f.helpers.isInViewPort(f.$sc.get(0))||"body"==f.opts.scrollableContainer),x=z.bottom&&q+v<E+G-w&&E+G-w<q+H;A||x?(k.css("width",C.get(0).getBoundingClientRect().width+"px"),F||(k.addClass("fr-sticky-on"),k.removeClass("fr-sticky-off"),k.css("top")&&("auto"!=k.data("top")?k.css("top",f.helpers.getPX(k.data("top"))+J):k.data("top","auto")),k.css("bottom")&&("auto"!=k.data("bottom")?k.css("bottom",f.helpers.getPX(k.data("bottom"))+y):k.css("bottom","auto")))):f.node.hasClass(k.get(0),"fr-sticky-off")||(k.width(""),k.removeClass("fr-sticky-on"),k.addClass("fr-sticky-off"),k.css("top")&&"auto"!=k.data("top")&&z.top&&k.css("top",0),k.css("bottom")&&"auto"!=k.data("bottom")&&z.bottom&&k.css("bottom",0))}}function g(){if(f._stickyElements){for(var i=0;i<f._stickyElements.length;i++){c(f._stickyElements[i])}}}return{_init:function(){!function(){if(f._stickyElements=[],f.helpers.isIOS()){var e=function(){if(f.helpers.requestAnimationFrame()(e),!1!==f.events.trigger("position.refresh")){for(var i=0;i<f._stickyElements.length;i++){j(f._stickyElements[i])}}};e(),f.events.$on(b(f.o_win),"scroll",function(){if(f.core.hasFocus()){for(var l=0;l<f._stickyElements.length;l++){var i=b(f._stickyElements[l]),m=i.parent(),k=f.helpers.scrollTop();i.outerHeight()<k-m.offset().top&&(i.addClass("fr-opacity-0"),i.data("sticky-top",-1),i.data("sticky-scheduled",-1))}}},!0)}else{"body"!==f.opts.scrollableContainer&&f.events.$on(b(f.opts.scrollableContainer),"scroll",g,!0),f.events.$on(b(f.o_win),"scroll",g,!0),f.events.$on(b(f.o_win),"resize",g,!0),f.events.on("initialized",g),f.events.on("focus",g),f.events.$on(b(f.o_win),"resize","textarea",g,!0)}f.events.on("destroy",function(){f._stickyElements=[]})}()},forSelection:function(l){var i=h();l.css({top:0,left:0});var m=i.top+i.height,k=i.left+i.width/2-l.get(0).offsetWidth/2+f.helpers.scrollLeft();f.opts.iframe||(m+=f.helpers.scrollTop()),d(k,m,l,i.height)},addSticky:function(i){i.addClass("fr-sticky"),f.helpers.isIOS()&&i.addClass("fr-sticky-ios"),i.removeClass("fr-sticky"),f._stickyElements.push(i.get(0))},refresh:g,at:d,getBoundingRect:h}},b.FE.MODULES.refresh=function(d){function c(g,f){g.toggleClass("fr-disabled",f).attr("aria-disabled",f)}return{undo:function(f){c(f,!d.undo.canDo())},redo:function(f){c(f,!d.undo.canRedo())},outdent:function(h){if(d.node.hasClass(h.get(0),"fr-no-refresh")){return !1}for(var f=d.selection.blocks(),i=0;i<f.length;i++){var g="rtl"==d.opts.direction||"rtl"==b(f[i]).css("direction")?"margin-right":"margin-left";if("LI"==f[i].tagName||"LI"==f[i].parentNode.tagName){return c(h,!1),!0}if(0<d.helpers.getPX(b(f[i]).css(g))){return c(h,!1),!0}}c(h,!0)},indent:function(h){if(d.node.hasClass(h.get(0),"fr-no-refresh")){return !1}for(var f=d.selection.blocks(),i=0;i<f.length;i++){for(var g=f[i].previousSibling;g&&g.nodeType==Node.TEXT_NODE&&0===g.textContent.length;){g=g.previousSibling}if("LI"!=f[i].tagName||g){return c(h,!1),!0}c(h,!0)}}}},b.extend(b.FE.DEFAULTS,{editInPopup:!1}),b.FE.MODULES.textEdit=function(d){function c(){d.events.$on(d.$el,d._mouseup,function(){setTimeout(function(){var g,f;f=d.popups.get("text.edit"),g="INPUT"===d.$el.prop("tagName")?d.$el.attr("placeholder"):d.$el.text(),f.find("input").val(g).trigger("change"),d.popups.setContainer("text.edit",d.$sc),d.popups.show("text.edit",d.$el.offset().left+d.$el.outerWidth()/2,d.$el.offset().top+d.$el.outerHeight(),d.$el.outerHeight())},10)})}return{_init:function(){var f;d.opts.editInPopup&&(f={edit:'<div id="fr-text-edit-'+d.id+'" class="fr-layer fr-text-edit-layer"><div class="fr-input-line"><input type="text" placeholder="'+d.language.translate("Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="updateText" tabIndex="2">'+d.language.translate("Update")+"</button></div></div>"},d.popups.create("text.edit",f),c())},update:function(){var f=d.popups.get("text.edit").find("input").val();0===f.length&&(f=d.opts.placeholderText),"INPUT"===d.$el.prop("tagName")?d.$el.attr("placeholder",f):d.$el.text(f),d.events.trigger("contentChanged"),d.popups.hide("text.edit")}}},b.FE.RegisterCommand("updateText",{focus:!1,undo:!1,callback:function(){this.textEdit.update()}}),b.extend(b.FE.DEFAULTS,{toolbarBottom:!1,toolbarButtons:null,toolbarButtonsXS:null,toolbarButtonsSM:null,toolbarButtonsMD:null,toolbarContainer:null,toolbarInline:!1,toolbarSticky:!0,toolbarStickyOffset:0,toolbarVisibleWithoutSelection:!1}),b.FE.TOOLBAR_BUTTONS=["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","|","fontFamily","fontSize","color","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","-","insertLink","insertImage","insertVideo","embedly","insertFile","insertTable","|","emoticons","specialCharacters","insertHR","selectAll","clearFormatting","|","print","spellChecker","help","html","|","undo","redo"],b.FE.TOOLBAR_BUTTONS_MD=null,b.FE.TOOLBAR_BUTTONS_SM=["bold","italic","underline","|","fontFamily","fontSize","insertLink","insertImage","table","|","undo","redo"],b.FE.TOOLBAR_BUTTONS_XS=["bold","italic","fontFamily","fontSize","|","undo","redo"],b.FE.MODULES.toolbar=function(j){var g=[];function q(d,c){for(var f=0;f<c.length;f++){"-"!=c[f]&&"|"!=c[f]&&d.indexOf(c[f])<0&&d.push(c[f])}}function z(){var c=j.helpers.screenSize();return g[c]}function w(){var f=z();j.$tb.find(".fr-separator").remove(),j.$tb.find("> .fr-command").addClass("fr-hidden");for(var c=0;c<f.length;c++){if("|"==f[c]||"-"==f[c]){j.$tb.append(j.button.buildList([f[c]]))}else{var i=j.$tb.find('> .fr-command[data-cmd="'+f[c]+'"]'),d=null;j.node.hasClass(i.next().get(0),"fr-dropdown-menu")&&(d=i.next()),i.removeClass("fr-hidden").appendTo(j.$tb),d&&d.appendTo(j.$tb)}}}function B(d,c){setTimeout(function(){if((!d||d.which!=b.FE.KEYCODE.ESC)&&j.selection.inEditor()&&j.core.hasFocus()&&!j.popups.areVisible()&&(j.opts.toolbarVisibleWithoutSelection||!j.selection.isCollapsed()&&!j.keys.isIME()||c)){if(j.$tb.data("instance",j),!1===j.events.trigger("toolbar.show",[d])){return !1}j.$tb.show(),j.opts.toolbarContainer||j.position.forSelection(j.$tb),1<j.opts.zIndex?j.$tb.css("z-index",j.opts.zIndex+1):j.$tb.css("z-index",null)}},0)}function k(c){return(!c||"blur"!==c.type||document.activeElement!==j.el)&&(!(!c||"keydown"!==c.type||!j.keys.ctrlKey(c))||(!!j.button.getButtons(".fr-dropdown.fr-active").next().find(j.o_doc.activeElement).length||void (!1!==j.events.trigger("toolbar.hide")&&j.$tb.hide())))}g[b.FE.XS]=j.opts.toolbarButtonsXS||j.opts.toolbarButtons||b.FE.TOOLBAR_BUTTONS_XS||b.FE.TOOLBAR_BUTTONS||[],g[b.FE.SM]=j.opts.toolbarButtonsSM||j.opts.toolbarButtons||b.FE.TOOLBAR_BUTTONS_SM||b.FE.TOOLBAR_BUTTONS||[],g[b.FE.MD]=j.opts.toolbarButtonsMD||j.opts.toolbarButtons||b.FE.TOOLBAR_BUTTONS_MD||b.FE.TOOLBAR_BUTTONS||[],g[b.FE.LG]=j.opts.toolbarButtons||b.FE.TOOLBAR_BUTTONS||[];var C=null;function m(c){clearTimeout(C),c&&c.which==b.FE.KEYCODE.ESC||(C=setTimeout(B,j.opts.typingTimer))}function x(){j.events.on("window.mousedown",k),j.events.on("keydown",k),j.events.on("blur",k),j.helpers.isMobile()||j.events.on("window.mouseup",B),j.helpers.isMobile()?j.helpers.isIOS()||(j.events.on("window.touchend",B),j.browser.mozilla&&setInterval(B,200)):j.events.on("window.keyup",m),j.events.on("keydown",function(c){c&&c.which==b.FE.KEYCODE.ESC&&k()}),j.events.on("keydown",function(c){if(c.which==b.FE.KEYCODE.ALT){return c.stopPropagation(),!1}},!0),j.events.$on(j.$wp,"scroll.toolbar",B),j.events.on("commands.after",B),j.helpers.isMobile()&&(j.events.$on(j.$doc,"selectionchange",m),j.events.$on(j.$doc,"orientationchange",B))}function y(){j.$tb.html("").removeData().remove(),j.$tb=null}function v(){j.$box.removeClass("fr-top fr-bottom fr-inline fr-basic"),j.$box.find(".fr-sticky-dummy").remove()}function h(){j.opts.theme&&j.$tb.addClass(j.opts.theme+"-theme"),1<j.opts.zIndex&&j.$tb.css("z-index",j.opts.zIndex+1),"auto"!=j.opts.direction&&j.$tb.removeClass("fr-ltr fr-rtl").addClass("fr-"+j.opts.direction),j.helpers.isMobile()?j.$tb.addClass("fr-mobile"):j.$tb.addClass("fr-desktop"),j.opts.toolbarContainer?(j.opts.toolbarInline&&(x(),k()),j.opts.toolbarBottom?j.$tb.addClass("fr-bottom"):j.$tb.addClass("fr-top")):j.opts.toolbarInline?(j.$sc.append(j.$tb),j.$tb.data("container",j.$sc),j.$tb.addClass("fr-inline"),j.$tb.prepend('<span class="fr-arrow"></span>'),x(),j.opts.toolbarBottom=!1):(j.opts.toolbarBottom&&!j.helpers.isIOS()?(j.$box.append(j.$tb),j.$tb.addClass("fr-bottom"),j.$box.addClass("fr-bottom")):(j.opts.toolbarBottom=!1,j.$box.prepend(j.$tb),j.$tb.addClass("fr-top"),j.$box.addClass("fr-top")),j.$tb.addClass("fr-basic"),j.opts.toolbarSticky&&(j.opts.toolbarStickyOffset&&(j.opts.toolbarBottom?j.$tb.css("bottom",j.opts.toolbarStickyOffset):j.$tb.css("top",j.opts.toolbarStickyOffset)),j.position.addSticky(j.$tb))),function(){var d=b.merge([],z());q(d,g[b.FE.XS]),q(d,g[b.FE.SM]),q(d,g[b.FE.MD]),q(d,g[b.FE.LG]);for(var c=d.length-1;0<=c;c--){"-"!=d[c]&&"|"!=d[c]&&d.indexOf(d[c])<c&&d.splice(c,1)}var f=j.button.buildList(d,z());j.$tb.append(f),j.button.bindCommands(j.$tb)}(),j.events.$on(b(j.o_win),"resize",w),j.events.$on(b(j.o_win),"orientationchange",w),j.accessibility.registerToolbar(j.$tb),j.events.$on(j.$tb,j._mousedown+" "+j._mouseup,function(d){var c=d.originalEvent?d.originalEvent.target||d.originalEvent.originalTarget:null;if(c&&"INPUT"!=c.tagName&&!j.edit.isDisabled()){return d.stopPropagation(),d.preventDefault(),!1}},!0)}var A=!1;return{_init:function(){if(j.$sc=b(j.opts.scrollableContainer).first(),!j.$wp){return !1}j.opts.toolbarContainer?(j.shared.$tb?(j.$tb=j.shared.$tb,j.opts.toolbarInline&&x()):(j.shared.$tb=b('<div class="fr-toolbar"></div>'),j.$tb=j.shared.$tb,b(j.opts.toolbarContainer).append(j.$tb),h(),j.$tb.data("instance",j)),j.opts.toolbarInline?j.$box.addClass("fr-inline"):j.$box.addClass("fr-basic"),j.events.on("focus",function(){j.$tb.data("instance",j)},!0),j.opts.toolbarInline=!1):j.opts.toolbarInline?(j.$box.addClass("fr-inline"),j.shared.$tb?(j.$tb=j.shared.$tb,x()):(j.shared.$tb=b('<div class="fr-toolbar"></div>'),j.$tb=j.shared.$tb,h())):(j.$box.addClass("fr-basic"),j.$tb=b('<div class="fr-toolbar"></div>'),h(),j.$tb.data("instance",j)),j.events.on("destroy",v,!0),j.events.on(j.opts.toolbarInline||j.opts.toolbarContainer?"shared.destroy":"destroy",y,!0)},hide:k,show:function(){if(!1===j.events.trigger("toolbar.show")){return !1}j.$tb.show()},showInline:B,disable:function(){!A&&j.$tb&&(j.$tb.find("> .fr-command").addClass("fr-disabled fr-no-refresh").attr("aria-disabled",!0),A=!0)},enable:function(){A&&j.$tb&&(j.$tb.find("> .fr-command").removeClass("fr-disabled fr-no-refresh").attr("aria-disabled",!1),A=!1),j.button.bulkRefresh()}}}});