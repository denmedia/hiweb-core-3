/*!
 * froala_editor v2.8.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
;!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(c,b){return b===undefined&&(b="undefined"!=typeof window?require("jquery"):require("jquery")(c)),a(b)}:a(window.jQuery)}(function(a){a.extend(a.FE.DEFAULTS,{dragInline:!0}),a.FE.PLUGINS.draggable=function(k){function l(d){return !(!d.originalEvent||!d.originalEvent.target||d.originalEvent.target.nodeType!=Node.TEXT_NODE)||(d.target&&"A"==d.target.tagName&&1==d.target.childNodes.length&&"IMG"==d.target.childNodes[0].tagName&&(d.target=d.target.childNodes[0]),a(d.target).hasClass("fr-draggable")?(k.undo.canDo()||k.undo.saveStep(),k.opts.dragInline?k.$el.attr("contenteditable",!0):k.$el.attr("contenteditable",!1),k.opts.toolbarInline&&k.toolbar.hide(),a(d.target).addClass("fr-dragging"),k.browser.msie||k.browser.edge||k.selection.clear(),void d.originalEvent.dataTransfer.setData("text","Froala")):(d.preventDefault(),!1))}function j(d){return !(d&&("HTML"==d.tagName||"BODY"==d.tagName||k.node.isElement(d)))}function m(f,d,g){k.opts.iframe&&(f+=k.$iframe.offset().top,d+=k.$iframe.offset().left),c.offset().top!=f&&c.css("top",f),c.offset().left!=d&&c.css("left",d),c.width()!=g&&c.css("width",g)}function s(d){d.originalEvent.dataTransfer.dropEffect="move",k.opts.dragInline?function(){for(var g=null,f=0;f<a.FE.INSTANCES.length;f++){if((g=a.FE.INSTANCES[f].$el.find(".fr-dragging")).length){return g.get(0)}}}()||!k.browser.msie&&!k.browser.edge||d.preventDefault():(d.preventDefault(),function(w){var y=k.doc.elementFromPoint(w.originalEvent.pageX-k.win.pageXOffset,w.originalEvent.pageY-k.win.pageYOffset);if(!j(y)){for(var p=0,f=y;!j(f)&&f==y&&0<w.originalEvent.pageY-k.win.pageYOffset-p;){p++,f=k.doc.elementFromPoint(w.originalEvent.pageX-k.win.pageXOffset,w.originalEvent.pageY-k.win.pageYOffset-p)}(!j(f)||c&&0===k.$el.find(f).length&&f!=c.get(0))&&(f=null);for(var x=0,g=y;!j(g)&&g==y&&w.originalEvent.pageY-k.win.pageYOffset+x<a(k.doc).height();){x++,g=k.doc.elementFromPoint(w.originalEvent.pageX-k.win.pageXOffset,w.originalEvent.pageY-k.win.pageYOffset+x)}(!j(g)||c&&0===k.$el.find(g).length&&g!=c.get(0))&&(g=null),y=null==g&&f?f:g&&null==f?g:g&&f?p<x?f:g:null}if(a(y).hasClass("fr-drag-helper")){return}if(y&&!k.node.isBlock(y)&&(y=k.node.blockParent(y)),y&&0<=["TD","TH","TR","THEAD","TBODY"].indexOf(y.tagName)&&(y=a(y).parents("table").get(0)),y&&0<=["LI"].indexOf(y.tagName)&&(y=a(y).parents("UL, OL").get(0)),y&&!a(y).hasClass("fr-drag-helper")){var v;c||(a.FE.$draggable_helper||(a.FE.$draggable_helper=a('<div class="fr-drag-helper"></div>')),c=a.FE.$draggable_helper,k.events.on("shared.destroy",function(){c.html("").removeData().remove(),c=null},!0)),v=w.originalEvent.pageY<a(y).offset().top+a(y).outerHeight()/2;var u=a(y),z=0;v||0!==u.next().length?(v||(u=u.next()),"before"==c.data("fr-position")&&u.is(c.data("fr-tag"))||(0<u.prev().length&&(z=parseFloat(u.prev().css("margin-bottom"))||0),z=Math.max(z,parseFloat(u.css("margin-top"))||0),m(u.offset().top-z/2-k.$box.offset().top,u.offset().left-k.win.pageXOffset-k.$box.offset().left,u.width()),c.data("fr-position","before"))):"after"==c.data("fr-position")&&u.is(c.data("fr-tag"))||(z=parseFloat(u.css("margin-bottom"))||0,m(u.offset().top+a(y).height()+z/2-k.$box.offset().top,u.offset().left-k.win.pageXOffset-k.$box.offset().left,u.width()),c.data("fr-position","after")),c.data("fr-tag",u),c.addClass("fr-visible"),c.appendTo(k.$box)}else{c&&0<k.$box.find(c).length&&c.removeClass("fr-visible")}}(d))}function i(d){d.originalEvent.dataTransfer.dropEffect="move",k.opts.dragInline||d.preventDefault()}function b(f){k.$el.attr("contenteditable",!0);var d=k.$el.find(".fr-dragging");c&&c.hasClass("fr-visible")&&k.$box.find(c).length?q(f):d.length&&(f.preventDefault(),f.stopPropagation()),c&&k.$box.find(c).length&&c.removeClass("fr-visible"),d.removeClass("fr-dragging")}function q(p){for(var f,v,g=0;g<a.FE.INSTANCES.length;g++){if((f=a.FE.INSTANCES[g].$el.find(".fr-dragging")).length){v=a.FE.INSTANCES[g];break}}if(f.length){if(p.preventDefault(),p.stopPropagation(),c&&c.hasClass("fr-visible")&&k.$box.find(c).length){c.data("fr-tag")[c.data("fr-position")]('<span class="fr-marker"></span>'),c.removeClass("fr-visible")}else{if(!1===k.markers.insertAtPoint(p.originalEvent)){return !1}}if(f.removeClass("fr-dragging"),!1===(f=k.events.chainTrigger("element.beforeDrop",f))){return !1}var d=f;if(f.parent().is("A")&&1==f.parent().get(0).childNodes.length&&(d=f.parent()),k.core.isEmpty()){k.events.focus()}else{k.$el.find(".fr-marker").replaceWith(a.FE.MARKERS),k.selection.restore()}if(v==k||k.undo.canDo()||k.undo.saveStep(),k.core.isEmpty()){k.$el.html(d)}else{var u=k.markers.insert();0===d.find(u).length?a(u).replaceWith(d):0===f.find(u).length&&a(u).replaceWith(f),f.after(a.FE.MARKERS),k.selection.restore()}return k.popups.hideAll(),k.selection.save(),k.$el.find(k.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").not(k.opts.htmlAllowedEmptyTags.join(",")).remove(),k.html.wrap(),k.html.fillEmptyBlocks(),k.selection.restore(),k.undo.saveStep(),k.opts.iframe&&k.size.syncIframe(),v!=k&&(v.popups.hideAll(),v.$el.find(v.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),v.html.wrap(),v.html.fillEmptyBlocks(),v.undo.saveStep(),v.events.trigger("element.dropped"),v.opts.iframe&&v.size.syncIframe()),k.events.trigger("element.dropped",[d]),!1}c&&c.removeClass("fr-visible"),k.undo.canDo()||k.undo.saveStep(),setTimeout(function(){k.undo.saveStep()},0)}function h(f){if(f&&"DIV"==f.tagName&&k.node.hasClass(f,"fr-drag-helper")){f.parentNode.removeChild(f)}else{if(f&&f.nodeType==Node.ELEMENT_NODE){for(var d=f.querySelectorAll("div.fr-drag-helper"),g=0;g<d.length;g++){d[g].parentNode.removeChild(d[g])}}}}var c;return{_init:function(){k.opts.enter==a.FE.ENTER_BR&&(k.opts.dragInline=!0),k.events.on("dragstart",l,!0),k.events.on("dragover",s,!0),k.events.on("dragenter",i,!0),k.events.on("document.dragend",b,!0),k.events.on("document.drop",b,!0),k.events.on("drop",q,!0),k.events.on("html.processGet",h)}}}});