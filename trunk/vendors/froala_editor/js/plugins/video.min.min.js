/*!
 * froala_editor v2.8.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
;!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(c,b){return b===undefined&&(b="undefined"!=typeof window?require("jquery"):require("jquery")(c)),a(b)}:a(window.jQuery)}(function(a){a.extend(a.FE.POPUP_TEMPLATES,{"video.insert":"[_BUTTONS_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_LAYER_][_PROGRESS_BAR_]","video.edit":"[_BUTTONS_]","video.size":"[_BUTTONS_][_SIZE_LAYER_]"}),a.extend(a.FE.DEFAULTS,{videoAllowedTypes:["mp4","webm","ogg"],videoAllowedProviders:[".*"],videoDefaultAlign:"center",videoDefaultDisplay:"block",videoDefaultWidth:600,videoEditButtons:["videoReplace","videoRemove","|","videoDisplay","videoAlign","videoSize"],videoInsertButtons:["videoBack","|","videoByURL","videoEmbed","videoUpload"],videoMaxSize:52428800,videoMove:!0,videoResize:!0,videoSizeButtons:["videoBack","|"],videoSplitHTML:!1,videoTextNear:!0,videoUpload:!0,videoUploadMethod:"POST",videoUploadParam:"file",videoUploadParams:{},videoUploadToS3:!1,videoUploadURL:null}),a.FE.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"https://www.youtube.com/embed/$1",html:'<iframe width="640" height="360" src="{url}?wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:https?:\/\/)?(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?(\/[a-zA-Z0-9_\-]+)?/i,url_text:"https://player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"https://www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"https://rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/g,url_text:"https://play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],a.FE.VIDEO_EMBED_REGEX=/^\W*((<iframe.*><\/iframe>)|(<embed.*>))\W*$/i,a.FE.PLUGINS.video=function(aA){var aV,aQ,aG,aB,aH,aN,aK="https://i.froala.com/upload",aS=2,aT=3,aO=4,aP=5,aJ=6,aE={};function aU(){var c=aA.popups.get("video.insert");c.find(".fr-video-by-url-layer input").val("").trigger("change");var b=c.find(".fr-video-embed-layer textarea");b.val("").trigger("change"),(b=c.find(".fr-video-upload-layer input")).val("").trigger("change")}function aD(){var d=aA.popups.get("video.edit");if(d||(d=function(){var j="";if(0<aA.opts.videoEditButtons.length){j+='<div class="fr-buttons">',j+=aA.button.buildList(aA.opts.videoEditButtons);var h={buttons:j+="</div>"},g=aA.popups.create("video.edit",h);return aA.events.$on(aA.$wp,"scroll.video-edit",function(){aB&&aA.popups.isVisible("video.edit")&&(aA.events.disableBlur(),ay(aB))}),g}return !1}()),d){aA.popups.setContainer("video.edit",aA.$sc),aA.popups.refresh("video.edit");var c=aB.find("iframe, embed, video"),b=c.offset().left+c.outerWidth()/2,f=c.offset().top+c.outerHeight();aA.popups.show("video.edit",b,f,c.outerHeight())}}function aI(m){if(m){return aA.popups.onRefresh("video.insert",aU),aA.popups.onHide("image.insert",aM),!0}var u="";aA.opts.videoUpload||aA.opts.videoInsertButtons.splice(aA.opts.videoInsertButtons.indexOf("videoUpload"),1),1<aA.opts.videoInsertButtons.length&&(u='<div class="fr-buttons">'+aA.button.buildList(aA.opts.videoInsertButtons)+"</div>");var j,c="",b=aA.opts.videoInsertButtons.indexOf("videoUpload"),v=aA.opts.videoInsertButtons.indexOf("videoByURL"),g=aA.opts.videoInsertButtons.indexOf("videoEmbed");0<=v&&(j=" fr-active",(b<v&&0<=b||g<v&&0<=g)&&(j=""),c='<div class="fr-video-by-url-layer fr-layer'+j+'" id="fr-video-by-url-layer-'+aA.id+'"><div class="fr-input-line"><input id="fr-video-by-url-layer-text-'+aA.id+'" type="text" placeholder="'+aA.language.translate("Paste in a video URL")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertByURL" tabIndex="2" role="button">'+aA.language.translate("Insert")+"</button></div></div>");var q="";0<=g&&(j=" fr-active",(b<g&&0<=b||v<g&&0<=v)&&(j=""),q='<div class="fr-video-embed-layer fr-layer'+j+'" id="fr-video-embed-layer-'+aA.id+'"><div class="fr-input-line"><textarea id="fr-video-embed-layer-text'+aA.id+'" type="text" placeholder="'+aA.language.translate("Embedded Code")+'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoInsertEmbed" tabIndex="2" role="button">'+aA.language.translate("Insert")+"</button></div></div>");var p="";0<=b&&(j=" fr-active",(g<b&&0<=g||v<b&&0<=v)&&(j=""),p='<div class="fr-video-upload-layer fr-layer'+j+'" id="fr-video-upload-layer-'+aA.id+'"><strong>'+aA.language.translate("Drop video")+"</strong><br>("+aA.language.translate("or click")+')<div class="fr-form"><input type="file" accept="video/'+aA.opts.videoAllowedTypes.join(", video/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-video-upload-layer-'+aA.id+'" role="button"></div></div>');var h={buttons:u,by_url_layer:c,embed_layer:q,upload_layer:p,progress_bar:'<div class="fr-video-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="videoDismissError" tabIndex="2" role="button">OK</button></div></div>'},k=aA.popups.create("video.insert",h);return function(d){aA.events.$on(d,"dragover dragenter",".fr-video-upload-layer",function(){return a(this).addClass("fr-drop"),!1},!0),aA.events.$on(d,"dragleave dragend",".fr-video-upload-layer",function(){return a(this).removeClass("fr-drop"),!1},!0),aA.events.$on(d,"drop",".fr-video-upload-layer",function(n){n.preventDefault(),n.stopPropagation(),a(this).removeClass("fr-drop");var l=n.originalEvent.dataTransfer;if(l&&l.files){var f=d.data("instance")||aA;f.events.disableBlur(),f.video.upload(l.files),f.events.enableBlur()}},!0),aA.helpers.isIOS()&&aA.events.$on(d,"touchstart",'.fr-video-upload-layer input[type="file"]',function(){a(this).trigger("click")},!0);aA.events.$on(d,"change",'.fr-video-upload-layer input[type="file"]',function(){if(this.files){var f=d.data("instance")||aA;f.events.disableBlur(),d.find("input:focus").blur(),f.events.enableBlur(),f.video.upload(this.files)}a(this).val("")},!0)}(k),k}function ax(d){aA.events.focus(!0),aA.selection.restore();var c=!1;aB&&(ak(),c=!0),aA.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video">'+d+"</span>",!1,aA.opts.videoSplitHTML),aA.popups.hide("video.insert");var b=aA.$el.find(".fr-jiv");b.removeClass("fr-jiv"),Z(b,aA.opts.videoDefaultDisplay,aA.opts.videoDefaultAlign),b.toggleClass("fr-draggable",aA.opts.videoMove),aA.events.trigger(c?"video.replaced":"video.inserted",[b])}function az(){var b=a(this);aA.popups.hide("video.insert"),b.removeClass("fr-uploading"),b.parent().next().is("br")&&b.parent().next().remove(),ay(b.parent()),aA.events.trigger("video.loaded",[b.parent()])}function ap(c,h,i,b,g){aA.edit.off(),aW("Loading video"),h&&(c=aA.helpers.sanitizeURL(c));ar("Loading video"),function(){var l,f;if(b){aA.undo.canDo()||b.find("video").hasClass("fr-uploading")||aA.undo.saveStep();var d=b.find("video").data("fr-old-src"),m=b.data("fr-replaced");b.data("fr-replaced",!1),aA.$wp?((l=b.clone()).find("video").removeData("fr-old-src").removeClass("fr-uploading"),l.find("video").off("canplay"),d&&b.find("video").attr("src",d),b.replaceWith(l)):l=b;for(var k=l.find("video").get(0).attributes,j=0;j<k.length;j++){var p=k[j];0===p.nodeName.indexOf("data-")&&l.find("video").removeAttr(p.nodeName)}if(void 0!==i){for(f in i){i.hasOwnProperty(f)&&"link"!=f&&l.find("video").attr("data-"+f,i[f])}}l.find("video").on("canplay",az),l.find("video").attr("src",c),aA.edit.on(),ao(),aA.undo.saveStep(),aA.$el.blur(),aA.events.trigger(m?"video.replaced":"video.inserted",[l,g])}else{l=function(y,v,u){var z,x="";if(v&&void 0!==v){for(z in v){v.hasOwnProperty(z)&&"link"!=z&&(x+=" data-"+z+'="'+v[z]+'"')}}var w=aA.opts.videoDefaultWidth;w&&"auto"!=w&&(w+="px");var A=a('<span contenteditable="false" draggable="true" class="fr-video fr-dv'+aA.opts.videoDefaultDisplay[0]+("center"!=aA.opts.videoDefaultAlign?" fr-fv"+aA.opts.videoDefaultAlign[0]:"")+'"><video src="'+y+'" '+x+(w?' style="width: '+w+';" ':"")+" controls>"+aA.language.translate("Your browser does not support HTML5 video.")+"</video></span>");A.toggleClass("fr-draggable",aA.opts.videoMove),aA.edit.on(),aA.events.focus(!0),aA.selection.restore(),aA.undo.saveStep(),aA.opts.videoSplitHTML?aA.markers.split():aA.markers.insert(),aA.html.wrap();var q=aA.$el.find(".fr-marker");return aA.node.isLastSibling(q)&&q.parent().hasClass("fr-deletable")&&q.insertAfter(q.parent()),q.replaceWith(A),aA.selection.clear(),A.find("video").get(0).readyState>A.find("video").get(0).HAVE_FUTURE_DATA||aA.helpers.isIOS()?u.call(A.find("video").get(0)):A.find("video").on("canplaythrough load",u),A}(c,i,az),ao(),aA.undo.saveStep(),aA.events.trigger("video.inserted",[l,g])}}()}function ar(f){var c=aA.popups.get("video.insert");if(c||(c=aI()),c.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),c.find(".fr-video-progress-bar-layer").addClass("fr-active"),c.find(".fr-buttons").hide(),aB){var b=aB.find("video");aA.popups.setContainer("video.insert",aA.$sc);var g=b.offset().left+b.width()/2,d=b.offset().top+b.height();aA.popups.show("video.insert",g,d,b.outerHeight())}void 0===f&&aW(aA.language.translate("Uploading"),0)}function au(d){var c=aA.popups.get("video.insert");if(c&&(c.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),c.find(".fr-video-progress-bar-layer").removeClass("fr-active"),c.find(".fr-buttons").show(),d||aA.$el.find("video.fr-error").length)){if(aA.events.focus(),aA.$el.find("video.fr-error").length&&(aA.$el.find("video.fr-error").parent().remove(),aA.undo.saveStep(),aA.undo.run(),aA.undo.dropRedo()),!aA.$wp&&aB){var b=aB;aw(!0),aA.selection.setAfter(b.find("video").get(0)),aA.selection.restore()}aA.popups.hide("video.insert")}}function aW(d,c){var b=aA.popups.get("video.insert");if(b){var f=b.find(".fr-video-progress-bar-layer");f.find("h3").text(d+(c?" "+c+"%":"")),f.removeClass("fr-error"),c?(f.find("div").removeClass("fr-indeterminate"),f.find("div > span").css("width",c+"%")):f.find("div").addClass("fr-indeterminate")}}function ay(b){ag.call(b.get(0))}function ae(h){aW("Loading video");var d=this.status,c=this.response,j=this.responseXML,g=this.responseText;try{if(aA.opts.videoUploadToS3){if(201==d){var f=function(n){try{var m=a(n).find("Location").text(),l=a(n).find("Key").text();return !1===aA.events.trigger("video.uploadedToS3",[m,l,n],!0)?(aA.edit.on(),!1):m}catch(p){return ah(aO,n),!1}}(j);f&&ap(f,!1,[],h,c||j)}else{ah(aO,c||j)}}else{if(200<=d&&d<300){var k=function(n){try{if(!1===aA.events.trigger("video.uploaded",[n],!0)){return aA.edit.on(),!1}var m=JSON.parse(n);return m.link?m:(ah(aS,n),!1)}catch(l){return ah(aO,n),!1}}(g);k&&ap(k.link,!1,k,h,c||g)}else{ah(aT,c||g)}}}catch(b){ah(aO,c||g)}}function ad(){ah(aO,this.response||this.responseText||this.responseXML)}function aq(c){if(c.lengthComputable){var b=c.loaded/c.total*100|0;aW(aA.language.translate("Uploading"),b)}}function ab(){aA.edit.on(),au(!0)}function al(g){if(!aA.core.sameInstance(aG)){return !0}g.preventDefault(),g.stopPropagation();var c=g.pageX||(g.originalEvent.touches?g.originalEvent.touches[0].pageX:null),b=g.pageY||(g.originalEvent.touches?g.originalEvent.touches[0].pageY:null);if(!c||!b){return !1}if("mousedown"==g.type){var h=aA.$oel.get(0).ownerDocument,f=h.defaultView||h.parentWindow,d=!1;try{d=f.location!=f.parent.location&&!(f.$&&f.$.FE)}catch(j){}d&&f.frameElement&&(c+=aA.helpers.getPX(a(f.frameElement).offset().left)+f.frameElement.clientLeft,b=g.clientY+aA.helpers.getPX(a(f.frameElement).offset().top)+f.frameElement.clientTop)}aA.undo.canDo()||aA.undo.saveStep(),(aQ=a(this)).data("start-x",c),aQ.data("start-y",b),aV.show(),aA.popups.hideAll(),af()}function at(j){if(!aA.core.sameInstance(aG)){return !0}if(aQ){j.preventDefault();var p=j.pageX||(j.originalEvent.touches?j.originalEvent.touches[0].pageX:null),h=j.pageY||(j.originalEvent.touches?j.originalEvent.touches[0].pageY:null);if(!p||!h){return !1}var c=aQ.data("start-x"),b=aQ.data("start-y");aQ.data("start-x",p),aQ.data("start-y",h);var q=p-c,f=h-b,m=aB.find("iframe, embed, video"),k=m.width(),g=m.height();(aQ.hasClass("fr-hnw")||aQ.hasClass("fr-hsw"))&&(q=0-q),(aQ.hasClass("fr-hnw")||aQ.hasClass("fr-hne"))&&(f=0-f),m.css("width",k+q),m.css("height",g+f),m.removeAttr("width"),m.removeAttr("height"),aj()}}function av(b){if(!aA.core.sameInstance(aG)){return !0}aQ&&aB&&(b&&b.stopPropagation(),aQ=null,aV.hide(),aj(),aD(),aA.undo.saveStep())}function aC(b){return'<div class="fr-handler fr-h'+b+'"></div>'}function aL(d,c,b,f){return d.pageX=c,d.pageY=c,al.call(this,d),d.pageX=d.pageX+b*Math.floor(Math.pow(1.1,f)),d.pageY=d.pageY+b*Math.floor(Math.pow(1.1,f)),at.call(this,d),av.call(this,d),++f}function ao(){var d,c=Array.prototype.slice.call(aA.el.querySelectorAll("video, .fr-video > *")),b=[];for(d=0;d<c.length;d++){b.push(c[d].getAttribute("src")),a(c[d]).toggleClass("fr-draggable",aA.opts.videoMove),""===c[d].getAttribute("class")&&c[d].removeAttribute("class"),""===c[d].getAttribute("style")&&c[d].removeAttribute("style")}if(aH){for(d=0;d<aH.length;d++){b.indexOf(aH[d].getAttribute("src"))<0&&aA.events.trigger("video.removed",[a(aH[d])])}}aH=c}function aj(){aG||function(){var f;if(aA.shared.$video_resizer?(aG=aA.shared.$video_resizer,aV=aA.shared.$vid_overlay,aA.events.on("destroy",function(){aG.removeClass("fr-active").appendTo(a("body:first"))},!0)):(aA.shared.$video_resizer=a('<div class="fr-video-resizer"></div>'),aG=aA.shared.$video_resizer,aA.events.$on(aG,"mousedown",function(h){h.stopPropagation()},!0),aA.opts.videoResize&&(aG.append(aC("nw")+aC("ne")+aC("sw")+aC("se")),aA.shared.$vid_overlay=a('<div class="fr-video-overlay"></div>'),aV=aA.shared.$vid_overlay,f=aG.get(0).ownerDocument,a(f).find("body:first").append(aV))),aA.events.on("shared.destroy",function(){aG.html("").removeData().remove(),aG=null,aA.opts.videoResize&&(aV.remove(),aV=null)},!0),aA.helpers.isMobile()||aA.events.$on(a(aA.o_win),"resize.video",function(){aw(!0)}),aA.opts.videoResize){f=aG.get(0).ownerDocument,aA.events.$on(aG,aA._mousedown,".fr-handler",al),aA.events.$on(a(f),aA._mousemove,at),aA.events.$on(a(f.defaultView||f.parentWindow),aA._mouseup,av),aA.events.$on(aV,"mouseleave",av);var g=1,d=null,c=0;aA.events.on("keydown",function(k){if(aB){var j=-1!=navigator.userAgent.indexOf("Mac OS X")?k.metaKey:k.ctrlKey,h=k.which;(h!==d||200<k.timeStamp-c)&&(g=1),(h==a.FE.KEYCODE.EQUALS||aA.browser.mozilla&&h==a.FE.KEYCODE.FF_EQUALS)&&j&&!k.altKey?g=aL.call(this,k,1,1,g):(h==a.FE.KEYCODE.HYPHEN||aA.browser.mozilla&&h==a.FE.KEYCODE.FF_HYPHEN)&&j&&!k.altKey&&(g=aL.call(this,k,2,-1,g)),d=h,c=k.timeStamp}}),aA.events.on("keyup",function(){g=1})}}(),(aA.$wp||aA.$sc).append(aG),aG.data("instance",aA);var b=aB.find("iframe, embed, video");aG.css("top",(aA.opts.iframe?b.offset().top-1:b.offset().top-aA.$wp.offset().top-1)+aA.$wp.scrollTop()).css("left",(aA.opts.iframe?b.offset().left-1:b.offset().left-aA.$wp.offset().left-1)+aA.$wp.scrollLeft()).css("width",b.get(0).getBoundingClientRect().width).css("height",b.get(0).getBoundingClientRect().height).addClass("fr-active")}function ag(c){if(c&&"touchend"==c.type&&aN){return !0}if(c&&aA.edit.isDisabled()){return c.stopPropagation(),c.preventDefault(),!1}if(aA.edit.isDisabled()){return !1}for(var b=0;b<a.FE.INSTANCES.length;b++){a.FE.INSTANCES[b]!=aA&&a.FE.INSTANCES[b].events.trigger("video.hideResizer")}aA.toolbar.disable(),aA.helpers.isMobile()&&(aA.events.disableBlur(),aA.$el.blur(),aA.events.enableBlur()),aA.$el.find(".fr-video.fr-active").removeClass("fr-active"),(aB=a(this)).addClass("fr-active"),aA.opts.iframe&&aA.size.syncIframe(),an(),aj(),aD(),aA.selection.clear(),aA.button.bulkRefresh(),aA.events.trigger("image.hideResizer")}function aw(b){aB&&(aA.shared.vid_exit_flag||!0===b)&&(aG.removeClass("fr-active"),aA.toolbar.enable(),aB.removeClass("fr-active"),aB=null,af())}function aR(){aA.shared.vid_exit_flag=!0}function af(){aA.shared.vid_exit_flag=!1}function ac(d){var c=d.originalEvent.dataTransfer;if(c&&c.files&&c.files.length){var b=c.files[0];if(b&&b.type&&-1!==b.type.indexOf("video")){if(!aA.opts.videoUpload){return d.preventDefault(),d.stopPropagation(),!1}aA.markers.remove(),aA.markers.insertAtPoint(d.originalEvent),aA.$el.find(".fr-marker").replaceWith(a.FE.MARKERS),aA.popups.hideAll();var f=aA.popups.get("video.insert");return f||(f=aI()),aA.popups.setContainer("video.insert",aA.$sc),aA.popups.show("video.insert",d.originalEvent.pageX,d.originalEvent.pageY),ar(),0<=aA.opts.videoAllowedTypes.indexOf(b.type.replace(/video\//g,""))?ai(c.files):ah(aJ),d.preventDefault(),d.stopPropagation(),!1}}}function ai(h){if(void 0!==h&&0<h.length){if(!1===aA.events.trigger("video.beforeUpload",[h])){return !1}var l,g=h[0];if(null===aA.opts.videoUploadURL||aA.opts.videoUploadURL==aK){return k=g,(j=new FileReader).addEventListener("load",function(){j.result;for(var o=atob(j.result.split(",")[1]),n=[],d=0;d<o.length;d++){n.push(o.charCodeAt(d))}ap(window.URL.createObjectURL(new Blob([new Uint8Array(n)],{type:k.type})),!1,null,aB)},!1),ar(),j.readAsDataURL(k),!1}if(g.size>aA.opts.videoMaxSize){return ah(aP),!1}if(aA.opts.videoAllowedTypes.indexOf(g.type.replace(/video\//g,""))<0){return ah(aJ),!1}if(aA.drag_support.formdata&&(l=aA.drag_support.formdata?new FormData:null),l){var c;if(!1!==aA.opts.videoUploadToS3){for(c in l.append("key",aA.opts.videoUploadToS3.keyStart+(new Date).getTime()+"-"+(g.name||"untitled")),l.append("success_action_status","201"),l.append("X-Requested-With","xhr"),l.append("Content-Type",g.type),aA.opts.videoUploadToS3.params){aA.opts.videoUploadToS3.params.hasOwnProperty(c)&&l.append(c,aA.opts.videoUploadToS3.params[c])}}for(c in aA.opts.videoUploadParams){aA.opts.videoUploadParams.hasOwnProperty(c)&&l.append(c,aA.opts.videoUploadParams[c])}l.append(aA.opts.videoUploadParam,g);var b=aA.opts.videoUploadURL;aA.opts.videoUploadToS3&&(b=aA.opts.videoUploadToS3.uploadURL?aA.opts.videoUploadToS3.uploadURL:"https://"+aA.opts.videoUploadToS3.region+".amazonaws.com/"+aA.opts.videoUploadToS3.bucket);var m=aA.core.getXHR(b,aA.opts.videoUploadMethod);m.onload=function(){ae.call(m,aB)},m.onerror=ad,m.upload.onprogress=aq,m.onabort=ab,ar(),aA.events.disableBlur(),aA.edit.off(),aA.events.enableBlur();var f=aA.popups.get("video.insert");f&&f.off("abortUpload").on("abortUpload",function(){4!=m.readyState&&m.abort()}),m.send(l)}}var k,j}function ah(c,b){aA.edit.on(),aB&&aB.find("video").addClass("fr-error"),function(g){ar();var f=aA.popups.get("video.insert").find(".fr-video-progress-bar-layer");f.addClass("fr-error");var d=f.find("h3");d.text(g),aA.events.disableBlur(),d.focus()}(aA.language.translate("Something went wrong. Please try again.")),aA.events.trigger("video.error",[{code:c,message:aE[c]},b])}function aa(){if(aB){var c=aA.popups.get("video.size"),b=aB.find("iframe, embed, video");c.find('input[name="width"]').val(b.get(0).style.width||b.attr("width")).trigger("change"),c.find('input[name="height"]').val(b.get(0).style.height||b.attr("height")).trigger("change")}}function J(d){if(d){return aA.popups.onRefresh("video.size",aa),!0}var c={buttons:'<div class="fr-buttons">'+aA.button.buildList(aA.opts.videoSizeButtons)+"</div>",size_layer:'<div class="fr-video-size-layer fr-layer fr-active" id="fr-video-size-layer-'+aA.id+'"><div class="fr-video-group"><div class="fr-input-line"><input id="fr-video-size-layer-width-'+aA.id+'" type="text" name="width" placeholder="'+aA.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-video-size-layer-height-'+aA.id+'" type="text" name="height" placeholder="'+aA.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="videoSetSize" tabIndex="2" role="button">'+aA.language.translate("Update")+"</button></div></div>"},b=aA.popups.create("video.size",c);return aA.events.$on(aA.$wp,"scroll",function(){aB&&aA.popups.isVisible("video.size")&&(aA.events.disableBlur(),ay(aB))}),b}function am(b){if(void 0===b&&(b=aB),b){if(b.hasClass("fr-fvl")){return"left"}if(b.hasClass("fr-fvr")){return"right"}if(b.hasClass("fr-dvb")||b.hasClass("fr-dvi")){return"center"}if("block"==b.css("display")){if("left"==b.css("text-algin")){return"left"}if("right"==b.css("text-align")){return"right"}}else{if("left"==b.css("float")){return"left"}if("right"==b.css("float")){return"right"}}}return"center"}function Q(c){void 0===c&&(c=aB);var b=c.css("float");return c.css("float","none"),"block"==c.css("display")?(c.css("float",""),c.css("float")!=b&&c.css("float",b),"block"):(c.css("float",""),c.css("float")!=b&&c.css("float",b),"inline")}function ak(){if(aB&&!1!==aA.events.trigger("video.beforeRemove",[aB])){var b=aB;aA.popups.hideAll(),aw(!0),aA.selection.setBefore(b.get(0))||aA.selection.setAfter(b.get(0)),b.remove(),aA.selection.restore(),aA.html.fillEmptyBlocks(),aA.events.trigger("video.removed",[b])}}function aM(){au()}function Z(d,c,b){!aA.opts.htmlUntouched&&aA.opts.useClasses?(d.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),d.addClass("fr-fv"+b[0]+" fr-dv"+c[0])):"inline"==c?(d.css({display:"inline-block"}),"center"==b?d.css({"float":"none"}):"left"==b?d.css({"float":"left"}):d.css({"float":"right"})):(d.css({display:"block",clear:"both"}),"left"==b?d.css({textAlign:"left"}):"right"==b?d.css({textAlign:"right"}):d.css({textAlign:"center"}))}function aF(){aA.$el.find("video").filter(function(){return 0===a(this).parents("span.fr-video").length}).wrap('<span class="fr-video" contenteditable="false"></span>'),aA.$el.find("embed, iframe").filter(function(){if(aA.browser.safari&&this.getAttribute("src")&&this.setAttribute("src",this.src),0<a(this).parents("span.fr-video").length){return !1}for(var k=a(this).attr("src"),j=0;j<a.FE.VIDEO_PROVIDERS.length;j++){var h=a.FE.VIDEO_PROVIDERS[j];if(h.test_regex.test(k)&&new RegExp(aA.opts.videoAllowedProviders.join("|")).test(h.provider)){return !0}}return !1}).map(function(){return 0===a(this).parents("object").length?this:a(this).parents("object").get(0)}).wrap('<span class="fr-video" contenteditable="false"></span>');for(var f,c,b=aA.$el.find("span.fr-video, video"),g=0;g<b.length;g++){var d=a(b[g]);!aA.opts.htmlUntouched&&aA.opts.useClasses?((c=d).hasClass("fr-dvi")||c.hasClass("fr-dvb")||(c.addClass("fr-fv"+am(c)[0]),c.addClass("fr-dv"+Q(c)[0])),aA.opts.videoTextNear||d.removeClass("fr-dvi").addClass("fr-dvb")):aA.opts.htmlUntouched||aA.opts.useClasses||(Z(f=d,f.hasClass("fr-dvb")?"block":f.hasClass("fr-dvi")?"inline":null,f.hasClass("fr-fvl")?"left":f.hasClass("fr-fvr")?"right":am(f)),f.removeClass("fr-dvb fr-dvi fr-fvr fr-fvl"))}b.toggleClass("fr-draggable",aA.opts.videoMove)}function an(){if(aB){aA.selection.clear();var b=aA.doc.createRange();b.selectNode(aB.get(0)),aA.selection.get().addRange(b)}}return aE[1]="Video cannot be loaded from the passed link.",aE[aS]="No link in upload response.",aE[aT]="Error during file upload.",aE[aO]="Parsing response failed.",aE[aP]="File is too large.",aE[aJ]="Video file type is invalid.",aE[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",aA.shared.vid_exit_flag=!1,{_init:function(){aA.events.on("drop",ac,!0),aA.events.on("mousedown window.mousedown",aR),aA.events.on("window.touchmove",af),aA.events.on("mouseup window.mouseup",aw),aA.events.on("commands.mousedown",function(b){0<b.parents(".fr-toolbar").length&&aw()}),aA.events.on("video.hideResizer commands.undo commands.redo element.dropped",function(){aw(!0)}),aA.helpers.isMobile()&&(aA.events.$on(aA.$el,"touchstart","span.fr-video",function(){aN=!1}),aA.events.$on(aA.$el,"touchmove",function(){aN=!0})),aA.events.on("html.set",aF),aF(),aA.events.$on(aA.$el,"mousedown","span.fr-video",function(b){b.stopPropagation()}),aA.events.$on(aA.$el,"click touchend","span.fr-video",function(b){if("false"==a(this).parents("[contenteditable]:not(.fr-element):not(.fr-img-caption):not(body):first").attr("contenteditable")){return !0}ag.call(this,b)}),aA.events.on("keydown",function(c){var b=c.which;return !aB||b!=a.FE.KEYCODE.BACKSPACE&&b!=a.FE.KEYCODE.DELETE?aB&&b==a.FE.KEYCODE.ESC?(aw(!0),c.preventDefault(),!1):aB&&b!=a.FE.KEYCODE.F10&&!aA.keys.isBrowserAction(c)?(c.preventDefault(),!1):void 0:(c.preventDefault(),ak(),aA.undo.saveStep(),!1)},!0),aA.events.on("toolbar.esc",function(){if(aB){return aA.events.disableBlur(),aA.events.focus(),!1}},!0),aA.events.on("toolbar.focusEditor",function(){if(aB){return !1}},!0),aA.events.on("keydown",function(){aA.$el.find("span.fr-video:empty").remove()}),aA.$wp&&(ao(),aA.events.on("contentChanged",ao)),aI(!0),J(!0)},showInsertPopup:function(){var d=aA.$tb.find('.fr-command[data-cmd="insertVideo"]'),c=aA.popups.get("video.insert");if(c||(c=aI()),au(),!c.hasClass("fr-active")){if(aA.popups.refresh("video.insert"),aA.popups.setContainer("video.insert",aA.$tb),d.is(":visible")){var b=d.offset().left+d.outerWidth()/2,f=d.offset().top+(aA.opts.toolbarBottom?10:d.outerHeight()-10);aA.popups.show("video.insert",b,f,d.outerHeight())}else{aA.position.forSelection(c),aA.popups.show("video.insert")}}},showLayer:function(f){var c,b,g=aA.popups.get("video.insert");if(!aB&&!aA.opts.toolbarInline){var d=aA.$tb.find('.fr-command[data-cmd="insertVideo"]');c=d.offset().left+d.outerWidth()/2,b=d.offset().top+(aA.opts.toolbarBottom?10:d.outerHeight()-10)}aA.opts.toolbarInline&&(b=g.offset().top-aA.helpers.getPX(g.css("margin-top")),g.hasClass("fr-above")&&(b+=g.outerHeight())),g.find(".fr-layer").removeClass("fr-active"),g.find(".fr-"+f+"-layer").addClass("fr-active"),aA.popups.show("video.insert",c,b,0),aA.accessibility.focusPopup(g)},refreshByURLButton:function(b){aA.popups.get("video.insert").find(".fr-video-by-url-layer").hasClass("fr-active")&&b.addClass("fr-active").attr("aria-pressed",!0)},refreshEmbedButton:function(b){aA.popups.get("video.insert").find(".fr-video-embed-layer").hasClass("fr-active")&&b.addClass("fr-active").attr("aria-pressed",!0)},refreshUploadButton:function(b){aA.popups.get("video.insert").find(".fr-video-upload-layer").hasClass("fr-active")&&b.addClass("fr-active").attr("aria-pressed",!0)},upload:ai,insertByURL:function(d){void 0===d&&(d=(aA.popups.get("video.insert").find('.fr-video-by-url-layer input[type="text"]').val()||"").trim());var c=null;if(/^http/.test(d)||(d="https://"+d),aA.helpers.isURL(d)){for(var b=0;b<a.FE.VIDEO_PROVIDERS.length;b++){var f=a.FE.VIDEO_PROVIDERS[b];if(f.test_regex.test(d)&&new RegExp(aA.opts.videoAllowedProviders.join("|")).test(f.provider)){c=d.replace(f.url_regex,f.url_text),c=f.html.replace(/\{url\}/,c);break}}}c?ax(c):aA.events.trigger("video.linkError",[d])},insertEmbed:function(b){void 0===b&&(b=aA.popups.get("video.insert").find(".fr-video-embed-layer textarea").val()||""),0!==b.length&&a.FE.VIDEO_EMBED_REGEX.test(b)?ax(b):aA.events.trigger("video.codeError",[b])},insert:ax,align:function(b){aB.removeClass("fr-fvr fr-fvl"),!aA.opts.htmlUntouched&&aA.opts.useClasses?"left"==b?aB.addClass("fr-fvl"):"right"==b&&aB.addClass("fr-fvr"):Z(aB,Q(),b),an(),aj(),aD(),aA.selection.clear()},refreshAlign:function(b){if(!aB){return !1}b.find("> *:first").replaceWith(aA.icon.create("video-align-"+am()))},refreshAlignOnShow:function(c,b){aB&&b.find('.fr-command[data-param1="'+am()+'"]').addClass("fr-active").attr("aria-selected",!0)},display:function(b){aB.removeClass("fr-dvi fr-dvb"),!aA.opts.htmlUntouched&&aA.opts.useClasses?"inline"==b?aB.addClass("fr-dvi"):"block"==b&&aB.addClass("fr-dvb"):Z(aB,b,am()),an(),aj(),aD(),aA.selection.clear()},refreshDisplayOnShow:function(c,b){aB&&b.find('.fr-command[data-param1="'+Q()+'"]').addClass("fr-active").attr("aria-selected",!0)},remove:ak,hideProgressBar:au,showSizePopup:function(){var d=aA.popups.get("video.size");d||(d=J()),au(),aA.popups.refresh("video.size"),aA.popups.setContainer("video.size",aA.$sc);var c=aB.find("iframe, embed, video"),b=c.offset().left+c.width()/2,f=c.offset().top+c.height();aA.popups.show("video.size",b,f,c.height())},replace:function(){var d=aA.popups.get("video.insert");d||(d=aI()),aA.popups.isVisible("video.insert")||(au(),aA.popups.refresh("video.insert"),aA.popups.setContainer("video.insert",aA.$sc));var c=aB.offset().left+aB.width()/2,b=aB.offset().top+aB.height();aA.popups.show("video.insert",c,b,aB.outerHeight())},back:function(){aB?(aA.events.disableBlur(),aB.trigger("click")):(aA.events.disableBlur(),aA.selection.restore(),aA.events.enableBlur(),aA.popups.hide("video.insert"),aA.toolbar.showInline())},setSize:function(d,c){if(aB){var b=aA.popups.get("video.size"),f=aB.find("iframe, embed, video");f.css("width",d||b.find('input[name="width"]').val()),f.css("height",c||b.find('input[name="height"]').val()),f.get(0).style.width&&f.removeAttr("width"),f.get(0).style.height&&f.removeAttr("height"),b.find("input:focus").blur(),setTimeout(function(){aB.trigger("click")},aA.helpers.isAndroid()?50:0)}},get:function(){return aB}}},a.FE.RegisterCommand("insertVideo",{title:"Insert Video",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("video.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("video.insert")):this.video.showInsertPopup()},plugin:"video"}),a.FE.DefineIcon("insertVideo",{NAME:"video-camera",FA5NAME:"camera"}),a.FE.DefineIcon("videoByURL",{NAME:"link"}),a.FE.RegisterCommand("videoByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-by-url")},refresh:function(b){this.video.refreshByURLButton(b)}}),a.FE.DefineIcon("videoEmbed",{NAME:"code"}),a.FE.RegisterCommand("videoEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-embed")},refresh:function(b){this.video.refreshEmbedButton(b)}}),a.FE.DefineIcon("videoUpload",{NAME:"upload"}),a.FE.RegisterCommand("videoUpload",{title:"Upload Video",undo:!1,focus:!1,toggle:!0,callback:function(){this.video.showLayer("video-upload")},refresh:function(b){this.video.refreshUploadButton(b)}}),a.FE.RegisterCommand("videoInsertByURL",{undo:!0,focus:!0,callback:function(){this.video.insertByURL()}}),a.FE.RegisterCommand("videoInsertEmbed",{undo:!0,focus:!0,callback:function(){this.video.insertEmbed()}}),a.FE.DefineIcon("videoDisplay",{NAME:"star"}),a.FE.RegisterCommand("videoDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(c,b){this.video.display(b)},refresh:function(b){this.opts.videoTextNear||b.addClass("fr-hidden")},refreshOnShow:function(c,b){this.video.refreshDisplayOnShow(c,b)}}),a.FE.DefineIcon("video-align",{NAME:"align-left"}),a.FE.DefineIcon("video-align-left",{NAME:"align-left"}),a.FE.DefineIcon("video-align-right",{NAME:"align-right"}),a.FE.DefineIcon("video-align-center",{NAME:"align-justify"}),a.FE.DefineIcon("videoAlign",{NAME:"align-center"}),a.FE.RegisterCommand("videoAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var d='<ul class="fr-dropdown-list" role="presentation">',c=a.FE.COMMANDS.videoAlign.options;for(var b in c){c.hasOwnProperty(b)&&(d+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="videoAlign" data-param1="'+b+'" title="'+this.language.translate(c[b])+'">'+this.icon.create("video-align-"+b)+'<span class="fr-sr-only">'+this.language.translate(c[b])+"</span></a></li>")}return d+="</ul>"},callback:function(c,b){this.video.align(b)},refresh:function(b){this.video.refreshAlign(b)},refreshOnShow:function(c,b){this.video.refreshAlignOnShow(c,b)}}),a.FE.DefineIcon("videoReplace",{NAME:"exchange",FA5NAME:"exchange-alt"}),a.FE.RegisterCommand("videoReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.video.replace()}}),a.FE.DefineIcon("videoRemove",{NAME:"trash"}),a.FE.RegisterCommand("videoRemove",{title:"Remove",callback:function(){this.video.remove()}}),a.FE.DefineIcon("videoSize",{NAME:"arrows-alt"}),a.FE.RegisterCommand("videoSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.video.showSizePopup()}}),a.FE.DefineIcon("videoBack",{NAME:"arrow-left"}),a.FE.RegisterCommand("videoBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.video.back()},refresh:function(b){this.video.get()||this.opts.toolbarInline?(b.removeClass("fr-hidden"),b.next(".fr-separator").removeClass("fr-hidden")):(b.addClass("fr-hidden"),b.next(".fr-separator").addClass("fr-hidden"))}}),a.FE.RegisterCommand("videoDismissError",{title:"OK",undo:!1,callback:function(){this.video.hideProgressBar(!0)}}),a.FE.RegisterCommand("videoSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.video.setSize()}})});