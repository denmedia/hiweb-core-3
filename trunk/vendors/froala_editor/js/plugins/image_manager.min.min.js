/*!
 * froala_editor v2.8.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
;!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(c,b){return b===undefined&&(b="undefined"!=typeof window?require("jquery"):require("jquery")(c)),a(b)}:a(window.jQuery)}(function(a){if(a.extend(a.FE.DEFAULTS,{imageManagerLoadURL:"https://i.froala.com/load-files",imageManagerLoadMethod:"get",imageManagerLoadParams:{},imageManagerPreloader:null,imageManagerDeleteURL:"",imageManagerDeleteMethod:"post",imageManagerDeleteParams:{},imageManagerPageSize:12,imageManagerScrollOffset:20,imageManagerToggleTags:!0}),a.FE.PLUGINS.imageManager=function(aj){var ar,am,ag,ap,ak,av,af,at,al,ad,aw,aq="image_manager",au=10,ai=11,ac=12,K=13,ab=14,ax=15,Y=21,N=22,ae={};function Z(){var b=a(window).outerWidth();return b<768?2:b<1200?3:4}function X(){ak.empty();for(var b=0;b<aw;b++){ak.append('<div class="fr-list-column"></div>')}}function O(){if(al<af.length&&(ak.outerHeight()<=ag.outerHeight()+aj.opts.imageManagerScrollOffset||ag.scrollTop()+aj.opts.imageManagerScrollOffset>ak.outerHeight()-ag.outerHeight())){at++;for(var b=aj.opts.imageManagerPageSize*(at-1);b<Math.min(af.length,aj.opts.imageManagerPageSize*at);b++){ay(af[b])}}}function ay(b){var d=new Image,c=a('<div class="fr-image-container fr-empty fr-image-'+ad+++'" data-loading="'+aj.language.translate("Loading")+'.." data-deleting="'+aj.language.translate("Deleting")+'..">');A(!1),d.onload=function(){c.height(Math.floor(c.width()/d.width*d.height));var g=a("<img/>");if(b.thumb){g.attr("src",b.thumb)}else{if(z(ab,b),!b.url){return z(ax,b),!1}g.attr("src",b.url)}if(b.url&&g.attr("data-url",b.url),b.tag){if(am.find(".fr-modal-more.fr-not-available").removeClass("fr-not-available"),am.find(".fr-modal-tags").show(),0<=b.tag.indexOf(",")){for(var i=b.tag.split(","),f=0;f<i.length;f++){i[f]=i[f].trim(),0===av.find('a[title="'+i[f]+'"]').length&&av.append('<a role="button" title="'+i[f]+'">'+i[f]+"</a>")}g.attr("data-tag",i.join())}else{0===av.find('a[title="'+b.tag.trim()+'"]').length&&av.append('<a role="button" title="'+b.tag.trim()+'">'+b.tag.trim()+"</a>"),g.attr("data-tag",b.tag.trim())}}for(var h in b.name&&g.attr("alt",b.name),b){b.hasOwnProperty(h)&&"thumb"!=h&&"url"!=h&&"tag"!=h&&g.attr("data-"+h,b[h])}c.append(g).append(a(aj.icon.create("imageManagerDelete")).addClass("fr-delete-img").attr("title",aj.language.translate("Delete"))).append(a(aj.icon.create("imageManagerInsert")).addClass("fr-insert-img").attr("title",aj.language.translate("Insert"))),av.find(".fr-selected-tag").each(function(k,j){an(g,j.text)||c.hide()}),g.on("load",function(){c.removeClass("fr-empty"),c.height("auto"),al++,W(aa(parseInt(g.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1)),A(!1),al%aj.opts.imageManagerPageSize==0&&O()}),aj.events.trigger("imageManager.imageLoaded",[g])},d.onerror=function(){al++,c.remove(),W(aa(parseInt(c.attr("class").match(/fr-image-(\d+)/)[1],10)+1)),z(au,b),al%aj.opts.imageManagerPageSize==0&&O()},d.src=b.thumb||b.url,J().append(c)}function J(){var c,b;return ak.find(".fr-list-column").each(function(g,d){var f=a(d);0===g?(b=f.outerHeight(),c=f):f.outerHeight()<b&&(b=f.outerHeight(),c=f)}),c}function aa(f){f===undefined&&(f=0);for(var b=[],c=ad-1;f<=c;c--){var d=ak.find(".fr-image-"+c);d.length&&(b.push(d),a('<div id="fr-image-hidden-container">').append(d),ak.find(".fr-image-"+c).remove())}return b}function W(c){for(var b=c.length-1;0<=b;b--){J().append(c[b])}}function A(d){if(d===undefined&&(d=!0),!ar.is(":visible")){return !0}var b=Z();if(b!=aw){aw=b;var c=aa();X(),W(c)}aj.modals.resize(aq),d&&O()}function ah(f){var b={},c=f.data();for(var d in c){c.hasOwnProperty(d)&&"url"!=d&&"tag"!=d&&(b[d]=c[d])}return b}function B(h){var b=a(h.currentTarget).siblings("img"),d=ar.data("instance")||aj,g=ar.data("current-image");if(aj.modals.hide(aq),d.image.showProgressBar(),g){g.data("fr-old-src",g.attr("src")),g.trigger("click")}else{d.events.focus(!0),d.selection.restore();var c=d.position.getBoundingRect(),j=c.left+c.width/2+a(aj.doc).scrollLeft(),f=c.top+c.height+a(aj.doc).scrollTop();d.popups.setContainer("image.insert",aj.$sc),d.popups.show("image.insert",j,f)}d.image.insert(b.data("url"),!1,ah(b),g)}function G(d){var c=a(d.currentTarget).siblings("img"),b=aj.language.translate("Are you sure? Image will be deleted.");confirm(b)&&(aj.opts.imageManagerDeleteURL?!1!==aj.events.trigger("imageManager.beforeDeleteImage",[c])&&(c.parent().addClass("fr-image-deleting"),a.ajax({method:aj.opts.imageManagerDeleteMethod,url:aj.opts.imageManagerDeleteURL,data:a.extend(a.extend({src:c.attr("src")},ah(c)),aj.opts.imageManagerDeleteParams),crossDomain:aj.opts.requestWithCORS,xhrFields:{withCredentials:aj.opts.requestWithCredentials},headers:aj.opts.requestHeaders}).done(function(g){aj.events.trigger("imageManager.imageDeleted",[g]);var f=aa(parseInt(c.parent().attr("class").match(/fr-image-(\d+)/)[1],10)+1);c.parent().remove(),W(f),ar.find("#fr-modal-tags > a").each(function(){0===ar.find('#fr-image-list [data-tag*="'+a(this).text()+'"]').length&&a(this).removeClass("fr-selected-tag").hide()}),Q(),A(!0)}).fail(function(f){z(Y,f.response||f.responseText)})):z(N))}function z(c,b){10<=c&&c<20?ap.hide():20<=c&&c<30&&a(".fr-image-deleting").removeClass("fr-image-deleting"),aj.events.trigger("imageManager.error",[{code:c,message:ae[c]},b])}function V(){var c=am.find(".fr-modal-head-line").outerHeight(),b=av.outerHeight();am.toggleClass("fr-show-tags"),am.hasClass("fr-show-tags")?(am.css("height",c+b),av.find("a").css("opacity",1)):(am.css("height",c),av.find("a").css("opacity",0))}function Q(){var b=av.find(".fr-selected-tag");0<b.length?(ak.find("img").parent().show(),b.each(function(d,c){ak.find("img").each(function(h,f){var g=a(f);an(g,c.text)||g.parent().hide()})})):ak.find("img").parent().show(),W(aa()),O()}function ao(c){c.preventDefault();var b=a(c.currentTarget);b.toggleClass("fr-selected-tag"),aj.opts.imageManagerToggleTags&&b.siblings("a").removeClass("fr-selected-tag"),Q()}function an(f,b){for(var c=(f.attr("data-tag")||"").split(","),d=0;d<c.length;d++){if(c[d]==b){return !0}}return !1}return ae[au]="Image cannot be loaded from the passed link.",ae[ai]="Error during load images request.",ae[ac]="Missing imageManagerLoadURL option.",ae[K]="Parsing load response failed.",ae[ab]="Missing image thumb.",ae[ax]="Missing image URL.",ae[Y]="Error during delete image request.",ae[N]="Missing imageManagerDeleteURL option.",{require:["image"],_init:function(){if(!aj.$wp&&"IMG"!=aj.el.tagName){return !1}},show:function(){if(!ar){var d,b='<div class="fr-modal-head-line"><i class="fa fa-bars fr-modal-more fr-not-available" id="fr-modal-more-'+aj.sid+'" title="'+aj.language.translate("Tags")+'"></i><h4 data-text="true">'+aj.language.translate("Manage Images")+"</h4></div>";b+='<div class="fr-modal-tags" id="fr-modal-tags"></div>',d=aj.opts.imageManagerPreloader?'<img class="fr-preloader" id="fr-preloader" alt="'+aj.language.translate("Loading")+'.." src="'+aj.opts.imageManagerPreloader+'" style="display: none;">':'<span class="fr-preloader" id="fr-preloader" style="display: none;">'+aj.language.translate("Loading")+"</span>",d+='<div class="fr-image-list" id="fr-image-list"></div>';var c=aj.modals.create(aq,b,d);ar=c.$modal,am=c.$head,ag=c.$body}ar.data("current-image",aj.image.get()),aj.modals.show(aq),ap||(ap=ar.find("#fr-preloader"),ak=ar.find("#fr-image-list"),av=ar.find("#fr-modal-tags"),aw=Z(),X(),am.css("height",am.find(".fr-modal-head-line").outerHeight()),aj.events.$on(a(aj.o_win),"resize",function(){A(!!af)}),aj.helpers.isMobile()&&(aj.events.bindClick(ak,"div.fr-image-container",function(f){ar.find(".fr-mobile-selected").removeClass("fr-mobile-selected"),a(f.currentTarget).addClass("fr-mobile-selected")}),ar.on(aj._mousedown,function(){ar.find(".fr-mobile-selected").removeClass("fr-mobile-selected")})),aj.events.bindClick(ak,".fr-insert-img",B),aj.events.bindClick(ak,".fr-delete-img",G),ar.on(aj._mousedown+" "+aj._mouseup,function(f){f.stopPropagation()}),ar.on(aj._mousedown,"*",function(){aj.events.disableBlur()}),ag.on("scroll",O),aj.events.bindClick(ar,"i#fr-modal-more-"+aj.sid,V),aj.events.bindClick(av,"a",ao)),ap.show(),ak.find(".fr-list-column").empty(),aj.opts.imageManagerLoadURL?a.ajax({url:aj.opts.imageManagerLoadURL,method:aj.opts.imageManagerLoadMethod,data:aj.opts.imageManagerLoadParams,dataType:"json",crossDomain:aj.opts.requestWithCORS,xhrFields:{withCredentials:aj.opts.requestWithCredentials},headers:aj.opts.requestHeaders}).done(function(h,f,g){aj.events.trigger("imageManager.imagesLoaded",[h]),function(k,i){try{ak.find(".fr-list-column").empty(),ad=al=at=0,af=k,O()}catch(j){z(K,i)}}(h,g.response),ap.hide()}).fail(function(){var f=this.xhr();z(ai,f.response||f.responseText)}):z(ac)},hide:function(){aj.modals.hide(aq)}}},!a.FE.PLUGINS.image){throw new Error("Image manager plugin requires image plugin.")}a.FE.DEFAULTS.imageInsertButtons.push("imageManager"),a.FE.RegisterCommand("imageManager",{title:"Browse",undo:!1,focus:!1,modal:!0,callback:function(){this.imageManager.show()},plugin:"imageManager"}),a.FE.DefineIcon("imageManager",{NAME:"folder"}),a.FE.DefineIcon("imageManagerInsert",{NAME:"plus"}),a.FE.DefineIcon("imageManagerDelete",{NAME:"trash"})});