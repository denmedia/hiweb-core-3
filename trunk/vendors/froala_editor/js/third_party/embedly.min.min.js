/*!
 * froala_editor v2.8.4 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
;!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(c,b){return b===undefined&&(b="undefined"!=typeof window?require("jquery"):require("jquery")(c)),a(b)}:a(window.jQuery)}(function(a){a.extend(a.FE.POPUP_TEMPLATES,{"embedly.insert":"[_BUTTONS_][_URL_LAYER_]","embedly.edit":"[_BUTTONS_]"}),a.extend(a.FE.DEFAULTS,{embedlyKey:null,embedlyInsertButtons:["embedlyBack","|"],embedlyEditButtons:["embedlyRemove"],embedlyScriptPath:"https://cdn.embedly.com/widgets/platform.js"}),a.FE.PLUGINS.embedly=function(b){function y(){b.events.on("html.processGet",v),b.events.$on(b.$el,"click touchend","div.fr-embedly",c),b.events.on("mousedown window.mousedown",x),b.events.on("window.touchmove",h),b.events.on("mouseup window.mouseup",p),b.events.on("commands.mousedown",function(d){0<d.parents(".fr-toolbar").length&&p()}),b.events.on("blur video.hideResizer commands.undo commands.redo element.dropped",function(){p(!0)}),b.events.on("element.beforeDrop",function(d){if(d.hasClass("fr-embedly")){return d.html(d.attr("data-original-embed")),d}}),b.events.on("keydown",function(f){var d=f.which;return !z||d!=a.FE.KEYCODE.BACKSPACE&&d!=a.FE.KEYCODE.DELETE?z&&d==a.FE.KEYCODE.ESC?(p(!0),f.preventDefault(),!1):z&&d!=a.FE.KEYCODE.F10&&!b.keys.isBrowserAction(f)?(f.preventDefault(),!1):void 0:(f.preventDefault(),w(),!1)},!0),b.events.on("toolbar.esc",function(){if(z){return b.events.disableBlur(),b.events.focus(),!1}},!0),b.events.on("toolbar.focusEditor",function(){if(z){return !1}},!0),b.events.on("snapshot.after",function(f){var d=b.doc.createElement("div");d.innerHTML=f.html,v(d),f.html=d.innerHTML}),b.win.embedly&&b.win.embedly("on","card.resize",function(f){var d=a(f);d.parents(".fr-embedly").attr("contenteditable",!1).attr("draggable",!0).css("height",d.height()).addClass("fr-draggable")}),k(!0)}var z,g;function c(d){z=a(this),function(){g||function(){b.shared.$embedly_resizer?(g=b.shared.$embedly_resizer,b.shared.$embedly_overlay,b.events.on("destroy",function(){g.appendTo(a("body:first"))},!0)):(b.shared.$embedly_resizer=a('<div class="fr-embedly-resizer"></div>'),g=b.shared.$embedly_resizer,b.events.$on(g,"mousedown",function(f){f.stopPropagation()},!0));b.events.on("shared.destroy",function(){g.html("").removeData().remove(),g=null},!0)}();(b.$wp||b.$sc).append(g),g.data("instance",b),g.css("top",(b.opts.iframe?z.offset().top-1+b.$iframe.position().top:z.offset().top-b.$wp.offset().top-1)+b.$wp.scrollTop()).css("left",(b.opts.iframe?z.offset().left-1:z.offset().left-b.$wp.offset().left-1)+b.$wp.scrollLeft()).css("width",z.outerWidth()).css("height",z.height()).addClass("fr-active")}(),function(){var i=b.popups.get("embedly.edit");i||(i=function(){var o="";if(0<b.opts.embedlyEditButtons.length){o+='<div class="fr-buttons">',o+=b.button.buildList(b.opts.embedlyEditButtons);var m={buttons:o+="</div>"},r=b.popups.create("embedly.edit",m);return b.events.$on(b.$wp,"scroll.emebdly-edit",function(){z&&b.popups.isVisible("embedly.edit")&&(b.events.disableBlur(),c.call(z.get(0)))}),r}return !1}());if(i){b.popups.setContainer("embedly.edit",b.$sc),b.popups.refresh("embedly.edit");var f=z.offset().left+z.outerWidth()/2,l=z.offset().top+z.outerHeight();b.popups.show("embedly.edit",f,l,z.outerHeight())}}()}function v(f){if(f&&b.node.hasClass(f,"fr-embedly")){f.innerHTML=f.getAttribute("data-original-embed"),f.removeAttribute("draggable"),f.removeAttribute("contenteditable"),f.setAttribute("class",(f.getAttribute("class")||"").replace("fr-draggable",""))}else{if(f&&f.nodeType==Node.ELEMENT_NODE){for(var d=f.querySelectorAll(".fr-embedly"),i=0;i<d.length;i++){v(d[i])}}}}function k(f){if(f){return b.popups.onRefresh("embedly.insert",j),!0}var d="";0<b.opts.embedlyInsertButtons.length&&(d+='<div class="fr-buttons">',d+=b.button.buildList(b.opts.embedlyInsertButtons),d+="</div>");var i={buttons:d,url_layer:'<div class="fr-embedly-layer fr-active fr-layer" id="fr-embedly-layer-'+b.id+'"><div class="fr-input-line"><input id="fr-embedly-layer-text-'+b.id+'" type="text" placeholder="'+b.language.translate("Paste in a URL to embed")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="embedlyInsert" tabIndex="2" role="button">'+b.language.translate("Insert")+"</button></div></div>"};return b.popups.create("embedly.insert",i)}function j(){b.popups.get("embedly.insert").find(".fr-embedly-layer input").val("").trigger("change")}function q(f){if(f.length){var d="<a href='"+f+"' data-card-branding='0' class='embedly-card'"+(b.opts.embedlyKey?" data-card-key='"+b.opts.embedlyKey+"'":"")+"></a>";b.html.insert('<div class="fr-embedly fr-draggable" draggable="true" contenteditable="false" data-original-embed="'+d+'">'+d+"</div>"),b.popups.hideAll()}}function w(){if(z&&!1!==b.events.trigger("embedly.beforeRemove",[z])){var d=z;b.popups.hideAll(),p(!0),b.selection.setBefore(d.get(0))||b.selection.setAfter(d.get(0)),d.remove(),b.selection.restore(),b.html.fillEmptyBlocks(),b.undo.saveStep(),b.events.trigger("video.removed",[d])}}function p(d){z&&(b.shared.embedly_exit_flag||!0===d)&&(g.removeClass("fr-active"),b.toolbar.enable(),z.removeClass("fr-active"),z=null,h())}function x(){b.shared.embedly_exit_flag=!0}function h(){b.shared.embedly_exit_flag=!1}return b.shared.embedly_exit_flag=!1,{_init:function(){if(!b.$wp){return !1}if("undefined"!=typeof embedly){y()}else{if(b.shared.embedlyLoaded||(b.shared.embedlyCallbacks=[]),b.shared.embedlyCallbacks.push(y),!b.shared.embedlyLoaded){b.shared.embedlyLoaded=!0;var d=b.doc.createElement("script");d.type="text/javascript",d.src=b.opts.embedlyScriptPath,d.innerText="",d.onload=function(){for(var f=0;f<b.shared.embedlyCallbacks.length;f++){b.shared.embedlyCallbacks[f]()}},b.doc.getElementsByTagName("head")[0].appendChild(d)}}},showInsertPopup:function(){var i=b.$tb.find('.fr-command[data-cmd="embedly"]'),d=b.popups.get("embedly.insert");if(d||(d=k()),!d.hasClass("fr-active")){if(b.popups.refresh("embedly.insert"),b.popups.setContainer("embedly.insert",b.$tb),i.is(":visible")){var l=i.offset().left+i.outerWidth()/2,f=i.offset().top+(b.opts.toolbarBottom?10:i.outerHeight()-10);b.popups.show("embedly.insert",l,f,i.outerHeight())}else{b.position.forSelection(d),b.popups.show("embedly.insert")}}},insert:function(){q(b.popups.get("embedly.insert").find(".fr-embedly-layer input").val())},remove:w,get:function(){return z},add:q,back:function(){z?(b.events.disableBlur(),z.trigger("click")):(b.events.disableBlur(),b.selection.restore(),b.events.enableBlur(),b.popups.hide("embedly.insert"),b.toolbar.showInline())}}},a.FE.DefineIcon("embedly",{NAME:"share-alt"}),a.FE.RegisterCommand("embedly",{undo:!0,focus:!0,title:"Embed URL",popup:!0,callback:function(){this.popups.isVisible("embedly.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("embedly.insert")):this.embedly.showInsertPopup()},plugin:"embedly"}),a.FE.RegisterCommand("embedlyInsert",{undo:!0,focus:!0,callback:function(){this.embedly.insert()}}),a.FE.DefineIcon("embedlyRemove",{NAME:"trash"}),a.FE.RegisterCommand("embedlyRemove",{title:"Remove",undo:!1,callback:function(){this.embedly.remove()}}),a.FE.DefineIcon("embedlyBack",{NAME:"arrow-left"}),a.FE.RegisterCommand("embedlyBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.embedly.back()},refresh:function(b){this.embedly.get()||this.opts.toolbarInline?(b.removeClass("fr-hidden"),b.next(".fr-separator").removeClass("fr-hidden")):(b.addClass("fr-hidden"),b.next(".fr-separator").addClass("fr-hidden"))}})});