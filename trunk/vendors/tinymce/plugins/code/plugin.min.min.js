!function(){var p=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),b=function(a){return a.getParam("code_dialog_width",600)},g=function(a){return a.getParam("code_dialog_height",Math.min(f.DOM.getViewPort().h-200,500))},k=function(a,c){a.focus(),a.undoManager.transact(function(){a.setContent(c)}),a.selection.setCursorLocation(),a.nodeChanged()},j=function(a){return a.getContent({source_view:!0})},h=function(d){var a=b(d),c=g(d);d.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:a,minHeight:c,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(e){k(d,e.data.code)}}).find("#code").value(j(d))},m=function(a){a.addCommand("mceCodeEditor",function(){h(a)})},l=function(a){a.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){h(a)}}),a.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){h(a)}})};p.add("code",function(a){return m(a),l(a),{}})}();