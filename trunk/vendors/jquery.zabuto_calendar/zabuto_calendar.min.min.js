if(typeof jQuery=="undefined"){throw new Error("jQuery is not loaded")}var $=jQuery;$.fn.zabuto_calendar=function(d){var f=$.extend({},$.fn.zabuto_calendar_defaults(),d);var e=$.fn.zabuto_calendar_language(f.language);f=$.extend({},f,e);this.each(function(){var G=$(this);G.attr("id","zabuto_calendar_"+Math.floor(Math.random()*99999).toString(36));G.data("initYear",f.year);G.data("initMonth",f.month);G.data("monthLabels",f.month_labels);G.data("weekStartsOn",f.weekstartson);G.data("navIcons",f.nav_icon);G.data("dowLabels",f.dow_labels);G.data("showToday",f.today);G.data("showDays",f.show_days);G.data("showPrevious",f.show_previous);G.data("showNext",f.show_next);G.data("cellBorder",f.cell_border);G.data("jsonData",f.data);G.data("ajaxSettings",f.ajax);G.data("legendList",f.legend);G.data("actionFunction",f.action);G.data("actionNavFunction",f.action_nav);E();function E(){var h=parseInt(G.data("initYear"));var g=parseInt(G.data("initMonth"))-1;var l=new Date(h,g,1,0,0,0,0);G.data("initDate",l);var j=(G.data("cellBorder")===true)?" table-bordered":"";var n=$('<table class="table'+j+'"></table>');n=b(G,n,l.getFullYear(),l.getMonth());var i=J(G);var m=$('<div class="zabuto_calendar"></div>');m.append(n);m.append(i);G.append(m);var k=G.data("jsonData");if(false!==k){z(G,l.getFullYear(),l.getMonth())}}function b(k,h,g,j){var i=new Date(g,j,1,0,0,0,0);k.data("currDate",i);h.empty();h=y(k,h,g,j);h=L(k,h);h=A(k,h,g,j);z(k,g,j);return h}function J(i){var h=$('<div class="legend" id="'+i.attr("id")+'_legend"></div>');var g=i.data("legendList");if(typeof(g)=="object"&&g.length>0){$(g).each(function(o,l){if(typeof(l)=="object"){if("type" in l){var m="";if("label" in l){m=l.label}switch(l.type){case"text":if(m!==""){var p="";if("badge" in l){if(typeof(l.classname)==="undefined"){var k="badge-event"}else{var k=l.classname}p='<span class="badge '+k+'">'+l.badge+"</span> "}h.append('<span class="legend-'+l.type+'">'+p+m+"</span>")}break;case"block":if(m!==""){m="<span>"+m+"</span>"}if(typeof(l.classname)==="undefined"){var j="event"}else{var j="event-styled "+l.classname}h.append('<span class="legend-'+l.type+'"><ul class="legend"><li class="'+j+'"></li></ul>'+m+"</span>");break;case"list":if("list" in l&&typeof(l.list)=="object"&&l.list.length>0){var n=$('<ul class="legend"></ul>');$(l.list).each(function(q,r){n.append('<li class="'+r+'"></li>')});h.append(n)}break;case"spacer":h.append('<span class="legend-'+l.type+'"> </span>');break}}}})}return h}function y(R,S,u,k){var l=R.data("navIcons");var V=$('<span><span class="glyphicon glyphicon-chevron-left"></span></span>');var g=$('<span><span class="glyphicon glyphicon-chevron-right"></span></span>');if(typeof(l)==="object"){if("prev" in l){V.html(l.prev)}if("next" in l){g.html(l.next)}}var m=R.data("showPrevious");if(typeof(m)==="number"||m===false){m=B(R.data("showPrevious"),true)}var t=$('<div class="calendar-month-navigation"></div>');t.attr("id",R.attr("id")+"_nav-prev");t.data("navigation","prev");if(m!==false){var j=(k-1);var v=u;if(j==-1){v=(v-1);j=11}t.data("to",{year:v,month:(j+1)});t.append(V);if(typeof(R.data("actionNavFunction"))==="function"){t.click(R.data("actionNavFunction"))}t.click(function(M){b(R,S,v,j)})}var T=R.data("showNext");if(typeof(T)==="number"||T===false){T=B(R.data("showNext"),false)}var n=$('<div class="calendar-month-navigation"></div>');n.attr("id",R.attr("id")+"_nav-next");n.data("navigation","next");if(T!==false){var r=(k+1);var h=u;if(r==12){h=(h+1);r=0}n.data("to",{year:h,month:(r+1)});n.append(g);if(typeof(R.data("actionNavFunction"))==="function"){n.click(R.data("actionNavFunction"))}n.click(function(M){b(R,S,h,r)})}var U=R.data("monthLabels");var p=$("<td></td>").append(t);var i=$("<td></td>").append(n);var s=$("<span>"+U[k]+" "+u+"</span>");s.dblclick(function(){var M=R.data("initDate");b(R,S,M.getFullYear(),M.getMonth())});var q=$('<td colspan="5"></td>');q.append(s);var o=$('<tr class="calendar-month-header"></tr>');o.append(p,q,i);S.append(o);return S}function L(k,m){if(k.data("showDays")===true){var i=k.data("weekStartsOn");var h=k.data("dowLabels");if(i===0){var g=$.extend([],h);var j=new Array(g.pop());h=j.concat(g)}var l=$('<tr class="calendar-dow-header"></tr>');$(h).each(function(o,n){l.append("<th>"+n+"</th>")});m.append(l)}return m}function A(t,u,r,i){var v=t.data("ajaxSettings");var s=x(r,i);var q=C(r,i);var O=H(r,i,1);var g=H(r,i,q);var P=1;var k=t.data("weekStartsOn");if(k===0){if(g==6){s++}if(O==6&&(g==0||g==1||g==5)){s--}O++;if(O==7){O=0}}for(var m=0;m<s;m++){var o=$('<tr class="calendar-dow"></tr>');for(var n=0;n<7;n++){if(n<O||P>q){o.append("<td></td>")}else{var h=t.attr("id")+"_"+F(r,i,P);var j=h+"_day";var l=$('<div id="'+j+'" class="day" >'+P+"</div>");l.data("day",P);if(a(r,i,P)){l.addClass("today");if(t.data("showToday")===true){l.html('<span class="badge badge-today">'+P+"</span>")}}var p=$('<td id="'+h+'"></td>');p.append(l);p.data("date",F(r,i,P));p.data("hasEvent",false);if(typeof(t.data("actionFunction"))==="function"){p.addClass("dow-clickable");p.click(function(){t.data("selectedDate",$(this).data("date"))});p.click(t.data("actionFunction"))}o.append(p);P++}if(n==6){O=0}}u.append(o)}return u}function I(k,r,s,p){var q=$('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>');var l=$('<h4 class="modal-title" id="'+k+'_modal_title">'+r+"</h4>");var o=$('<div class="modal-header"></div>');o.append(q);o.append(l);var g=$('<div class="modal-body" id="'+k+'_modal_body">'+s+"</div>");var h=$('<div class="modal-footer" id="'+k+'_modal_footer"></div>');if(typeof(p)!=="undefined"){var m=$("<div>"+p+"</div>");h.append(m)}var j=$('<div class="modal-content"></div>');j.append(o);j.append(g);j.append(h);var n=$('<div class="modal-dialog"></div>');n.append(j);var i=$('<div class="modal fade" id="'+k+'_modal" tabindex="-1" role="dialog" aria-labelledby="'+k+'_modal_title" aria-hidden="true"></div>');i.append(n);i.data("dateId",k);i.attr("dateId",k);return i}function z(k,h,g){var i=k.data("jsonData");var j=k.data("ajaxSettings");k.data("events",false);if(false!==i){return D(k)}else{if(false!==j){return w(k,h,g)}}return true}function D(g){var h=g.data("jsonData");g.data("events",h);K(g,"json");return true}function w(h,i,g){var j=h.data("ajaxSettings");if(typeof(j)!="object"||typeof(j.url)=="undefined"){alert("Invalid calendar event settings");return false}var k={year:i,month:(g+1)};$.ajax({type:"GET",url:j.url,data:k,dataType:"json"}).done(function(m){var l=[];$.each(m,function(n,o){l.push(m[n])});h.data("events",l);K(h,"ajax")});return true}function K(j,k){var h=j.data("jsonData");var g=j.data("ajaxSettings");var i=j.data("events");if(i!==false){$(i).each(function(s,q){var n=j.attr("id")+"_"+q.date;var l=$("#"+n);var p=$("#"+n+"_day");l.data("hasEvent",true);if(typeof(q.title)!=="undefined"){l.attr("title",q.title)}if(typeof(q.classname)==="undefined"){l.addClass("event")}else{l.addClass("event-styled");p.addClass(q.classname)}if(typeof(q.badge)!=="undefined"&&q.badge!==false){var m=(q.badge===true)?"":" badge-"+q.badge;var t=p.data("day");p.html('<span class="badge badge-event'+m+'">'+t+"</span>")}if(typeof(q.body)!=="undefined"){var r=false;if(k==="json"&&typeof(q.modal)!=="undefined"&&q.modal===true){r=true}else{if(k==="ajax"&&"modal" in g&&g.modal===true){r=true}}if(r===true){l.addClass("event-clickable");var o=I(n,q.title,q.body,q.footer);$("body").append(o);$("#"+n).click(function(){$("#"+n+"_modal").modal()})}}})}}function a(k,j,h){var g=new Date();var i=new Date(k,j,h);return(i.toDateString()==g.toDateString())}function F(k,j,h){var i,g;g=(h<10)?"0"+h:h;i=j+1;i=(i<10)?"0"+i:i;return k+"-"+i+"-"+g}function H(k,j,h){var i=new Date(k,j,h,0,0,0,0);var g=i.getDay();if(g==0){g=6}else{g--}return g}function C(g,i){var h=28;while(c(g,i+1,h+1)){h++}return h}function x(m,h){var i=C(m,h);var k=H(m,h,1);var j=H(m,h,i);var l=i;var g=(k-j);if(g>0){l+=g}return Math.ceil(l/7)}function c(i,h,g){return h>0&&h<13&&i>0&&i<32768&&g>0&&g<=(new Date(i,h,0)).getDate()}function B(k,h){if(k===false){k=0}var j=G.data("currDate");var g=G.data("initDate");var i;i=(g.getFullYear()-j.getFullYear())*12;i-=j.getMonth()+1;i+=g.getMonth();if(h===true){if(i<(parseInt(k)-1)){return true}}else{if(i>=(0-parseInt(k))){return true}}return false}});return this};$.fn.zabuto_calendar_defaults=function(){var f=new Date();var h=f.getFullYear();var g=f.getMonth()+1;var e={language:false,year:h,month:g,show_previous:true,show_next:true,cell_border:false,today:false,show_days:true,weekstartson:1,nav_icon:false,data:false,ajax:false,legend:false,action:false,action_nav:false};return e};$.fn.zabuto_calendar_language=function(b){if(typeof(b)=="undefined"||b===false){b="en"}switch(b.toLowerCase()){case"ar":return{month_labels:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],dow_labels:["أثنين","ثلاثاء","اربعاء","خميس","جمعه","سبت","أحد"]};break;case"az":return{month_labels:["Yanvar","Fevral","Mart","Aprel","May","İyun","İyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dow_labels:["B.e","Ç.A","Çərş","C.A","Cümə","Şən","Baz"]};break;case"cn":return{month_labels:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dow_labels:["星期一","星期二","星期三","星期四","星期五","星期六","星期日"]};break;case"cs":return{month_labels:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dow_labels:["Po","Út","St","Čt","Pá","So","Ne"]};break;case"de":return{month_labels:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dow_labels:["Mo","Di","Mi","Do","Fr","Sa","So"]};break;case"en":return{month_labels:["January","February","March","April","May","June","July","August","September","October","November","December"],dow_labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]};break;case"he":return{month_labels:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dow_labels:["ב","ג","ד","ה","ו","ש","א"]};break;case"es":return{month_labels:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dow_labels:["Lu","Ma","Mi","Ju","Vi","Sá","Do"]};break;case"fi":return{month_labels:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dow_labels:["Ma","Ti","Ke","To","Pe","La","Su"]};break;case"fr":return{month_labels:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dow_labels:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]};break;case"hu":return{month_labels:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dow_labels:["Hé","Ke","Sze","Cs","Pé","Szo","Va"]};break;case"id":return{month_labels:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dow_labels:["Senin","Selasa","Rabu","Kamis","Jum'at","Sabtu","Minggu"]};break;case"it":return{month_labels:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dow_labels:["Lun","Mar","Mer","Gio","Ven","Sab","Dom"]};break;case"jp":return{month_labels:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dow_labels:["月","火","水","木","金","土","日"]};break;case"nl":return{month_labels:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],dow_labels:["Ma","Di","Wo","Do","Vr","Za","Zo"]};break;case"no":return{month_labels:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dow_labels:["Ma","Ti","On","To","Fr","L\u00f8","S\u00f8"]};break;case"pl":return{month_labels:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],dow_labels:["pon.","wt.","śr.","czw.","pt.","sob.","niedz."]};break;case"pt":return{month_labels:["Janeiro","Fevereiro","Marco","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dow_labels:["S","T","Q","Q","S","S","D"]};break;case"ru":return{month_labels:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dow_labels:["Пн","Вт","Ср","Чт","Пт","Сб","Вск"]};break;case"se":return{month_labels:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dow_labels:["Mån","Tis","Ons","Tor","Fre","Lör","Sön"]};break;case"sk":return{month_labels:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dow_labels:["Po","Ut","St","Št","Pi","So","Ne"]};break;case"tr":return{month_labels:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dow_labels:["Pts","Salı","Çar","Per","Cuma","Cts","Paz"]};break;case"ua":return{month_labels:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dow_labels:["Пн","Вт","Ср","Чт","Пт","Сб","Нд"]};break}};